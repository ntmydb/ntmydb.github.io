<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.jpg"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Whispering's Blog" href="http://ntmydb/github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Whispering's Blog" href="http://ntmydb/github.io/atom.xml"><link rel="alternate" type="application/json" title="Whispering's Blog" href="http://ntmydb/github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="考研408,操作系统"><link rel="canonical" href="http://ntmydb/github.io/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-3-2/"><title>操作系统 408-3-2 - 操作系统 - 计算机科学 | Flüstern = Whispering's Blog = 无需过去，无关未来，只有现在</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">操作系统 408-3-2</h1><div class="meta"><span class="item" title="创建时间：2024-08-07 21:47:38"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2024-08-07T21:47:38+08:00">2024-08-07</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>5.7k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>5 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Flüstern</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://s2.loli.net/2023/10/27/ueDisHEIf9NJKLb.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/10/27/KS3EjfClHYktsPo.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/10/29/fMiGIcxQRSt8h2e.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/10/25/UDQcLyoBfuOF4Vb.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/10/25/LmezdIbZO4vV9PM.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/10/27/38IPeq5uTMnO2Fw.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于 计算机科学"><span itemprop="name">计算机科学</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/operating-system/" itemprop="item" rel="index" title="分类于 操作系统"><span itemprop="name">操作系统</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://ntmydb/github.io/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-3-2/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Whispering"><meta itemprop="description" content="无需过去，无关未来，只有现在, Whispering's Blog"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Whispering's Blog"></span><div class="body md" itemprop="articleBody"><p><span id="more"></span></p><h3 id="虚拟内存"><a class="anchor" href="#虚拟内存">#</a> 虚拟内存</h3><p>传统存储管理方式的特征、缺点：</p><ul><li>一次性：作业必须一次性全部装入内存后才能开始运行。这会造成两个问题：<ul><li>作业太大时，不能全部装入内存，导致大作业无法运行</li><li>当大量作业要求运行时，由于内存无法容纳所有作业，因此只有少量作业能运行，导致多道程序并发度下降</li></ul></li><li>驻留性：一旦作业被装入内存，就会一直驻留在内存中，直至作业运行结束。事实上，在一个时间段内，只需要访问作业的一小部分数据即可正常运行，这就导致了内存中会驻留大量的、暂时用不到的数据，浪费了宝贵的内存资源</li></ul><h4 id="虚拟内存的定义和特征"><a class="anchor" href="#虚拟内存的定义和特征">#</a> 虚拟内存的定义和特征</h4><p>基于局部性原理，在程序装入时，可以将程序中很快会用到的部分装入内存，暂时用不到的部分留在外存，就可以让程序开始执行。</p><p>在程序执行过程中，当所访问的信息不在内存时，由操作系统负责将所需信息从外存调入内存，然后继续执行程序。</p><p>若内存空间不够，由操作系统负责将内存中暂时用不到的信息换出到外存</p><p>在操作系统的管理下，在用户看来似乎有一个比实际内存大得多的内存，这就是虚拟内存（操作系统虚拟性的一个体现，实际的物理内存大小没有变，只是在逻辑上进行了扩充）</p><p>虚拟内存的三个主要特征：</p><ul><li>多次性：无需在作业运行时一次性全部装入内存、而是允许被分成多次调入内存</li><li>对换性：在作业运行时无需一直常驻内存，而是允许在作业运行过程中，将作业换入、换出</li><li>虚拟性：在逻辑上扩充了内存的容量，使用户看到的内存容量，远大于实际的容量</li></ul><h4 id="如何实现虚拟内存"><a class="anchor" href="#如何实现虚拟内存">#</a> 如何实现虚拟内存</h4><p>虚拟内存的实现需要建立在离散分配的内容管理方式基础上</p><ul><li>请求分页存储管理</li><li>请求分段存储管理</li><li>请求段页式存储管理</li></ul><p><strong>虚拟内存管理方式与传统的非连续分配存储管理方式区别</strong></p><p>主要区别</p><ul><li><p>在程序执行过程中，当所访问的信息不在内存时，由操作系统负责将所需的信息从外存调入内存，然后继续执行程序</p></li><li><p>若内存空间不够，由操作系统负责将内存中暂时用不到的信息换出到外存</p></li></ul><p>操作系统需实现功能：</p><ul><li>操作系统要提供请求调页 (或请求调段) 功能</li><li>操作系统要提供页面置换（或段置换）的功能</li></ul><h3 id="请求分页管理方式"><a class="anchor" href="#请求分页管理方式">#</a> 请求分页管理方式</h3><p>请求分页存储管理与基本分页存储管理的主要区别：</p><ul><li><p>在程序执行过程中，当所访问的信息不在内存时，由操作系统负责将所需的信息从外存调入内存，然后继续执行程序</p></li><li><p>若内存空间不够，由操作系统负责将内存中暂时用不到的信息换出到外存</p></li></ul><h4 id="页表机制"><a class="anchor" href="#页表机制">#</a> 页表机制</h4><p>与基本分页管理相比，请求分页管理中，为了实现请求调页，操作系统需要知道每个页面是否已经调入内存，如果还没调入，那么也需要知道该页面在外存中的存放位置</p><p>当内存空间不够时，要实现 &quot;页面置换&quot;，操作系统需要通过某些指标来决定到底换出哪个页面；有的页面没有被修改，就不用再浪费时间写回外存。有的页面修改过，就需要将外存中的旧数据覆盖，因此，操作系统也需要记录各个页面是否被修改的信息</p><p>请求分页存储管理的页表添加了四个字段：</p><ul><li>状态位（是否已调入内存）：0 为没有调入内存，1 为已调入内存</li><li>访问字段（可记录最近被访问过几次，该记录上次访问的时间，供置换算法选择换出页面时参考）</li><li>修改位（页面调入内存后是否被修改过）</li><li>外存地址（页面在外存中的存放位置）</li></ul><h4 id="缺页中断机构"><a class="anchor" href="#缺页中断机构">#</a> 缺页中断机构</h4><p>在请求分页系统中，每当要访问的页面不存在时，便产生一个缺页中断，然后由操作系统的缺页中断处理程序处理中断。</p><p>此时缺页的进程阻塞，放入阻塞队列，调页完成后再将其唤醒，放回就绪队列</p><p>如果内存中有空闲块，则为进程分配一个空闲块，将所缺页面装入该块，并修改页表中相应的页表项</p><p>如果内存中没有空闲块，则由页面置换算法选择一个页面淘汰，若该页面在内存期间被修改过，则需要将其写回外存，未修改过的页面不用写回外存</p><p>缺页中断是因为当前执行的指令想要访问的目标页面未调入内存而产生的，因此属于内中断</p><p>一条指令在执行过程当中，可能产生多次缺页中断</p><h4 id="地址变换机构"><a class="anchor" href="#地址变换机构">#</a> 地址变换机构</h4><p>新增步骤：</p><ul><li>请求调页（查到页表项时进行判断）</li><li>页面置换（需要调入页面，但没有空闲内存块时进行）</li><li>需要修改请求页表中新增的表项</li></ul><p>快表中有的页面一定是在内存中的。若某个页面被换出内存，则快表中相应表项也要删除，否则可能访问错误的页面</p><p>细节部分：</p><ul><li>只有 &quot;写指令&quot; 才需要修改 &quot;修改位&quot;。并且，一般来说只需要修改快表中的数据，只有要将快表项删除时才需要写回内存中的慢表。这样可以减少访存次数</li><li>和普通的中断处理一样，缺页中断处理依然需要保留 CPU 现场</li><li>需要用某种 &quot;页面置换算法&quot; 来决定一个换出页面</li><li>换入 / 换出页面都需要启动慢速的 I/O 操作，可见，如果换入 / 换出太频繁，会有很大的开销</li><li>页面调入内存后，需要修改慢表，同时也需要将表项复制到快表中。</li><li>在具有快表机构的请求分页系统中，访问一个逻辑地址时，若发生缺页，则地址变换步骤是：<ul><li>查快表（未命中）—— 查慢表（发现未调入内存）—— 调页（调入的页面对应的表项会直接加入快表）—— 查快表（命中）—— 访问目标内存单元</li></ul></li></ul><h3 id="页面置换算法"><a class="anchor" href="#页面置换算法">#</a> 页面置换算法</h3><h4 id="最佳置换算法opt"><a class="anchor" href="#最佳置换算法opt">#</a> 最佳置换算法 OPT</h4><p>最佳置换算法：每次选择淘汰的页面将是以后永不使用，或者在最长的时间内不再被访问的页面。这样可以保证最低的缺页率</p><h4 id="先进先出置换算法fifo"><a class="anchor" href="#先进先出置换算法fifo">#</a> 先进先出置换算法 FIFO</h4><p>先进先出置换算法：每次选择淘汰的页面是最早进入内存的页面</p><p>实现方法：把调入内存的页面根据调入的先后顺序排成一个队列，需要换出页面时选择队头页面即可。队列的最大长度取决于系统为进程分配了多少个内存块</p><p>Belady 现象：当为进程分配的物理块数增大时，缺页次数不减反增的异常现象</p><p>只有 FIFO 算法会产生 Belady 现象。另外，FIFO 算法虽然实现简单，但是该算法与进程实际运行时规律不适应，因为先进先入的页面也有可能最经常被访问。因此，算法性能差</p><h4 id="最近最久未使用置换算法lru"><a class="anchor" href="#最近最久未使用置换算法lru">#</a> 最近最久未使用置换算法（LRU）</h4><p>最近最久未使用置换算法：每次淘汰的页面时最近最久未使用的页面</p><p>实现方法：赋予每个页面对应的页表项中，用访问字段记录该页面自上次被访问以来所经历的时间 t。当需要淘汰一个页面时，选择现有页面中 t 值最大的，即最近最久未使用的页面</p><p>在手动做题时，若需要淘汰页面，可以逆向检查此时在内存中的几个页面号，在逆向扫描过程中最后一个出现的页号就是要淘汰的页面。</p><p>该算法的实现需要专门的硬件支持，虽然算法性能好，但是实现困难，开销大</p><h4 id="时钟置换算法clock"><a class="anchor" href="#时钟置换算法clock">#</a> 时钟置换算法（CLOCK）</h4><p>最佳置换算法性能最好，但无法实现；先进先出置换算法实现简单，但算法性能差；最近最久未使用置换算法性能好，是最接近 OPT 算法性能的，但是实现起来需要专门的硬件支持，算法开销大</p><p>时钟置换算法是一种性能和开销比较均衡的算法，又称 CLOCK 算法，或最近未使用算法（NRU）</p><p>简单的 CLOCK 算法实现方法：为每个页面设置一个访问位，再将内存中的页面都通过链接指针链接成一个循环队列。当某页被访问时，其访问位置为 1。当需要淘汰一个页面时，只需检查页的访问位。如果是 0，就选择该页换出；如果是 1，则将它置成 0，暂不换出，继续检查下一个页面，若第一轮扫描中所有页面都是 1，则将这些页面的访问位依次置为 0 后，再进行第二轮扫描（第二轮扫描一定会有访问位为 0 的页面，因此简单的 CLOCK 算法选择一个淘汰页面最多会经过两轮扫描）</p><h4 id="改进的时钟置换算法"><a class="anchor" href="#改进的时钟置换算法">#</a> 改进的时钟置换算法</h4><p>简单的时钟置换算法仅考虑一个页面最近是否被访问过。事实上，如果被淘汰的页面没有被修改过，就不需要执行 I/O 操作写回外存。只有被淘汰的页面被修改时，才需要写回外存。</p><p>因此，除了考虑一个页面最近有没有被访问过之外，操作系统还应考虑页面有没有被修改过。在其他条件都相同时，应优先淘汰没有修改过的页面，避免 I/O 操作。这就是改进的时钟置换算法的思想</p><p>修改位 = 0，表示页面没有被修改过，修改位 = 1，表示页面被修改过</p><p>用（访问位，修改位）的形式表示各页面的状态</p><p>算法规则：将所有可能被置换的页面排成一个循环队列</p><p>第一轮：从当前位置开始扫描到第一个 (0,0) 的帧用于替换。本轮扫描不修改任何标志位</p><p>第二轮：若第一轮扫描失败，则重新扫描，查找第一个 (0,1) 的帧用于替换。本轮将所有扫描过的帧访问位设为 0</p><p>第三轮：若第二轮扫描失败，则重新扫描，查找第一个 (0,0) 的帧用于替换。本轮扫描不修改任何标志位</p><p>第四轮：若第三轮扫描失败，则重新扫描，查找第一个 (0,1) 的帧用于替换。</p><p>改进型 CLOCK 置换算法选择一个淘汰页面最多会进行四轮扫描</p><p>第一优先级：最近没访问，且没有修改的页面</p><p>第二优先级：最近没访问，但修改过的页面</p><p>第三优先级：最近访问了，但没有修改的页面</p><p>第四优先级：最近访问了，且有修改的页面</p><h3 id="页面分配策略-抖动-工作集"><a class="anchor" href="#页面分配策略-抖动-工作集">#</a> 页面分配策略、抖动、工作集</h3><h4 id="页面分配-置换策略"><a class="anchor" href="#页面分配-置换策略">#</a> 页面分配、置换策略</h4><p>驻留集：指请求分页存储管理中给进程分配的物理块的集合</p><p>在采用了虚拟存储技术的系统中，驻留集大小一般小于进程的总大小</p><p>若驻留集太小，会导致缺页频繁，系统要花大量时间来处理缺页，实际用于进程推进的时间很少；驻留集太大又会导致多道程序并发度下降，资源利用率降低。所以应选择一个合适的驻留集大小</p><p>固定分配：操作系统为每个进程分配一组固定数目的物理块，在进程运行期间不再改变，即：驻留集大小不变</p><p>可变分配：先为每个进程分配一定数目的物理块，在进程运行过程期间，可根据情况做适当的增加或减少，即，驻留集大小可变</p><p>局部置换：发生缺页时只能选进程自己的物理块进行置换</p><p>全局置换：可以将操作系统保留的空闲物理块分配给缺页进程，也可以将别的进程持有的物理块置换到外存，再分配给缺页进程</p><p>注意：全局置换意味着一个进程拥有的物理块数量必然会改变，因此不可能是固定分配</p><p><strong>固定分配局部置换</strong></p><p>系统为每个进程分配一定数量的物理块，在整个运行期间都不改变。若进程在运行中发生缺页，则只能从该进程在内存中的页面中选出一页换出，然后再调入需要的页面，这种策略的缺点是：很难在刚开始就确定应为每个进程分配多少个物理块才算合理。（采用这种策略的系统可以根据进程大小、优先级，或是根据程序员给出的参数来确定为一个进程分配的内存块数）</p><p><strong>可变分配全局置换</strong></p><p>刚开始会为每个进程分配一定数量的物理块。操作系统会保持一个空闲物理块队列。当某进程发生缺页时，从空闲物理块中取出一块分配给该进程；若无空闲物理块，则可选择一个未锁定的页面换出外存，再将该物理块分配给缺页的进程。采用这种策略时，只要某进程发生缺页，都将获得新的物理块，仅当空闲物理块用完时，系统才选择一个未锁定的页面调出，被选择调出的页可能是系统中任何一个进程中的页，因此这个被选中的进程拥有的物理块会减少，缺页率会增加。（系统会锁定一些页面，这些页面中的内容不能置换出外存，如重要的内核数据可以设为锁定）</p><p><strong>可变分配局部置换</strong></p><p>刚开始为每个进程分配一定数量的物理块。当某进程发生缺页时，只允许从该进程自己的物理块中选出一个进行换出外存。如果进程在运行中频繁地缺页，系统会为该进程多分配几个物理块，直至该进程缺页率趋势适当程度；反之，如果进程在运行过程中缺页率特别低，则可适当减少分配给该进程的物理块</p><p>可变分配全局置换：只要缺页就分配新的物理块</p><p>可变分配局部置换：要根据发生缺页的频率来动态地增加或减少进程的物理块</p><h4 id="何时调入页面"><a class="anchor" href="#何时调入页面">#</a> 何时调入页面</h4><ul><li><p>预调页策略：根据局部性原理（主要指空间局部性），一次调入若干个相邻的页面可能比一次调入一个页面更高效。但如果提前调入的页面中大多数都没被访问过，则又是低效的。因此可以预测不久之后可能访问到的页面，将它们预先调入内存，但目前预测成功率只有 50% 左右。故这种策略主要用于进程的首次调入（运行前调入），由程序员指出应该先调入哪些部分</p></li><li><p>请求调页策略：进程在运行期间发现缺页时才将所缺页面调入内存。由这种策略调入的页面一定会被访问到，但由于每次只能调入一页，而每次调页都要磁盘 I/O 操作，因此 I/O 开销较大</p></li></ul><h4 id="从何处调入页面"><a class="anchor" href="#从何处调入页面">#</a> 从何处调入页面</h4><p>外存：</p><ul><li><p>对换区：读 / 写速度更快，采用连续分配方式</p></li><li><p>文件区：读 / 写速度更慢，采用离散分配方式</p></li></ul><p>1、系统拥有足够的对换区空间：页面的调入、调出都是在内存与对换区之间进行，这样可以保证页面的调入、调出速度很快。在进程运行前，需将进程相关的数据从文件区复制到对换区</p><p>2、系统缺少足够的对换区空间：凡是不会被修改的数据都直接从文件区调入，由于这些页面不会被修改，因此换出时不必写回磁盘，下次需要时再从文件区调入即可。对于可能被修改的部分，换出时需写回磁盘对换区，下次需要时再从对换区调入</p><p>3、UNIX 方式：运行之前进程有关的数据全部放在文件区，故未使用过的页面，都可以从文件区调入。若被使用过的页面需要换出，则写回对换区，下次需要时从对换区调入</p><h4 id="抖动颠簸现象"><a class="anchor" href="#抖动颠簸现象">#</a> 抖动（颠簸）现象</h4><p>刚刚换出的页面马上又要换入内存，刚刚换入的页面马上又要换出外存，这种频繁的页面调度行为称为抖动，或颠簸。产生抖动的主要原因是进程频繁访问的页面数目高于可用的物理块数（分配给进程的物理块不够）</p><p>工作集：指在某段时间间隔里，进程实际访问页面的集合</p><p>操作系统会根据窗口尺寸计算工作集</p><p>工作集大小可能小于窗口尺寸，实际应用中，操作系统可以统计进程的工作集大小，根据工作集大小给进程分配若干内存块。</p><p>一般来说，驻留集的大小不能小于工作集大小，否则进程运行过程中将频繁缺页</p><p>拓展：基于局部性原理可知，进程在一段时间内访问的页面与不久之后会访问的页面是由相关性的。因此，可以根据进程近期访问的页面集合（工作集）来设计一种页面置换算法 —— 选择一个不在工作集中的页面进行淘汰</p><h3 id="内存映射文件"><a class="anchor" href="#内存映射文件">#</a> 内存映射文件</h3><p>内存映射文件 —— 操作系统向上层程序员提供的功能（系统调用）</p><ul><li>方便程序员访问文件数据</li><li>方便多个进程共享同一个文件</li></ul><p><strong>传统的文件访问方式</strong></p><ul><li><p>open 系统调用 —— 打开文件</p></li><li><p>seek 系统调用 —— 将读写指针移到某个位置</p></li><li><p>read 系统调用 —— 从读写指针所指位置读入若干数据（从磁盘读入内容）</p></li><li><p>write 系统调用 —— 将内存中的指定数据，写回磁盘（根据读写指针确定要写回什么位置）</p></li></ul><p><strong>内存映射文件</strong></p><ul><li>open 系统调用 —— 打开文件</li><li>mmap 系统调用 —— 将文件映射到进程的虚拟地址空间</li></ul><p>特性：</p><ul><li><p>以访问内存的方式访问文件数据</p></li><li><p>以文件数据的读入、写出由操作系统自动完成</p></li><li><p>进程关闭文件时，操作系统自动将文件被修改的数据写回磁盘</p></li><li><p>多个进程可以映射同一个文件，实现共享</p></li></ul><p>在物理内存中，一个文件对应同一份数据，当一个进程修改文件数据时，另一个进程可以立马 &quot;看到&quot;</p><p>优点：</p><ul><li>程序员编程更简单，已建立映射的文件，只需按访问内存的方式读写即可</li><li>文件数据的读入 / 写出完全由操作系统负责优化</li></ul><div class="tags"><a href="/tags/%E8%80%83%E7%A0%94408/" rel="tag"><i class="ic i-tag"></i> 考研408</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag"><i class="ic i-tag"></i> 操作系统</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2024-08-08 19:43:03" itemprop="dateModified" datetime="2024-08-08T19:43:03+08:00">2024-08-08</time> </span><span id="computer-science/operating-system/操作系统408-3-2/" class="item leancloud_visitors" data-flag-title="操作系统 408-3-2" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Whispering <i class="ic i-at"><em>@</em></i>Whispering's Blog</li><li class="link"><strong>本文链接：</strong> <a href="http://ntmydb/github.io/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-3-2/" title="操作系统 408-3-2">http://ntmydb/github.io/computer-science/operating-system/操作系统408-3-2/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/computer-network/%E8%AE%A1%E7%BD%91408-3-2/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;10&#x2F;25&#x2F;6P3LF1M4Gjd52EZ.jpg" title="计网408-3-2"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 计算机网络</span><h3>计网408-3-2</h3></a></div><div class="item right"><a href="/computer-science/computer-network/%E8%AE%A1%E7%BD%91408-4-1/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;10&#x2F;27&#x2F;YUFinalV2xjqHtf.jpg" title="计网408-4-1"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 计算机网络</span><h3>计网408-4-1</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98"><span class="toc-number">1.</span> <span class="toc-text">虚拟内存</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98%E7%9A%84%E5%AE%9A%E4%B9%89%E5%92%8C%E7%89%B9%E5%BE%81"><span class="toc-number">1.1.</span> <span class="toc-text">虚拟内存的定义和特征</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%99%9A%E6%8B%9F%E5%86%85%E5%AD%98"><span class="toc-number">1.2.</span> <span class="toc-text">如何实现虚拟内存</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%B7%E6%B1%82%E5%88%86%E9%A1%B5%E7%AE%A1%E7%90%86%E6%96%B9%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">请求分页管理方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B5%E8%A1%A8%E6%9C%BA%E5%88%B6"><span class="toc-number">2.1.</span> <span class="toc-text">页表机制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BC%BA%E9%A1%B5%E4%B8%AD%E6%96%AD%E6%9C%BA%E6%9E%84"><span class="toc-number">2.2.</span> <span class="toc-text">缺页中断机构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%B0%E5%9D%80%E5%8F%98%E6%8D%A2%E6%9C%BA%E6%9E%84"><span class="toc-number">2.3.</span> <span class="toc-text">地址变换机构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">页面置换算法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E4%BD%B3%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95opt"><span class="toc-number">3.1.</span> <span class="toc-text">最佳置换算法 OPT</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%88%E8%BF%9B%E5%85%88%E5%87%BA%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95fifo"><span class="toc-number">3.2.</span> <span class="toc-text">先进先出置换算法 FIFO</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9C%80%E8%BF%91%E6%9C%80%E4%B9%85%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95lru"><span class="toc-number">3.3.</span> <span class="toc-text">最近最久未使用置换算法（LRU）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%B6%E9%92%9F%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95clock"><span class="toc-number">3.4.</span> <span class="toc-text">时钟置换算法（CLOCK）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%94%B9%E8%BF%9B%E7%9A%84%E6%97%B6%E9%92%9F%E7%BD%AE%E6%8D%A2%E7%AE%97%E6%B3%95"><span class="toc-number">3.5.</span> <span class="toc-text">改进的时钟置换算法</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%88%86%E9%85%8D%E7%AD%96%E7%95%A5-%E6%8A%96%E5%8A%A8-%E5%B7%A5%E4%BD%9C%E9%9B%86"><span class="toc-number">4.</span> <span class="toc-text">页面分配策略、抖动、工作集</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%A1%B5%E9%9D%A2%E5%88%86%E9%85%8D-%E7%BD%AE%E6%8D%A2%E7%AD%96%E7%95%A5"><span class="toc-number">4.1.</span> <span class="toc-text">页面分配、置换策略</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%95%E6%97%B6%E8%B0%83%E5%85%A5%E9%A1%B5%E9%9D%A2"><span class="toc-number">4.2.</span> <span class="toc-text">何时调入页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%8E%E4%BD%95%E5%A4%84%E8%B0%83%E5%85%A5%E9%A1%B5%E9%9D%A2"><span class="toc-number">4.3.</span> <span class="toc-text">从何处调入页面</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8A%96%E5%8A%A8%E9%A2%A0%E7%B0%B8%E7%8E%B0%E8%B1%A1"><span class="toc-number">4.4.</span> <span class="toc-text">抖动（颠簸）现象</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%85%E5%AD%98%E6%98%A0%E5%B0%84%E6%96%87%E4%BB%B6"><span class="toc-number">5.</span> <span class="toc-text">内存映射文件</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E4%B8%80/" rel="bookmark" title="操作系统实验一">操作系统实验一</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%B8%80/" rel="bookmark" title="操作系统复习一">操作系统复习一</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%BA%8C/" rel="bookmark" title="操作系统复习二">操作系统复习二</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E4%BA%8C/" rel="bookmark" title="操作系统实验二">操作系统实验二</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%B8%89/" rel="bookmark" title="操作系统复习三">操作系统复习三</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E5%9B%9B/" rel="bookmark" title="操作系统复习四">操作系统复习四</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-1-1&2/" rel="bookmark" title="操作系统408-1-1&2">操作系统408-1-1&2</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-1-3&4&5&6/" rel="bookmark" title="操作系统408-1-3&4&5&6">操作系统408-1-3&4&5&6</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-2-1/" rel="bookmark" title="操作系统408-2-1">操作系统408-2-1</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-2-2/" rel="bookmark" title="操作系统408-2-2">操作系统408-2-2</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-2-3/" rel="bookmark" title="操作系统408-2-3">操作系统408-2-3</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-2-4/" rel="bookmark" title="操作系统408-2-4">操作系统408-2-4</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-3-1/" rel="bookmark" title="操作系统408-3-1">操作系统408-3-1</a></li><li class="active"><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-3-2/" rel="bookmark" title="操作系统408-3-2">操作系统408-3-2</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-4-1/" rel="bookmark" title="操作系统408-4-1">操作系统408-4-1</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-4-3/" rel="bookmark" title="操作系统408-4-3">操作系统408-4-3</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-5-1/" rel="bookmark" title="操作系统408-5-1">操作系统408-5-1</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-5-2/" rel="bookmark" title="操作系统408-5-2">操作系统408-5-2</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-5-3/" rel="bookmark" title="操作系统408-5-3">操作系统408-5-3</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Whispering" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Whispering</p><div class="description" itemprop="description">Whispering's Blog</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">128</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">11</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">39</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL250bXlkYg==" title="https:&#x2F;&#x2F;github.com&#x2F;ntmydb"><i class="ic i-github"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/computer-network/%E8%AE%A1%E7%BD%91408-3-2/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/computer-science/computer-network/%E8%AE%A1%E7%BD%91408-4-1/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/mechine-learning/" title="分类于 机器学习">机器学习</a></div><span><a href="/mechine-learning/%E8%AE%A1%E7%AE%97%E6%9C%BA%E8%A7%86%E8%A7%89%E5%A4%8D%E4%B9%A0/" title="计算机视觉复习">计算机视觉复习</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/oi-template/" title="分类于 OI 模板">OI 模板</a></div><span><a href="/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%B9%B6%E6%9F%A5%E9%9B%86/" title="模板之并查集">模板之并查集</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/principles-of-computer-composition/" title="分类于 计算机组成原理">计算机组成原理</a></div><span><a href="/computer-science/principles-of-computer-composition/%E8%AE%A1%E7%BB%84408-4-1&2/" title="计算机组成原理408-4-1&amp;2">计算机组成原理408-4-1&2</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/database/" title="分类于 数据库">数据库</a></div><span><a href="/computer-science/database/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E5%85%AD/" title="数据库复习六">数据库复习六</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/principles-of-computer-composition/" title="分类于 计算机组成原理">计算机组成原理</a></div><span><a href="/computer-science/principles-of-computer-composition/%E8%AE%A1%E7%BB%84408-2-1/" title="计算机组成原理408-2-1">计算机组成原理408-2-1</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/computer-network/" title="分类于 计算机网络">计算机网络</a></div><span><a href="/computer-science/computer-network/%E8%AE%A1%E7%BD%91408-3-1/" title="计网408-3-1">计网408-3-1</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/data-structure/" title="分类于 数据结构">数据结构</a></div><span><a href="/computer-science/data-structure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84408-3-1&2/" title="数据结构408-3-1&amp;2">数据结构408-3-1&2</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/data-structure/" title="分类于 数据结构">数据结构</a></div><span><a href="/computer-science/data-structure/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84408-1-1/" title="数据结构408-1-1">数据结构408-1-1</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/operating-system/" title="分类于 操作系统">操作系统</a></div><span><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F408-4-1/" title="操作系统408-4-1">操作系统408-4-1</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/computer-network/" title="分类于 计算机网络">计算机网络</a></div><span><a href="/computer-science/computer-network/%E8%AE%A1%E7%BD%91408-1-2/" title="计网408-1-2">计网408-1-2</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-"></i> </span><span class="author" itemprop="copyrightHolder">Whispering @ Flüstern</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">690k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">10:27</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/operating-system/操作系统408-3-2/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,copy_tex:!0,katex:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>