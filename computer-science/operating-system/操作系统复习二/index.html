<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.jpg"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="Whispering's Blog" href="http://ntmydb/github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="Whispering's Blog" href="http://ntmydb/github.io/atom.xml"><link rel="alternate" type="application/json" title="Whispering's Blog" href="http://ntmydb/github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="操作系统"><link rel="canonical" href="http://ntmydb/github.io/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%BA%8C/"><title>操作系统复习二 - 操作系统 - 计算机科学 | Flüstern = Whispering's Blog = 无需过去，无关未来，只有现在</title><meta name="generator" content="Hexo 6.3.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">操作系统复习二</h1><div class="meta"><span class="item" title="创建时间：2023-10-30 09:39:35"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2023-10-30T09:39:35+08:00">2023-10-30</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>6.6k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>6 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">Flüstern</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://s2.loli.net/2023/10/27/CUbOHopMzly19Ei.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/10/25/dIAexoYT3m7aPMb.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/10/26/KpEaUDz9wFtq823.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/10/26/NC6gibTseq9KhOr.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/10/26/eM7puDvfB1AIK2r.jpg"></li><li class="item" data-background-image="https://s2.loli.net/2023/10/25/I5QdftlE6wGqPnj.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/" itemprop="item" rel="index" title="分类于 计算机科学"><span itemprop="name">计算机科学</span></a><meta itemprop="position" content="1"></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/computer-science/operating-system/" itemprop="item" rel="index" title="分类于 操作系统"><span itemprop="name">操作系统</span></a><meta itemprop="position" content="2"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="http://ntmydb/github.io/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%BA%8C/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="Whispering"><meta itemprop="description" content="无需过去，无关未来，只有现在, Whispering's Blog"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Whispering's Blog"></span><div class="body md" itemprop="articleBody"><p>操作系统复习二</p><p><span id="more"></span></p><h4 id="一-程序的顺序执行"><a class="anchor" href="#一-程序的顺序执行">#</a> 一、程序的顺序执行</h4><p>程序顺序执行时的特征</p><ul><li>顺序性：按照程序结构所指定的次序</li><li>封闭性：运行时候独占处理机资源，运行结果不受外界影响</li><li>可再现性：初始条件相同，结果相同</li></ul><h4 id="二-程序的并发执行及其特征"><a class="anchor" href="#二-程序的并发执行及其特征">#</a> 二、程序的并发执行及其特征</h4><p><span class="red">定义</span>：程序的并发执行是指上一组在逻辑上互相独立的程序或程序段<span class="blue">在执行时间上客观上相互重叠</span>，即一个程序或程序段的执行尚未结束，另一个程序 (段) 的执行已经开始的执行方式</p><ul><li>并发：在一段时间内的同时进行</li><li>并行：在同一物理时刻的同时</li></ul><p>并发执行时的特征：</p><ul><li><span class="blue">间断性 (相互制约性)</span>: 一个程序可能走到中途停下来，失去原有的时序关系</li><li><span class="blue">失去封闭性</span>：多个程序共享系统中的各种资源，因而这些资源的状态将由多个程序来改变，致使程序的运行失去了封闭性</li><li><span class="blue">不可再现性</span>：程序在并发执行时，由于失去了封闭性，导致失去其可再现性</li></ul><h4 id="三-进程"><a class="anchor" href="#三-进程">#</a> 三、进程</h4><p>1、进程的定义：进程是程序的一次执行</p><p>2、进程的特征：</p><ul><li><p>动态性</p><ul><li>进程对应程序的执行</li><li>进程是动态产生：创建 -&gt; 运行 -&gt; 消亡</li><li>进程在其生命周期内，在三种基本状态之间相互转换</li></ul></li><li><p>独立性：各进程的<span class="blue">地址空间相互独立</span>，除非采用进程间通信手段</p></li><li><p>并发性：指多个进程实体同存于内存中，且能在一段时间内同步运行</p></li><li><p>异步性：每个进程都以其相对独立的不可预知的速度向前推进</p></li><li><p>结构化：进程 = 代码段 + 数据段 + PCB</p></li></ul><p>※例题：</p><p class="quiz false">(1) 进程是一个程序在某个数据集上的一次执行，所以不同进程对应不同的程序。</p><blockquote><p>进程是程序在某数据集上的一次执行，但是不同进程可以对应同一程序，即多次运行同一代码段</p></blockquote><p class="quiz">(2) 程序顺序执行和并发执行有什么不同？</p><blockquote><p>顺序执行：一个独立功能的程序独占 CPU 直到得到最终结果的过程。其过程具有顺序性，封闭性，可再现性</p><p>并发执行：一组在逻辑上相互独立的程序或程序段在执行过程中，其执行时间在客观上相互重叠，即一个程序段的执行尚未结束，另一个程序段的执行已经开始的执行方式。其过程具有间断性，失去封闭性，不可再现性。</p></blockquote><p class="quiz true">(3) 用户程序必须在进程中运行。</p><blockquote><p>只有进程才可以运行，程序只是代码段，经过编译链接成 exe 文件后，exe 文件才是可以运行的进程</p></blockquote><p class="quiz false">(4) 两次打开 Word 字处理程序，编辑同一片文章，因为程序一样，数据一样，所以系统中运行的这两个 Word 字处理程序是同一进程。</p><blockquote><p>错误，进程的标识符是 PCB，这两个进程的代码段一样，但是控制进程的 PCB 不一样，因此这是两个不同的进程</p></blockquote><p>3、进程的组成：</p><p>进程 = 程序 + 数据 + 进程控制块 PCB</p><ul><li><span class="red">程序</span>是进程的不可缺少的组成部分</li><li><span class="red">数据</span>是进程处理的对象</li><li><span class="red">进程控制块</span>是进程的控制结构，包含了进程的<span class="blue">描述信息</span>，<span class="blue">控制信息</span>和<span class="blue">资源信息</span>以及<span class="blue">现场保护</span>，是进程的唯一标识，系统通过 PCB 来管理和控制进程</li></ul><p>通常的程序无法并发执行，为了使程序能够并发执行，应为其配置一进程控制模块，即 PCB</p><p>进程控制模块 PCB：</p><ul><li>进程控制模块是由 OS 维护的用来记录进程相关信息和管理进程而设置的一个专门的数据结构</li><li>PCB 结构的全部或部分常驻内存</li><li>PCB 随进程的创建而填写，随进程的撤销而释放，有生命周期</li><li>系统利用 PCB 来控制和管理进程，所以 PCB 是系统感知进程存在的唯一标识</li><li>进程与 PCB 是一一对应的</li></ul><p>进程与程序的区别：</p><ul><li>进程是动态的，程序是静态的</li><li>进程是暂时的，程序是永久的</li><li>进程与程序的组成不同：进程的组成包括程序，数据和进程控制块</li><li>进程与程序的对应关系：通过多次执行，一个程序对应多个进程；通过调用关系，一个进程可包括多个程序</li><li>进程具有并行特征，程序没有</li><li>进程是竞争计算机资源的基本单位</li></ul><p>4、进程的基本状态：</p><ul><li><p>就绪态：已分配到除 CPU 以外的所有必要的资源。多个排成一队称为就绪队列</p></li><li><p>执行态：指进程已获得处理机，其程序正在运行；在单处理机系统中，只能有一个进程处于执行状态；在多处理机系统中，则可能有多个进程处于执行状态</p></li><li><p>阻塞态：进程因发生某事件（如请求 I/O、申请缓冲空间等）而暂停执行时的状态。通常将处于阻塞状态的进程排成一个队列，称为阻塞队列</p></li><li><p>创建状态：OS 已完成为创建一新进程所必要的工作</p><ul><li>已构造了进程标识符</li><li>已创建了管理进程所需的表格</li></ul></li><li><p>终止状态：</p><ul><li>终止后进程移入该状态</li><li>不再有执行资格</li><li>表格和其他信息暂时保留</li></ul></li><li><p>挂起状态：把一个进程从内存转到外存</p><ul><li>挂起进程的目的：<ul><li>提高处理机效率：就绪进程表为空时，OS 将阻塞进程从内存中挂起到磁盘的挂起队列，再从该队列选择另一进程进入内存，或者接受一个新进程的请求</li><li>为了运行提供足够内存：资源紧张时，暂停某些进程</li><li>用于调试</li></ul></li></ul></li></ul><p>5、进程三种基本状态转换：</p><ul><li><p>就绪 -&gt; 运行：调度程序选择一个新的进程运行</p></li><li><p>运行 -&gt; 就绪：</p><ul><li>运行进程用完了时间片</li><li>运行进程被中断，因某一高优先级进程处于就绪状态</li></ul></li><li><p>运行 -&gt; 等待：当某一进程等待一事件发生时，如：</p><ul><li>请求系统服务</li><li>无新工作可做</li></ul></li><li><p>等待 -&gt; 就绪：当所等待的事件发生时</p></li></ul><p><img data-src="https://s2.loli.net/2023/11/10/Lw1gXFdPM69lZ5E.png" alt="进程状态转换图"></p><p>挂起进程模型状态及其转换:</p><ul><li><p>就绪状态 (Ready): 进程在内存且立即进入运行状态</p></li><li><p>阻塞状态 (Blocked): 进程在内存，并等待某事件的发生</p></li><li><p>就绪挂起状态 (Ready,suspend): 进程在外存，但只要进入内存，即可运行</p></li><li><p>阻塞挂起状态 (Blocked,suspend): 进程在外存并等待某时间的出现</p></li><li><p>挂起 (Suspend):</p><ul><li>阻塞到阻塞挂起：没有进程处于就绪状态或就绪进程要求更多内存资源时，会进行这种转换，以纳入新进程或运行就绪进程</li><li>就绪到就绪挂起：当有高优先级（系统认为会很快就绪的）进程和低优先级就绪进程，系统会选择挂起低优先级就绪进程</li><li>运行到就绪挂起：对抢先式分时系统，当有高优先级阻塞挂起进程因事件出现且进入就绪挂起时，系统更可能会把运行进程转到就绪挂起状态</li></ul></li><li><p>激活 (Activate):</p><ul><li>就绪挂起到就绪：没有就绪进程或挂起就绪进程优先级高于就绪进程时，就会进行这种转换</li><li>阻塞挂起到阻塞：当一个进程释放足够内存时，系统会把一个高优先级阻塞挂起（系统认为很快出现所等待的事件）进程转换为阻塞状态</li></ul></li></ul><p>※思考题：</p><p class="quiz">(1) 如果系统由 N 个进程，运行的进程最多有几个，最少几个；就绪进程最多几个最少几个；等待进程最多几个，最少几个？</p><blockquote><p>运行最多一个，最少 0 个；就绪最多 N-1 个，最少 0 个，等待最多 N 个，最少 0 个</p></blockquote><p>6、进程控制的功能：完成进程状态的转换</p><p>原语：由若干条指令构成的原子操作，作为一个整体而不可分割，要么全都完成，要么全都不做</p><p>进程创建原语：</p><ul><li>fork: 产生新进程，新进程的系统上下文来自现有进程，但上下文会有不同</li><li>spawn: 产生新进程，创建新进程并加载新程序</li><li>exec: 不产生新进程，加载新程序并覆盖自身</li></ul><p>进程撤销原语：Destroy</p><p>进程阻塞原语：Block</p><p>进程唤醒原语：Wakeup</p><p>进程挂起原语：Suspend</p><p>进程激活原语：Activate</p><h4 id="四-进程同步"><a class="anchor" href="#四-进程同步">#</a> 四、进程同步</h4><p>一组并发进程执行时存在两种相互制约关系：<span class="red">进程互斥</span>和<span class="red">进程同步</span></p><p><span class="red">临界资源</span>：在一段时间内只允许一个进程访问的资源</p><p>临界区的定义与进入：</p><ul><li>临界区：把每个进程中访问临界资源的那段代码称为临界区</li><li>进入区：在临界区前面增加一段用于进行临界资源检查的代码，称为进入区</li><li>退出去：将临界区正被访问的标志恢复为未被访问的标志</li><li>剩余区：其余部分</li></ul><p>使用临界区遵循的准则：</p><ul><li>空闲则入：其他进程均不处于临界区</li><li>忙则等待：已有进程处于其临界区</li><li>有限等待：等待进入临界区的进程不能 “死等”</li><li>让全等待：不能进入临界区的进程应释放 CPU，如转换到阻塞状态</li></ul><p>解决进程互斥进入临界区的方法：</p><ul><li><p>硬件同步机制</p><ul><li>关中断</li><li>利用 Test-and-Set 指令实现互斥</li><li>利用 Swap 指令实现进程互斥</li></ul></li><li><p>软件同步机制</p><ul><li><p>算法一：单标志</p><p>设立一个公共整形变量 turn，进入循环检查是否允许本进程进入：turn 为 i 时，进程 Pi 可以进入；在退出区修改进入进程标识：进程 Pi 退出时，改 turn 为进程 Pj 的标识 j；</p><p>缺点：强制轮流进入临界区，容易造成资源利用不充分</p></li><li><p>算法二：双标志、先检查</p><p>在进入区检查另一个进程是否在临界区，不在时修改本进程在临界区的标志；在退出区修改本进程在临界区的标志；</p><p>优点：不用交替进入，可连续使用</p><p>缺点：Pi 和 Pj 可能同时进入临界区</p></li><li><p>算法三：先修改再检查</p><p>缺点：Pi 和 Pj 可能都进入不了临界区</p></li></ul></li></ul><p>利用信号量机制实现进程互斥：</p><p>信号量代表可用资源实体的数量，整形信号量除了初始化外，仅能通过两个标准操作 wait (S) 和 signal (S) 来访问，这两个操作被称为 P、V 操作：</p><ul><li><p>P(S):</p><ul><li>S=S-1;</li><li>若 S$\ge$0, 则调用 P (S) 的进程继续运行</li><li>若 S&lt;0, 则调用 P (S) 的进程被阻塞，并把它插入到等待信号量 S 的阻塞队列中</li></ul></li><li><p>V(S):</p><ul><li>S=S+1</li><li>若 S&gt;0, 则调用 V (S) 的进程继续运行</li><li>若 S$\le$0, 从等待信号量 S 的阻塞队列中唤醒头一个进程，然后调用 V (S) 的进程继续运行</li></ul></li><li><p>注意点：</p><ul><li>wait (S) 和 signal (S) 必须成对出现</li><li>缺少 wait (S) 不能保证对临界资源的互斥访问</li><li>缺少 signal (S) 将使临界资源永远不被释放，从而使等待该进程资源而阻塞的进程不再被唤醒</li><li>P、V 原语不能次序错误、重复或遗漏</li></ul></li></ul><p>※例题：</p><p class="quiz">1、假设有一个成品仓库，总共能存放 8 台成品，生产者进程生产产品放入仓库，消费者进程从仓库中取出成品消费。为了防止积压，仓库满的时候就停止生产。由于仓库搬运设备只有一套，故成品的存放和取出只能分别执行，使用 P、V 操作来实现该方案。</p><blockquote><p>信号量 s1=8,s2=0,mutex=1</p><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">P</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 看看仓库能不能装下成品，能产生 s1--，可以把 s1 看做仓库剩余空间</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    producing<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 搬运设备的互斥</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    moving<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token function">V</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 通知消费者可以拿东西</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token function">P</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 有没有东西拿</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 拿东西</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    moving<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token function">V</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">// 通知生产者拿了一个东西</span></pre></td></tr><tr><td data-num="17"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></blockquote><p class="quiz">2、生产围棋的工人不小心把相等数量的黑子和白子混合装在一个盒子里，现在要用自动分拣系统把黑子和白子分开，改系统由两个并发执行的进程 PA 和 PB 组成，系统功能如下：PA 专拣黑子，PB 专拣白子；每个进程每次只拣一个子，当一个进程拣子时，不允许另一个进程去拣子；当一个进程拣了子 (黑子或白子) 后，必须让另一个进程去拣一个 (白子或黑子)。请回答：写出用 PV 操作时应定义的信号量和初值；根据定义的信号量，写出用 PV 操作管理两个并发进程的程序。</p><blockquote><p>信号量 s1=1，s2=0</p><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">P1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 捡白子</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        picking white<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token function">P2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 捡黑子</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="12"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>s2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        picking black<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>s1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></blockquote><p class="quiz">3、一条小河上有一座独木桥，规定每次只允许一个人过桥，现在河东河西都有人要过桥，如果把每个过桥者看作一个进程，为保证安全，请用 PV 操作实现正确答案。(多个相同的进程可以用下标标示)</p><blockquote><p>信号量 S=1，表示桥是否空闲</p><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">PEW</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 从东到西</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token function">P</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    moving from east to west<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token function">V</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token function">PWE</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token comment">// 从西到东</span></pre></td></tr><tr><td data-num="8"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token function">P</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    moving from west to east<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token function">V</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></blockquote><p class="quiz">4、用 P、V 操作和信号量解决进程之间的同步互斥问题。有 n 个进程将字符读入 到一个容量为 80 的缓冲区中，（n&gt;1）当缓冲区读入后，由另一个进程 Pb 负责一次取走这 80 个字符。这种过程循环往复，请写出 n 个读入进程（p1，p2，…pn）和 Pb 的动作序列。（可用文字或表达式来描述动作序列）（设 pi 每次读一个字符到缓冲区中。</p><blockquote><p>信号量 empty=80,full=0,mutex=1</p><p>共享变量 buffer [80],cnt=0</p><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre>Producer<span class="token operator">-</span><span class="token function">i</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">//i=1,2,...,n</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        buffer<span class="token punctuation">[</span>cnt<span class="token operator">++</span><span class="token punctuation">]</span><span class="token operator">=</span>newchar<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token keyword">if</span><span class="token punctuation">(</span>count<span class="token operator">==</span><span class="token number">80</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="9"></td><td><pre>            <span class="token function">V</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="11"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">80</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="20"></td><td><pre>            <span class="token function">read</span><span class="token punctuation">(</span>buffer<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>       	cnt<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">80</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="23"></td><td><pre>            <span class="token function">V</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></blockquote><p class="quiz">5、如图所示，系统中有三个进程 GET、PRO 和 PUT，共用两个缓冲区 BUF1 和 BUF2。假设 BUF1 中最多可放 11 个信息，现以放入了两个信息；BUF2 最多可放 5 个信息。GET 进程负责不断地将输入信息送入 BUF1 中，PRO 进程负责从 BUF1 中取出信息进行处理，并将处理结果送到 BUF2 中，PUT 进程负责从 BUF2 中读取结果并输出。试用 P-V 操作正确实现 GET、PRO、PUT 的同步与互斥。</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mover><mo stretchy="true">→</mo><mpadded width="+0.6em" lspace="0.3em"><mrow><mi>G</mi><mi>E</mi><mi>T</mi></mrow></mpadded></mover><mi>B</mi><mi>U</mi><mi>F</mi><mn>1</mn><mover><mo stretchy="true">→</mo><mpadded width="+0.6em" lspace="0.3em"><mrow><mi>P</mi><mi>R</mi><mi>O</mi></mrow></mpadded></mover><mi>B</mi><mi>U</mi><mi>F</mi><mn>2</mn><mover><mo stretchy="true">→</mo><mpadded width="+0.6em" lspace="0.3em"><mrow><mi>P</mi><mi>U</mi><mi>T</mi></mrow></mpadded></mover></mrow><annotation encoding="application/x-tex">\xrightarrow{GET}BUF1\xrightarrow{PRO}BUF2\xrightarrow{PUT}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.1113309999999998em;vertical-align:-.010999999999999899em"></span><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.100331em"><span style="top:-3.322em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord mathnormal mtight">G</span><span class="mord mathnormal mtight" style="margin-right:.05764em">E</span><span class="mord mathnormal mtight" style="margin-right:.13889em">T</span></span></span></span><span class="svg-align" style="top:-2.689em"><span class="pstrut" style="height:2.7em"></span><span class="hide-tail" style="height:.522em;min-width:1.469em"><svg width="400em" height="0.522em" viewBox="0 0 400000 522" preserveAspectRatio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.010999999999999899em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.1113309999999998em;vertical-align:-.010999999999999899em"></span><span class="mord mathnormal" style="margin-right:.05017em">B</span><span class="mord mathnormal" style="margin-right:.10903em">U</span><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="mord">1</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.100331em"><span style="top:-3.322em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">P</span><span class="mord mathnormal mtight" style="margin-right:.00773em">R</span><span class="mord mathnormal mtight" style="margin-right:.02778em">O</span></span></span></span><span class="svg-align" style="top:-2.689em"><span class="pstrut" style="height:2.7em"></span><span class="hide-tail" style="height:.522em;min-width:1.469em"><svg width="400em" height="0.522em" viewBox="0 0 400000 522" preserveAspectRatio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.010999999999999899em"><span></span></span></span></span></span><span class="mspace" style="margin-right:.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1.1113309999999998em;vertical-align:-.010999999999999899em"></span><span class="mord mathnormal" style="margin-right:.05017em">B</span><span class="mord mathnormal" style="margin-right:.10903em">U</span><span class="mord mathnormal" style="margin-right:.13889em">F</span><span class="mord">2</span><span class="mspace" style="margin-right:.2777777777777778em"></span><span class="mrel x-arrow"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.100331em"><span style="top:-3.322em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight x-arrow-pad"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:.13889em">P</span><span class="mord mathnormal mtight" style="margin-right:.10903em">U</span><span class="mord mathnormal mtight" style="margin-right:.13889em">T</span></span></span></span><span class="svg-align" style="top:-2.689em"><span class="pstrut" style="height:2.7em"></span><span class="hide-tail" style="height:.522em;min-width:1.469em"><svg width="400em" height="0.522em" viewBox="0 0 400000 522" preserveAspectRatio="xMaxYMin slice"><path d="M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z"/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:.010999999999999899em"><span></span></span></span></span></span></span></span></span></span></p><blockquote><p>信号量 empty1=9,full1=2,empty2=5,full2=0,mutex1=1,mutex2=1</p><figure class="highlight c"><figcaption data-lang="c"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token function">GET</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="3"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="5"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>emtpy1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="6"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>mutex1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="7"></td><td><pre>        send info into BUF1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="8"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>mutex1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="9"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>full1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token function">PRO</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>full1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="17"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>mutex1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="18"></td><td><pre>        get info from BUF1<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="19"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>mutex1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="20"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>empty1<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>mutex2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="22"></td><td><pre>        send info into BUF2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>mutex2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="24"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>full2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token function">PUT</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="30"></td><td><pre>    <span class="token punctuation">&#123;</span></pre></td></tr><tr><td data-num="31"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>full2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="32"></td><td><pre>        <span class="token function">P</span><span class="token punctuation">(</span>mutex2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="33"></td><td><pre>        get info from BUF2<span class="token punctuation">;</span></pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>mutex2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="35"></td><td><pre>        <span class="token function">V</span><span class="token punctuation">(</span>empty2<span class="token punctuation">)</span><span class="token punctuation">;</span></pre></td></tr><tr><td data-num="36"></td><td><pre>    <span class="token punctuation">&#125;</span></pre></td></tr><tr><td data-num="37"></td><td><pre><span class="token punctuation">&#125;</span></pre></td></tr></table></figure></blockquote><h4 id="五-管程"><a class="anchor" href="#五-管程">#</a> 五、管程</h4><p>用信号量可以实现进程间的同步，但由于信号量的控制分布在整个程序中，其正确性分析很困难</p><p>管程是管理进程间同步的机制，它保证进程互斥地访问共享变量，并方便地阻塞和唤醒进程</p><p>信号量同步的缺点：</p><ul><li>同步操作分散</li><li>易读性差</li><li>不利于修改与维护</li><li>正确性难以保证</li></ul><p>管程的基本思想：将信号量和操作原语封装在一个对象内部</p><p>管程定义：管程是关于共享资源的数据结构及一组针对该资源的操作过程所构成的软件模块</p><p>管程的主要特性：</p><ul><li>模块化</li><li>抽象数据类型</li><li>信息封装</li></ul><p>管程的实现要素：</p><ul><li>管程中的共享变量在管程外部是不可见的，外部只能调用管程提供的接口间接访问管程中共享变量</li><li>为保证管程共享变量的数据完整性，规定管程互斥进入</li><li>管程中设有进程等待队列以及相应的等待及唤醒操作</li></ul><p>管程中多个进程的进入：</p><p>当一个进入管程的进程执行等待操作时，它应该释放管程的互斥权（通俗上说就是 V (mutex)）；</p><p>当一个进入管程的进程执行唤醒操作时（如 P 唤醒 Q），管程中存在两个同时处于活动状态的进程，处理方法如下：</p><ul><li>P 等待，Q 继续，直到 Q 等待或退出</li><li>Q 等待，P 继续，直到 P 等待或退出</li><li>规定唤醒为管程中最后一个可执行操作</li></ul><p>条件变量形式：X.signal 和 X.wait</p><p>进程与管程的异同点：</p><ul><li>设置进程和管程的目的不同：<ul><li>进程是为了解决程序并发运行问题而设立</li><li>管程是为了解决进程的公共变量、共享资源的互斥使用问题而设置</li></ul></li><li>系统管理数据结构：<ul><li>进程：PCB</li><li>管程：等待队列</li></ul></li><li>管程被进程调用</li><li>管程是操作系统的固有成分，无法创建和撤销</li></ul><h4 id="六-进程通信优先级较低了解即可"><a class="anchor" href="#六-进程通信优先级较低了解即可">#</a> 六、进程通信（优先级较低，了解即可）</h4><p>1、进程通信：一个进程直接或通过某一机构发一条消息给另一进程，且据此来控制其他进程，我们将进程之间的这种信息交流称为进程通信</p><p>低级通信机制：PV 操作，传送的是控制信息</p><p>高级通信机制：能传送任意数量数据，可归结为四大类</p><ul><li>共享储存系统<ul><li>原理：在内存中开辟一个共享区域，可以向其中写数据与读数据</li></ul></li><li>消息传递系统<ul><li>一般是通过空闲缓冲区来交互信息</li></ul></li><li>管道通信<ul><li>socket</li></ul></li><li>客户端 - 服务器系统</li></ul><p>2、线程：</p><p>进程：资源分配单位</p><p>线程：CPU 调度单位，和进程一样有三种基本状态，简单来说，线程就是迷你版的进程</p><p>线程控制模块：TCB</p><p>进程和线程的关系：</p><ul><li>线程是进程的一个组成部分。</li><li>进程的多线程都在进程的地址空间活动</li><li>资源是分配给进程的，不是分配给线程的，线程在执行过程中需要资源时，系统从进程的资源配额中扣除并分配给该线程</li><li>处理机调度的基本单位是线程</li><li>线程在执行过程中，需要同步</li></ul><div class="tags"><a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag"><i class="ic i-tag"></i> 操作系统</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2023-11-11 11:29:49" itemprop="dateModified" datetime="2023-11-11T11:29:49+08:00">2023-11-11</time> </span><span id="computer-science/operating-system/操作系统复习二/" class="item leancloud_visitors" data-flag-title="操作系统复习二" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>Whispering <i class="ic i-at"><em>@</em></i>Whispering's Blog</li><li class="link"><strong>本文链接：</strong> <a href="http://ntmydb/github.io/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%BA%8C/" title="操作系统复习二">http://ntmydb/github.io/computer-science/operating-system/操作系统复习二/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%B8%80/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;10&#x2F;29&#x2F;fuqhvyjkwsartcP.jpg" title="操作系统复习一"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 操作系统</span><h3>操作系统复习一</h3></a></div><div class="item right"><a href="/mechine-learning/%E6%A8%A1%E5%BC%8F%E8%AF%86%E5%88%AB%E5%A4%8D%E4%B9%A0%E4%B8%80/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;s2.loli.net&#x2F;2023&#x2F;10&#x2F;29&#x2F;FRzT1nWPXB53vdY.jpg" title="模式识别复习一"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> 机器学习</span><h3>模式识别复习一</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80-%E7%A8%8B%E5%BA%8F%E7%9A%84%E9%A1%BA%E5%BA%8F%E6%89%A7%E8%A1%8C"><span class="toc-number">1.</span> <span class="toc-text">一、程序的顺序执行</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C-%E7%A8%8B%E5%BA%8F%E7%9A%84%E5%B9%B6%E5%8F%91%E6%89%A7%E8%A1%8C%E5%8F%8A%E5%85%B6%E7%89%B9%E5%BE%81"><span class="toc-number">2.</span> <span class="toc-text">二、程序的并发执行及其特征</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89-%E8%BF%9B%E7%A8%8B"><span class="toc-number">3.</span> <span class="toc-text">三、进程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B-%E8%BF%9B%E7%A8%8B%E5%90%8C%E6%AD%A5"><span class="toc-number">4.</span> <span class="toc-text">四、进程同步</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%94-%E7%AE%A1%E7%A8%8B"><span class="toc-number">5.</span> <span class="toc-text">五、管程</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%AD-%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E4%BC%98%E5%85%88%E7%BA%A7%E8%BE%83%E4%BD%8E%E4%BA%86%E8%A7%A3%E5%8D%B3%E5%8F%AF"><span class="toc-number">6.</span> <span class="toc-text">六、进程通信（优先级较低，了解即可）</span></a></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E4%B8%80/" rel="bookmark" title="操作系统实验一">操作系统实验一</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%B8%80/" rel="bookmark" title="操作系统复习一">操作系统复习一</a></li><li class="active"><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%BA%8C/" rel="bookmark" title="操作系统复习二">操作系统复习二</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E4%BA%8C/" rel="bookmark" title="操作系统实验二">操作系统实验二</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%B8%89/" rel="bookmark" title="操作系统复习三">操作系统复习三</a></li><li><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E5%9B%9B/" rel="bookmark" title="操作系统复习四">操作系统复习四</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="Whispering" data-src="/images/avatar.jpg"><p class="name" itemprop="name">Whispering</p><div class="description" itemprop="description">Whispering's Blog</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">63</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">8</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">33</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL250bXlkYg==" title="https:&#x2F;&#x2F;github.com&#x2F;ntmydb"><i class="ic i-github"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item"><a href="/about/" rel="section"><i class="ic i-user"></i>关于</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>友链</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0%E4%B8%80/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/mechine-learning/%E6%A8%A1%E5%BC%8F%E8%AF%86%E5%88%AB%E5%A4%8D%E4%B9%A0%E4%B8%80/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/database/" title="分类于 数据库">数据库</a></div><span><a href="/computer-science/database/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%A7%E4%BD%9C%E4%B8%9A/" title="数据库大作业">数据库大作业</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%BD%A2%E5%BC%8F%E8%AF%AD%E8%A8%80/" title="分类于 形式语言">形式语言</a></div><span><a href="/%E5%BD%A2%E5%BC%8F%E8%AF%AD%E8%A8%80%E5%A4%8D%E4%B9%A0%E4%B8%80/" title="形式语言复习一">形式语言复习一</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/english-notes/" title="分类于 英语笔记">英语笔记</a></div><span><a href="/english-notes/%E8%8B%B1%E8%AF%AD%E7%AC%94%E8%AE%B0%E5%8D%81%E4%BA%8C/" title="英语笔记十二">英语笔记十二</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/computer-science/" title="分类于 计算机科学">计算机科学</a> <i class="ic i-angle-right"></i> <a href="/categories/computer-science/database/" title="分类于 数据库">数据库</a></div><span><a href="/computer-science/database/%E6%95%B0%E6%8D%AE%E5%BA%93%E5%A4%8D%E4%B9%A0%E4%B8%83/" title="数据库复习七">数据库复习七</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/oi-template/" title="分类于 OI 模板">OI 模板</a></div><span><a href="/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%90%8E%E7%BC%80%E6%95%B0%E7%BB%84/" title="模板之后缀数组">模板之后缀数组</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/mechine-learning/" title="分类于 机器学习">机器学习</a></div><span><a href="/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E7%AE%80%E5%8D%95%E8%AE%A1%E7%AE%97%E5%99%A8%E5%AE%9E%E7%8E%B0/" title="机器学习之简单计算器实现">机器学习之简单计算器实现</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/english-notes/" title="分类于 英语笔记">英语笔记</a></div><span><a href="/english-notes/%E8%8B%B1%E8%AF%AD%E7%AC%94%E8%AE%B0%E5%8D%81/" title="英语笔记十">英语笔记十</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/oi-template/" title="分类于 OI 模板">OI 模板</a></div><span><a href="/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E7%BC%A9%E7%82%B9%E3%80%81%E5%89%B2%E7%82%B9%E3%80%81%E6%A1%A5/" title="模板之缩点、割点、桥">模板之缩点、割点、桥</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/english-notes/" title="分类于 英语笔记">英语笔记</a></div><span><a href="/english-notes/%E8%8B%B1%E8%AF%AD%E7%AC%94%E8%AE%B0%E5%85%AB/" title="英语笔记八">英语笔记八</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%BD%A2%E5%BC%8F%E8%AF%AD%E8%A8%80/" title="分类于 形式语言">形式语言</a></div><span><a href="/%E5%BD%A2%E5%BC%8F%E8%AF%AD%E8%A8%80%E5%A4%8D%E4%B9%A0%E4%B8%89/" title="形式语言复习三">形式语言复习三</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2024</span> <span class="with-love"><i class="ic i-"></i> </span><span class="author" itemprop="copyrightHolder">Whispering @ Flüstern</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">335k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">5:05</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"computer-science/operating-system/操作系统复习二/",favicon:{show:"（●´3｀●）やれやれだぜ",hide:"(´Д｀)大変だ！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,copy_tex:!0,katex:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',quiz:{choice:"单选题",multiple:"多选题",true_false:"判断题",essay:"问答题",gap_fill:"填空题",mistake:"错题备注"},ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>