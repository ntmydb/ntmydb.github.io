{
    "version": "https://jsonfeed.org/version/1",
    "title": "Whispering's Blog",
    "subtitle": "无需过去，无关未来，只有现在",
    "icon": "http://ntmydb/github.io/images/favicon.ico",
    "description": "Whispering's Blog",
    "home_page_url": "http://ntmydb/github.io",
    "items": [
        {
            "id": "http://ntmydb/github.io/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E4%B8%80/",
            "url": "http://ntmydb/github.io/computer-science/operating-system/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%AE%9E%E9%AA%8C%E4%B8%80/",
            "title": "操作系统实验一",
            "date_published": "2023-10-28T11:39:00.000Z",
            "content_html": "<h2 id=\"操作系统实验一\"><a class=\"anchor\" href=\"#操作系统实验一\">#</a> 操作系统实验一</h2>\n<p><span id=\"more\"></span></p>\n<h3 id=\"前情提要\"><a class=\"anchor\" href=\"#前情提要\">#</a> 前情提要：</h3>\n<p>其实这篇文章并不会完全告诉你操作系统实验一的全部答案，只会记录一些该实验的坑爹点</p>\n<p>如果你的实验一开头和下面这段文字一样，那么，强烈建议你看看这篇文章，最重要的一点，不要一开始点击 1-1.cpp 的编译运行，如果你点了。。。那我会为你默哀一秒钟，然后你可以重启电脑了</p>\n<p>好了，说了这么多废话，先看看实验一的开头：</p>\n<p><strong>1. 背景知识</strong></p>\n<p>Windows  所创建的每个进程都从调用 CreateProcess () API 函数开始，该函数的任务是在对象管理器子系统内初始化进程对象。每一进程都以调用 ExitProcess () 或 TerminateProcess () API 函数终止。通常应用程序的框架负责调用 ExitProcess () 函数，对于 C++ 运行库来说，这一调用发生在应用程序的 main () 函数返回之后。</p>\n<p><strong>1. 创建进程</strong></p>\n<p>CreateProcess () 调用的核心参数是可执行文件运行时的文件名及其命令行。表 1-1 详细地列出了每个参数的类型和名称。</p>\n<p><strong>表 1-1 实验记录表</strong></p>\n<table>\n<thead>\n<tr>\n<th>参数名称</th>\n<th>使用目的</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>LPCTSTR lpApplivationNAME</td>\n<td>全部或部分地指明包括可执行代码的 EXE 文件的文件名</td>\n</tr>\n<tr>\n<td>LPCTSTR lpCommandLine</td>\n<td>向可执行文件发送的参数</td>\n</tr>\n<tr>\n<td>LPSECURIITY_ATTRIBUTESlpProcessAttributes</td>\n<td>返回进程句柄的安全属性，主要指明这一句柄是否应该由其他子进程所继承。</td>\n</tr>\n<tr>\n<td>LPSECURIITY_ATTRIBUTESlpThreadAttributes</td>\n<td>返回进程的主线程的句柄的安全属性</td>\n</tr>\n<tr>\n<td>BOOL bInheritHandle</td>\n<td>一种标志，告诉系统允许新进程继承创建者进程的句柄</td>\n</tr>\n<tr>\n<td>DWORD dwCreationFlage</td>\n<td>特殊的创建标志（如 CREATE_SUSPENDED）的位标记</td>\n</tr>\n<tr>\n<td>LPVOID lpEnvironment</td>\n<td>向新进程发送的一套环境变量；如为 null 值则发送调用者环境</td>\n</tr>\n<tr>\n<td>LPCTSTR lpCurrentDirectory</td>\n<td>新进程的启动目录</td>\n</tr>\n<tr>\n<td>STARTUPINFO lpStartupInfo</td>\n<td>STARTUPINFO 结构，包括新进程的输入和输出配置的详情</td>\n</tr>\n<tr>\n<td>LPPROCESS_INFORMATION lpProcessInformation</td>\n<td>调用的结果块；发送新应用程序的进程和主线程的句柄和 ID</td>\n</tr>\n</tbody>\n</table>\n<p>OK，假如到这里都是一模一样的，那么接着往下看吧，如果没有，慢走不送</p>\n<h3 id=\"一-执行如下指令c-cl-1-1cpp给出运行结果并进行分析\"><a class=\"anchor\" href=\"#一-执行如下指令c-cl-1-1cpp给出运行结果并进行分析\">#</a> 一、执行如下指令<span class=\"kbd\"> C:\\ CL 1-1.cpp</span>，给出运行结果，并进行分析</h3>\n<p>看起来是不是很简单，只要在命令行里输入上面的句子就结束了，那我只能说你太天真了。</p>\n<p><span class=\"kbd\">cl</span> 指令是<span class=\"kbd\"> VS</span>（全名<span class=\"kbd\"> Visual Studio</span>）才包含的，也就是如果你的电脑上没有下<span class=\"kbd\"> VS</span>，那么这个问题你没法做</p>\n<h4 id=\"1-第一步下载vs找到clexe所在文件夹\"><a class=\"anchor\" href=\"#1-第一步下载vs找到clexe所在文件夹\">#</a> 1、第一步，下载<span class=\"kbd\"> VS</span>，找到<span class=\"kbd\"> cl.exe</span> 所在文件夹</h4>\n<p>在安装 VS 时，你需要选择安装有关<span class=\"kbd\"> C/C++</span> 开发有关的库才可以</p>\n<p>笔者本人的<span class=\"kbd\"> cl.exe</span> 在<span class=\"kbd\"> F:\\dev C\\VS\\VC\\Tools\\MSVC\\14.37.32822\\bin\\Hostx64\\x64</span></p>\n<p>将这个目录添加到你系统变量的<span class=\"kbd\"> Path</span> 中，然后你打开<span class=\"kbd\"> cmd</span> 可以尝试一下输入以下命令：</p>\n<figure class=\"highlight powershell\"><figcaption data-lang=\"PowerShell\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>C:\\Users\\asus>cl</pre></td></tr></table></figure><p>如果出现了以下界面：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/28/QObGPgHhlqmpXn6.png\" alt=\"运行结果\" /></p>\n<p>那么证明你的<span class=\"kbd\"> cl.exe</span> 已经放入系统路径中了</p>\n<h4 id=\"2-第二步将你的系统中的一些库添加到系统变量中\"><a class=\"anchor\" href=\"#2-第二步将你的系统中的一些库添加到系统变量中\">#</a> 2、第二步，将你的系统中的一些库添加到系统变量中</h4>\n<p>记住，是添加到系统变量中，而不是系统变量的<span class=\"kbd\"> Path</span> 中</p>\n<p>新建变量<span class=\"kbd\"> Lib</span>:</p>\n<p>添加路径包含：<span class=\"kbd\">C:\\Program Files (x86)\\Windows Kits\\10\\Lib\\10.0.22621.0\\ucrt\\x64</span></p>\n<p>​\t\t\t\t\t\t   <span class=\"kbd\">C:\\Program Files (x86)\\Windows Kits\\10\\Lib\\10.0.22621.0\\ucrt_enclave\\x64</span></p>\n<p>​\t\t\t\t\t\t   <span class=\"kbd\">C:\\Program Files (x86)\\Windows Kits\\10\\Lib\\10.0.22621.0\\um\\x64</span></p>\n<p>​\t\t\t\t\t\t   <span class=\"kbd\">F:\\dev C\\VS\\VC\\Tools\\MSVC\\14.37.32822\\lib\\x64</span></p>\n<p>新建变量<span class=\"kbd\"> Include</span>:</p>\n<p>添加路径包含：<span class=\"kbd\">F:\\dev C\\VS\\VC\\Tools\\MSVC\\14.37.32822\\include</span></p>\n<p>​\t\t\t\t\t\t   <span class=\"kbd\">C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.22621.0\\cppwinrt</span></p>\n<p>​\t\t\t\t\t\t   <span class=\"kbd\">C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.22621.0\\shared</span></p>\n<p>​\t\t\t\t\t\t   <span class=\"kbd\">C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.22621.0\\ucrt</span></p>\n<p>​\t\t\t\t\t\t   <span class=\"kbd\">C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.22621.0\\um</span></p>\n<p>​\t\t\t\t\t\t   <span class=\"kbd\">C:\\Program Files (x86)\\Windows Kits\\10\\Include\\10.0.22621.0\\winrt</span></p>\n<h4 id=\"3-第三步如果你再次运行cl-1-1cpp后出现了问题\"><a class=\"anchor\" href=\"#3-第三步如果你再次运行cl-1-1cpp后出现了问题\">#</a> 3、第三步，如果你再次运行<span class=\"kbd\"> CL 1-1.cpp</span> 后出现了问题</h4>\n<p>问题描述大概就是找不到<span class=\"kbd\"> mspdbcore.dll</span> 文件，那么按照一下步骤解决</p>\n<p>进入文件夹<span class=\"kbd\"> F:\\dev C\\VS\\Common7\\IDE</span></p>\n<p>将四个文件复制<span class=\"kbd\"> msobj140.dll</span>，<span class=\"kbd\">mspdb140.dll</span>，<span class=\"kbd\">mspdbcore.dll</span>，<span class=\"kbd\">mspdbsrv.exe</span></p>\n<p>到文件夹<span class=\"kbd\"> F:\\dev C\\VS\\VC\\Tools\\MSVC\\14.37.32822\\bin\\Hostx64\\x64</span> 中，选择覆盖文件</p>\n<h4 id=\"4-第四步正常运行不出意外的话可以得到以下结果\"><a class=\"anchor\" href=\"#4-第四步正常运行不出意外的话可以得到以下结果\">#</a> 4、第四步，正常运行，不出意外的话可以得到以下结果：</h4>\n<p><img data-src=\"https://s2.loli.net/2023/10/29/ewyGSqjIfA4Ja9L.png\" alt=\"运行结果\" /></p>\n<p>到这里第一问才完整解决，那么剩下的问题我不会记录答案，下面会记录<span class=\"kbd\"> 1-1.cpp</span> 的完整代码，如果你的和下面不一样，说明你的代码可能有<span class=\"label danger\"> bug</span>：</p>\n<pre><code class=\"language-C++\">// proccreate项目\n#include &lt;windows.h&gt;\n#include &lt;iostream&gt;\n#include &lt;stdio.h&gt;\n\n// 创建传递过来的进程的克隆过程并赋于其ID值\nvoid StartClone(int nCloneID)\n&#123;\n    // 提取用于当前可执行文件的文件名\n    TCHAR szFilename[MAX_PATH] ;\n    :: GetModuleFileName(NULL, szFilename, MAX_PATH) ;\n\n    // 格式化用于子进程的命令行并通知其EXE文件名和克隆ID\n    TCHAR szCmdLine[MAX_PATH];\n\t:: sprintf(szCmdLine,&quot;\\&quot;%s\\&quot; %d&quot;,szFilename,nCloneID);\n\n\t// 用于子进程的STARTUPINFO结构\n    STARTUPINFO si;\n    :: ZeroMemory(reinterpret_cast &lt;void*&gt; (&amp;si) , sizeof(si) ) ;\n    si.cb = sizeof(si) ;\t\t\t\t// 必须是本结构的大小\n\n    // 返回的用于子进程的进程信息\n    PROCESS_INFORMATION pi;\n\n    // 利用同样的可执行文件和命令行创建进程，并赋于其子进程的性质\n    BOOL bCreateOK=::CreateProcess(\n        szFilename,\t\t\t\t\t// 产生这个EXE的应用程序的名称\n        szCmdLine,\t\t\t\t\t// 告诉其行为像一个子进程的标志\n        NULL,\t\t\t\t\t\t// 缺省的进程安全性\n        NULL,\t\t\t\t\t\t// 缺省的线程安全性\n        FALSE,\t\t\t\t\t\t// 不继承句柄\n        CREATE_NEW_CONSOLE,\t\t\t// 使用新的控制台\n        NULL,\t\t\t\t\t\t// 新的环境\n        NULL,\t\t\t\t\t\t// 当前目录\n        &amp;si,\t\t\t\t\t\t// 启动信息\n        &amp;pi) ;\t\t\t\t\t\t// 返回的进程信息\n\n    // 对子进程释放引用\n    if (bCreateOK)\n    &#123;\n        :: CloseHandle(pi.hProcess) ;\n        :: CloseHandle(pi.hThread) ;\n    &#125;\n    return;\n&#125;\n\nint main(int argc, char* argv[] )\n&#123;\n    // 确定进程在列表中的位置\n    int nClone(0) ; // 等价于 int nClone = 0 \n    if (argc &gt; 1)\n    &#123;\n        // 从第二个参数中提取克隆ID\n        :: sscanf(argv[1] , &quot;%d&quot; , &amp;nClone) ;\n    &#125;\n\n    // 显示进程位置\n    std :: cout &lt;&lt; &quot;Process ID:&quot; &lt;&lt; :: GetCurrentProcessId()\n                &lt;&lt; &quot;, Clone ID:&quot; &lt;&lt; nClone\n                &lt;&lt; std :: endl;\n\n    // 检查是否有创建子进程的需要\n    const int c_nCloneMax=25;\n    if (nClone &lt; c_nCloneMax)\n    &#123;\t\n        // 发送新进程的命令行和克隆号\n        StartClone(++nClone) ;\n    &#125;\n    // 在终止之前暂停一下 (l/2秒)\n    :: Sleep(500) ;\n\n    return 0;\n&#125;\n</code></pre>\n",
            "tags": [
                "计算机科学",
                "操作系统",
                "操作系统"
            ]
        },
        {
            "id": "http://ntmydb/github.io/english-notes/2023-05-21-%E8%8B%B1%E8%AF%AD%E7%AC%94%E8%AE%B0%E4%B8%80/",
            "url": "http://ntmydb/github.io/english-notes/2023-05-21-%E8%8B%B1%E8%AF%AD%E7%AC%94%E8%AE%B0%E4%B8%80/",
            "title": "英语笔记一",
            "date_published": "2023-10-28T07:10:53.000Z",
            "content_html": "<h3 id=\"sports-crickets-return-to-asian-games-a-bridge-event\"><a class=\"anchor\" href=\"#sports-crickets-return-to-asian-games-a-bridge-event\">#</a> Sports: Cricket's return to Asian Games a 'bridge' event</h3>\n<p><span id=\"more\"></span></p>\n<div class=\"tab\" data-id=\"id1\" data-title=\"文章内容\">\n<p>China's tangible commitment to world peace, unity and prosperity were noted by global leaders as they endorsed Beijing's latest diplomatic efforts led by President Xi Jinping amid the ongoing Hangzhou Asian Games.</p>\n<p>The 19th Asian Games, which opened on Saturday night, are the largest and highest-level comprehensive international sports event organized by China since the conclusion of the 20th National Congress of the Communist Party of China in 2022.</p>\n<p>As more than 12,000 athletes from 45 Asian countries and regions have gathered in scenic Hangzhou, the capital of East China's Zhejiang province, so have a number of world leaders and representatives of international organizations.</p>\n<p>At the welcoming banquet held on Saturday for the Games' opening, President Xi noted that the day was the autumn equinox, a day of harvest and reunion known as Qiufen on the Chinese lunar calendar.</p>\n<p>&quot;As a community with a shared future connected by mountains and rivers as well as cultural affinity, we should use sports to promote peace, pursue good neighborliness and mutual benefit, and reject Cold War mentality and bloc confrontation,&quot; he said.</p>\n<p>&quot;We should make Asia an anchor of world peace,&quot; he added.</p>\n<p>Noting that the ongoing Games have set a record for the number of registered athletes and events, Xi said, &quot;We should use sports to promote unity.&quot; He called for efforts to &quot;open up broader prospects for the Asian road toward common development, openness and integration&quot;.</p>\n<p>&quot;We should use sports to promote inclusiveness, enhance confidence in our civilizations, pursue exchanges and mutual learning, and renew the glory of Asian civilizations,&quot; he added.</p>\n<p>Scholars said that China's hosting of the Asian Games aims to use sports &quot;to advance peace, shore up unity and bolster inclusiveness&quot;, and that the latest sports diplomacy led by Xi has been a success.</p>\n<p>Xiao Jianzhong, a professor at the School of Marxism of Zhejiang University of Technology, said, &quot;For China, the Hangzhou Asian Games not only are a major sporting event, but also serve as an important event for diplomacy rolled out at home, as well as an important stage for exchange among various civilizations in Asia.&quot;</p>\n<p>From Friday to Saturday in Hangzhou, Xi embarked on a number of bilateral meetings with the visiting Asian leaders of six nations and the heads of the Olympic Council of Asia and the International Olympic Committee.</p>\n<p>The meetings with the prominent figures took place at a State guesthouse at West Lake, a scenic tourist destination in Hangzhou.</p>\n<p>As this year marks the 10th anniversary of Xi's proposing the concept of China seeking &quot;amity, sincerity, mutual benefit and inclusiveness&quot; with its neighbors, the president referred on Saturday to this principle during his talks with foreign leaders.</p>\n<p>Speaking with Cambodian King Norodom Sihamoni, Xi said that China-Cambodia relations epitomize this principle, and he noted China's commitment to good-neighborliness and partnership with its neighbors in its diplomacy in the region.</p>\n<p>The king hailed the two-way iron-clad, brotherly relations, saying that his country stands ready to work with China on Belt and Road cooperation and build a Cambodia-China community with a shared future.</p>\n<p>IOC President Thomas Bach told Xi on Friday, &quot;I believe there will be successful and wonderful Asian Games that will promote the unity and friendship of Asia.&quot;</p>\n<p>He said the IOC is committed to safeguarding the nonpoliticization of sport, which is broadly supported by the world community, and it endorses China's correct position on this.</p>\n<p>Crown Prince of Kuwait Sheikh Mishal Al-Ahmad Al-Jaber Al-Sabah said President Xi's proposals to build on the Belt and Road Initiative, Global Development Initiative, Global Security Initiative and Global Civilization Initiative are &quot;based on the noble goals and tenets of promoting the peace and progress of mankind&quot;, which Kuwait firmly supports and actively participates in.</p>\n<p>Observers noted that Beijing's consistent pursuit of world prosperity and peace could also be seen in two joint statements released following Xi's talks with Syrian President Bashar al-Assad and with Timor-Leste's Prime Minister Xanana Gusmao on Friday and Saturday, respectively.</p>\n<p>In the two statements, China announced the establishment of a strategic partnership with Syria and a comprehensive strategic partnership with Timor-Leste.</p>\n<p>Co-building the Belt and Road as well as a community with a shared future for mankind, bolstering local livelihoods and &quot;jointly advancing genuine multilateralism&quot; in the international arena are among common points of consensus noted in the two statements.</p>\n<p>Ma Xiaolin, a professor and director of Zhejiang International Studies University's Institute for Studies on the Mediterranean Rim, said China, as a major developing country and the world's second-largest economy, &quot;has never forgotten its social responsibility as a major country in Asia and the world&quot;.</p>\n<p>The Hangzhou Asian Games are the city's &quot;biggest stage to showcase China's image to the outside world and to promote face-to-face exchanges among people from all countries&quot; since Hangzhou hosted the G20 Summit seven years ago, he said.</p>\n<p>Yasir Habib Khan, a writer for The Nation, Pakistan's leading newspaper, noted that cricket's return to the Asian Games and its inclusion in the Hangzhou events &quot;is a pivotal moment for the sport and for China's diplomatic endeavors&quot;, as teams of both Pakistan and India now may have the chance to embark on friendly rivalry at the games.</p>\n</div>\n<h3 id=\"expression\"><a class=\"anchor\" href=\"#expression\">#</a> Expression:</h3>\n<p>1、<span class=\"kbd red\">tangible</span>  adj. 有形的，实际的，可感知的，可触摸的；n. 有形资产，具体的某事物</p>\n<p>​\textend: <span class=\"kbd red\">tangibly</span> adv. 确实地，明确的     <span class=\"kdb aqua\">near-synonym</span>: <span class=\"kbd red\">literally</span>,<span class=\"kbd red\">definitely</span></p>\n<p>​\te.g: <span class=\"kbd orange\">The tension between them was almost tangible. </span></p>\n<p>​\t\t\t他们之间的紧张关系几乎让人都感觉得出来</p>\n<p>​\t\t   <span class=\"kbd orange\">Suddenly the problem of future loomed tangibly for me.</span></p>\n<p>​\t\t\t 突然，前途的问题明确地出现在我面前</p>\n<p>2、<span class=\"kbd red\">endorse</span> v.(公开) 赞同，支持，认可    <span class=\"kdb aqua\">near-synonym</span>: <span class=\"kbd red\">agree with</span>,<span class=\"kbd red\">favour</span>,<span class=\"kbd red\">approve</span></p>\n<p>3、<span class=\"kbd red\">diplomatic</span> adj. 外交的，灵活变通的</p>\n<p>4、<span class=\"kbd red\">affinity</span> n. 密切关系，喜爱</p>\n<p>​      e.g: <span class=\"kbd orange\">The two plots share certain obvious affinities.</span></p>\n<p>​\t\t\t 这两个情节有某种明显的相似</p>\n<p>5、<span class=\"kbd orange\">a community with a shared future connected by mountains and rivers as well as cultural affinity</span></p>\n<p>山水相连，文化相亲的命运共同体</p>\n<p>6、<span class=\"kbd red\">mutual</span> adj. 相互的，共同的   <span class=\"kdb aqua\">near-synonym</span>: <span class=\"kbd red\">common</span>，<span class=\"kbd red\">collective</span></p>\n<p>7、<span class=\"kbd red\">shore up</span> 支持，支撑，加强   <span class=\"kdb aqua\">near-synonym</span>: <span class=\"kbd red\">bolster (加强，改善)</span>,<span class=\"kbd red\">advance (加强，提高)</span></p>\n<p>8、<span class=\"kbd red\">embark on sth/doing sth</span> 着手，开始做某事</p>\n<p>9、<span class=\"kbd red\">prominent</span> adj. 显眼的，显著的，著名的，杰出的   <span class=\"kdb aqua\">near-synonym</span>: <span class=\"kbd red\">famous</span>,<span class=\"kbd red\">established</span>,<span class=\"kbd red\">renowned</span></p>\n<p>10、<span class=\"kbd red\">amity</span> n. 友好，和睦    <span class=\"kbd red\">sincerity</span> n. 诚意，真挚</p>\n<p>11、<span class=\"kbd red\">epitomize</span> v. 成为... 典范</p>\n<p>e.g: <span class=\"kbd orange\">These movies seem to epitomize the 1950s</span></p>\n<p>​\t\t这些影片似乎就是 20 世纪 50 年代的缩影</p>\n<p>12、<span class=\"kbd red\">consensus</span> n. 共识，一致的意见</p>\n<p>e.g: <span class=\"kbd orange\">These is a growing consensus of opinion on this issue. </span></p>\n<p>​\t\t 对这个问题的看法日趋一致</p>\n<p>13、<span class=\"kbd red\">pivotal</span>  adj. 关键的，中枢的，核心的   <span class=\"kdb aqua\">near-synonym</span>: <span class=\"kbd red\">key,critical</span>,<span class=\"kbd red\">important</span>,<span class=\"kbd red\">core</span></p>\n<p>14、<span class=\"kbd red\">testament</span> n. 证明，证据</p>\n<p>15、<span class=\"kbd red\">craft a shared narrative of friendship</span> 构建一个共同的友谊</p>\n",
            "tags": [
                "英语笔记",
                "English"
            ]
        },
        {
            "id": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8BGMM%E6%A8%A1%E5%9E%8B/",
            "url": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8BGMM%E6%A8%A1%E5%9E%8B/",
            "title": "机器学习之GMM模型",
            "date_published": "2023-10-18T14:09:45.000Z",
            "content_html": "<h4 id=\"gmm模型及其em算法\"><a class=\"anchor\" href=\"#gmm模型及其em算法\">#</a> GMM 模型及其 EM 算法</h4>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-gmm模型简介\"><a class=\"anchor\" href=\"#一-gmm模型简介\">#</a> 一、GMM 模型简介</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span>，全称<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>a</mi><mi>u</mi><mi>s</mi><mi>s</mi><mi>M</mi><mi>i</mi><mi>x</mi><mi>t</mi><mi>u</mi><mi>r</mi><mi>e</mi><mi>M</mi><mi>o</mi><mi>d</mi><mi>e</mi><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">Gauss Mixture Model</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 是混合密度模型的一个特例，由多个高斯（正态分布）函数的组合而成，其公式为如下：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>p</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo stretchy=\"false\">)</mo><mo>=</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></munderover><msub><mi>α</mi><mi>k</mi></msub><mi>N</mi><mo stretchy=\"false\">(</mo><mi>x</mi><mo separator=\"true\">;</mo><msub><mi>μ</mi><mi>k</mi></msub><mo separator=\"true\">;</mo><msub><mi>σ</mi><mi>k</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">p(x)=\\sum\\limits_{k=1}^M \\alpha_k N(x;\\mu_k;\\sigma_k)\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:3.1304490000000005em;vertical-align:-1.302113em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.8283360000000002em;\"><span style=\"top:-1.8478869999999998em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.0500049999999996em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span><span class=\"mop op-symbol large-op\">∑</span></span></span><span style=\"top:-4.300005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3.05em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">M</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.302113em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">x</span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></span></p>\n<p>其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>μ</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\mu_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是此多维正态分布的平均数向量，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>σ</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\sigma_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是此多维正态分布的协方差矩阵，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>α</mi><mi>k</mi></msub></mrow><annotation encoding=\"application/x-tex\">\\alpha_k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是此变量是由第<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 个高斯分布产生的。</p>\n<p>该模型当数量 M 无限大时，GMM 可以任意精读逼近任意分布密度函数</p>\n<h2 id=\"二-gmm参数估计问题\"><a class=\"anchor\" href=\"#二-gmm参数估计问题\">#</a> 二、GMM 参数估计问题</h2>\n<p>当只有训练数据集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>X</mi></msub><mo>=</mo><mrow><msub><mi>x</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><msub><mi>x</mi><mi>n</mi></msub></mrow></mrow><annotation encoding=\"application/x-tex\">D_X={x_1,...,x_n}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.151392em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></span> 时，我们要用<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 模型来拟合训练数据集，因此需要对 GMM 的参数进行估计，需要估计的参数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>θ</mi><mo>=</mo><mo stretchy=\"false\">(</mo><msub><mi>α</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><msub><mi>α</mi><mi>M</mi></msub><mo separator=\"true\">,</mo><msub><mi>μ</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><msub><mi>μ</mi><mi>M</mi></msub><mo separator=\"true\">,</mo><msub><mi>σ</mi><mn>1</mn></msub><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><msub><mi>σ</mi><mi>M</mi></msub><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\theta=(\\alpha_1,...\\alpha_M,\\mu_1,...\\mu_M,\\sigma_1,...\\sigma_M)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">M</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">M</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\">.</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">M</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<p>对数似然函数:<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mo stretchy=\"false\">(</mo><mi>θ</mi><mo stretchy=\"false\">)</mo><mo>=</mo><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>l</mi><mi>n</mi><mo stretchy=\"false\">[</mo><msubsup><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></msubsup><msub><mi>α</mi><mi>k</mi></msub><mi>N</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator=\"true\">;</mo><msub><mi>μ</mi><mi>k</mi></msub><mo separator=\"true\">,</mo><msub><mi>σ</mi><mi>k</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">l(\\theta)=\\sum\\limits_{i=1}^n ln[\\sum\\limits_{k=1}^M \\alpha_k N(x_i;\\mu_k,\\sigma_k)]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.530449em;vertical-align:-1.002113em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3513970000000004em;\"><span style=\"top:-2.122331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.0000050000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop op-symbol small-op\">∑</span></span></span><span style=\"top:-3.950005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9776689999999999em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">n</span><span class=\"mopen\">[</span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.528336em;\"><span style=\"top:-2.097887em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.000005em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop op-symbol small-op\">∑</span></span></span><span style=\"top:-3.950005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">M</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.002113em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mclose\">]</span></span></span></span>，通过观察计算可以发现，该极值点方程是复杂的超越方程组，很难直接求解</p>\n<p>常用的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 参数估计方法是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">EM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 算法</p>\n<p>在看<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">EM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 算法前，先思考参数估计有哪些问题:</p>\n<ul>\n<li>只有样本<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，但是不知道是由哪一个成分高斯产生的</li>\n<li y_1,...,y_n=\"\">令<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi></mrow><annotation encoding=\"application/x-tex\">y_i=k</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span></span></span></span> 表示<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 是由第 k 个成分高斯产生的，构造集合：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>Y</mi></msub><mo>=</mo></mrow><annotation encoding=\"application/x-tex\">D_Y=</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span></span></span></span></li>\n<li>完整的数据集<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>D</mi><mo>=</mo><msub><mi>D</mi><mi>X</mi></msub><mo>∩</mo><msub><mi>D</mi><mi>Y</mi></msub></mrow><annotation encoding=\"application/x-tex\">D=D_X \\cap D_Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.07847em;\">X</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">∩</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>Y</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 为缺失的数据</li>\n</ul>\n<p>在正常情况下，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>Y</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>θ</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span></span></span></span> 均未知时</p>\n<ul>\n<li>可以采用交替的方式，迭代优化</li>\n<li>固定参数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>θ</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span></span></span></span>，优化<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>Y</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span></li>\n<li>固定<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>Y</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span>，优化参数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>θ</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span></span></span></span></li>\n</ul>\n<h2 id=\"三-em算法\"><a class=\"anchor\" href=\"#三-em算法\">#</a> 三、EM 算法</h2>\n<ul>\n<li>迭代优化过程中，参数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>θ</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>D</mi><mi>Y</mi></msub></mrow><annotation encoding=\"application/x-tex\">D_Y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.83333em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">D</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.32833099999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.22222em;\">Y</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 都是不准确的中间推断结果</li>\n<li>依据不准确参数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>θ</mi></mrow><annotation encoding=\"application/x-tex\">\\theta</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span></span></span></span> 断定<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 由某个高斯产生，过于武断</li>\n<li>合理的方式是推断样本<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>x</mi><mi>i</mi></msub></mrow><annotation encoding=\"application/x-tex\">x_i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span> 由每一个高斯产生的概率</li>\n</ul>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mi mathvariant=\"normal\">∣</mi><msub><mi>x</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo><mo>=</mo><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy=\"false\">)</mo><mi>p</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>i</mi></msub><mi mathvariant=\"normal\">∣</mi><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><mrow><mi>p</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo stretchy=\"false\">)</mo></mrow></mfrac></mstyle><mo>=</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mrow><msub><mi>a</mi><mi>k</mi></msub><mi>N</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator=\"true\">;</mo><msub><mi>μ</mi><mi>k</mi></msub><mo separator=\"true\">,</mo><msub><mi>σ</mi><mi>k</mi></msub><mo stretchy=\"false\">)</mo></mrow><mrow><msubsup><mo>∑</mo><mrow><mi>j</mi><mo>=</mo><mn>1</mn></mrow><mi>M</mi></msubsup><msub><mi>a</mi><mi>j</mi></msub><mi>N</mi><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo separator=\"true\">;</mo><msub><mi>μ</mi><mi>j</mi></msub><mo separator=\"true\">,</mo><msub><mi>σ</mi><mi>j</mi></msub><mo stretchy=\"false\">)</mo></mrow></mfrac></mstyle></mrow><annotation encoding=\"application/x-tex\">\\dfrac{P(y_i=k|x_i)=P(y_i=k)p(x_i|y_i=k)}{p(x_i)}=\\dfrac{a_k N(x_i;\\mu_k,\\sigma_k)}{\\sum_{j=1}^Ma_jN(x_i;\\mu_j,\\sigma_j)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:2.363em;vertical-align:-0.936em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.936em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.734049em;vertical-align:-1.3070490000000001em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.427em;\"><span style=\"top:-2.128769em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.981231em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.10903em;\">M</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.43581800000000004em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.311664em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.286108em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\"><span class=\"mord mathnormal\">a</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">;</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3070490000000001em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>   (1)</p>\n<p>这是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">EM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 算法中的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span> 步：估计隐变量（缺失数据）的概率</p>\n<ul>\n<li>每个部分高斯分布参数也需要由所有样本参与估计，同时需要考虑样本由不同高斯产生的概率</li>\n</ul>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mover accent=\"true\"><mi>a</mi><mo>^</mo></mover><mi>k</mi></msub><mo>=</mo><mi>f</mi><mi>r</mi><mi>a</mi><mi>c</mi><mn>1</mn><mi>n</mi><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">\\hat{a}_k=frac{1}{n}\\sum\\limits_{i=1}^nP(y_i=k)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">a</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.329066em;vertical-align:-0.9776689999999999em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mord\"><span class=\"mord\">1</span></span><span class=\"mord\"><span class=\"mord mathnormal\">n</span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mop op-limits\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.3513970000000004em;\"><span style=\"top:-2.122331em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.0000050000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span><span class=\"mop op-symbol small-op\">∑</span></span></span><span style=\"top:-3.950005em;margin-left:0em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9776689999999999em;\"><span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span></span>  (2)</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mover accent=\"true\"><mi>μ</mi><mo>^</mo></mover><mi>k</mi></msub><mo>=</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy=\"false\">)</mo><msub><mi>x</mi><mi>i</mi></msub></mrow><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mstyle></mrow><annotation encoding=\"application/x-tex\">\\hat{\\mu}_k=\\dfrac{\\sum_{i=1}^nP(y_i=k)x_i}{\\sum_{i=1}^nP(y_i=k)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.22222em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.488004em;vertical-align:-0.994002em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.494002em;\"><span style=\"top:-2.305708em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.6897100000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.994002em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>  (3)</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mover accent=\"true\"><mi>σ</mi><mo>^</mo></mover><mi>k</mi></msub><mo>=</mo><mstyle displaystyle=\"true\" scriptlevel=\"0\"><mfrac><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent=\"true\"><mi>μ</mi><mo>^</mo></mover><mi>k</mi></msub><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>−</mo><msub><mover accent=\"true\"><mi>μ</mi><mo>^</mo></mover><mi>k</mi></msub><msup><mo stretchy=\"false\">)</mo><mi>t</mi></msup></mrow><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><mi>P</mi><mo stretchy=\"false\">(</mo><msub><mi>y</mi><mi>i</mi></msub><mo>=</mo><mi>k</mi><mo stretchy=\"false\">)</mo></mrow></mfrac></mstyle></mrow><annotation encoding=\"application/x-tex\">\\hat{\\sigma}_k=\\dfrac{\\sum_{i=1}^nP(y_i=k)(x_i-\\hat{\\mu}_k)(x_i-\\hat{\\mu}_k)^t}{\\sum_{i=1}^nP(y_i=k)}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.84444em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.25em;\"><span class=\"mord\">^</span></span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.488004em;vertical-align:-0.994002em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.494002em;\"><span style=\"top:-2.305708em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.6897100000000003em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mop\"><span class=\"mop op-symbol small-op\" style=\"position:relative;top:-0.0000050000000000050004em;\">∑</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.804292em;\"><span style=\"top:-2.40029em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\">i</span><span class=\"mrel mtight\">=</span><span class=\"mord mtight\">1</span></span></span></span><span style=\"top:-3.2029em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.29971000000000003em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.22222em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\">)</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.31166399999999994em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">i</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mord\"><span class=\"mord accent\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.69444em;\"><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span></span></span><span style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"accent-body\" style=\"left:-0.22222em;\"><span class=\"mord\">^</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.19444em;\"><span></span></span></span></span></span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.33610799999999996em;\"><span style=\"top:-2.5500000000000003em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.03148em;\">k</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.7935559999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.994002em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span></span></span></span>  (4)</p>\n<p>这是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">EM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 算法中的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 步：最大化模型的参数</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">EM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 算法需要不断经过<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi></mrow><annotation encoding=\"application/x-tex\">E</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span></span></span></span> 步和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">M</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 步的迭代最终达到一个临界条件，一般采用似然函数在两轮迭代之间的变化量作为收敛条件，如下：</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mi mathvariant=\"normal\">∣</mi><mi>θ</mi><mo stretchy=\"false\">)</mo><mo>≥</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>p</mi><mo stretchy=\"false\">(</mo><mi>X</mi><mi mathvariant=\"normal\">∣</mi><msub><mi>θ</mi><mo stretchy=\"false\">(</mo></msub><mi>t</mi><mo stretchy=\"false\">)</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">logp(X|\\theta)\\ge logp(X|\\theta_(t))\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mord\">∣</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"mclose\">)</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">≥</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.1052em;vertical-align:-0.3551999999999999em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">p</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span><span class=\"mord\">∣</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">θ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.34480000000000005em;\"><span style=\"top:-2.5198em;margin-left:-0.02778em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mopen mtight\">(</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3551999999999999em;\"><span></span></span></span></span></span></span><span class=\"mord mathnormal\">t</span><span class=\"mclose\">)</span><span class=\"mclose\">)</span></span></span></span></span></p>\n<h2 id=\"四-例题实战\"><a class=\"anchor\" href=\"#四-例题实战\">#</a> 四、例题实战</h2>\n<p>1、题目一：有两类两维各 1000 个训练样本保存在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>m</mi><mi>u</mi><mo>−</mo><mi>T</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo>−</mo><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>c</mi><mi>s</mi><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">Emu-Train-Samples.csv</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">u</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>m</mi><mi>u</mi><mo>−</mo><mi>T</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo>−</mo><mi>L</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>c</mi><mi>s</mi><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">Emu-Train-Labels.csv</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">u</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 文件中，各 1000 个测试样本保存在<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>m</mi><mi>u</mi><mo>−</mo><mi>T</mi><mi>e</mi><mi>s</mi><mi>t</mi><mo>−</mo><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>c</mi><mi>s</mi><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">Emu-Test-Samples.csv</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">u</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>E</mi><mi>m</mi><mi>u</mi><mo>−</mo><mi>T</mi><mi>e</mi><mi>s</mi><mi>t</mi><mo>−</mo><mi>L</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>c</mi><mi>s</mi><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">Emu-Test-Labels.csv</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">E</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">u</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 文件中。每个类别的样本分别采样自包含 2 个分量的高斯混合模型中，分别使用两个类别的训练样本学习模型化每个类别条件概率密度函数的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 模型参数，并与模型的真实值进行比较；</p>\n<p pmatrix=\"\">类别 0 的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span>： \\alpha_1=\\frac{2}{3}，\\mu_1=(0,0)^t，\\sigma_1=\\begin{pmatrix}3&1\\\\1&1\\end</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>α</mi><mn>2</mn></msub><mo>=</mo><mfrac><mn>1</mn><mn>3</mn></mfrac><mtext>，</mtext><msub><mi>μ</mi><mn>2</mn></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mn>10</mn><mo separator=\"true\">,</mo><mn>10</mn><msup><mo stretchy=\"false\">)</mo><mi>t</mi></msup><mtext>，</mtext><msub><mi>σ</mi><mn>2</mn></msub><mo>=</mo><mrow><mo fence=\"true\">(</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>5</mn></mstyle></mtd></mtr></mtable><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\\alpha_2=\\frac{1}{3}，\\mu_2=(10,10)^t，\\sigma_2=\\begin{pmatrix}2&amp;2\\\\5&amp;5\\end{pmatrix}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord cjk_fallback\">，</span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.093556em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.843556em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span><span class=\"mord cjk_fallback\">，</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.40003em;vertical-align:-0.95003em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">(</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">)</span></span></span></span></span></span></span></p>\n<p pmatrix=\"\">类别 1 的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span>： \\alpha_1=\\frac{2}{3}，\\mu_1=(2,10)^t，\\sigma_1=\\begin{pmatrix}1&1\\\\1&3\\end</p>\n<p><span class=\"katex-display\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\" display=\"block\"><semantics><mrow><msub><mi>α</mi><mn>2</mn></msub><mo>=</mo><mfrac><mn>1</mn><mn>3</mn></mfrac><mtext>，</mtext><msub><mi>μ</mi><mn>2</mn></msub><mo>=</mo><mo stretchy=\"false\">(</mo><mn>15</mn><mo separator=\"true\">,</mo><mn>20</mn><msup><mo stretchy=\"false\">)</mo><mi>t</mi></msup><mtext>，</mtext><msub><mi>σ</mi><mn>2</mn></msub><mo>=</mo><mrow><mo fence=\"true\">(</mo><mtable rowspacing=\"0.15999999999999992em\" columnspacing=\"1em\"><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>5</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>2</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel=\"0\" displaystyle=\"false\"><mn>1</mn></mstyle></mtd></mtr></mtable><mo fence=\"true\">)</mo></mrow></mrow><annotation encoding=\"application/x-tex\">\\alpha_2=\\frac{1}{3}，\\mu_2=(15,20)^t，\\sigma_2=\\begin{pmatrix}5&amp;2\\\\2&amp;1\\end{pmatrix}\n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.58056em;vertical-align:-0.15em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.0037em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.00744em;vertical-align:-0.686em;\"></span><span class=\"mord\"><span class=\"mopen nulldelimiter\"></span><span class=\"mfrac\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.32144em;\"><span style=\"top:-2.314em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">3</span></span></span><span style=\"top:-3.23em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"frac-line\" style=\"border-bottom-width:0.04em;\"></span></span><span style=\"top:-3.677em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.686em;\"><span></span></span></span></span></span><span class=\"mclose nulldelimiter\"></span></span><span class=\"mord cjk_fallback\">，</span><span class=\"mord\"><span class=\"mord mathnormal\">μ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1.093556em;vertical-align:-0.25em;\"></span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mord\">5</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord\">2</span><span class=\"mord\">0</span><span class=\"mclose\"><span class=\"mclose\">)</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.843556em;\"><span style=\"top:-3.113em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">t</span></span></span></span></span></span></span></span><span class=\"mord cjk_fallback\">，</span><span class=\"mord\"><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.30110799999999993em;\"><span style=\"top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.15em;\"><span></span></span></span></span></span></span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:2.40003em;vertical-align:-0.95003em;\"></span><span class=\"minner\"><span class=\"mopen delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">(</span></span><span class=\"mord\"><span class=\"mtable\"><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">5</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"arraycolsep\" style=\"width:0.5em;\"></span><span class=\"col-align-c\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:1.45em;\"><span style=\"top:-3.61em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">2</span></span></span><span style=\"top:-2.4099999999999997em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord\"><span class=\"mord\">1</span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.9500000000000004em;\"><span></span></span></span></span></span></span></span><span class=\"mclose delimcenter\" style=\"top:0em;\"><span class=\"delimsizing size3\">)</span></span></span></span></span></span></span></p>\n<p>假设两个类别的先验概率相等，使用学习到的模型参数分类测试样本数据，统计分类的正确率</p>\n<p>开始上代码，最重要的一步是写出<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 模型的类</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">GMM</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">__init__</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>data<span class=\"token punctuation\">,</span>n_cluster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># data 是训练数据，n_cluster 是一个混合高斯模型中有多少个高斯函数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    self<span class=\"token punctuation\">.</span>data<span class=\"token operator\">=</span>data</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    self<span class=\"token punctuation\">.</span>n_cluster<span class=\"token operator\">=</span>n_cluster</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    self<span class=\"token punctuation\">.</span>max_iteration<span class=\"token operator\">=</span><span class=\"token number\">100</span> <span class=\"token comment\"># max_iteration 是为了防止迭代终止条件太难到达</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    self<span class=\"token punctuation\">.</span>tolerance<span class=\"token operator\">=</span><span class=\"token number\">1e-6</span> <span class=\"token comment\"># tolerance 就是迭代终止掉件</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Gaussian</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">,</span>mean<span class=\"token punctuation\">,</span>cov<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 这个函数用来求高斯函数的概率密度函数</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    ans <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">for</span> one <span class=\"token keyword\">in</span> x<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        X<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>one<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        mean<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>mean<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        cov<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>cov<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        ans<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>exp<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">0.5</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>X<span class=\"token operator\">-</span>mean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">,</span>np<span class=\"token punctuation\">.</span>linalg<span class=\"token punctuation\">.</span>inv<span class=\"token punctuation\">(</span>cov<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>X<span class=\"token operator\">-</span>mean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t\t<span class=\"token operator\">/</span>math<span class=\"token punctuation\">.</span>sqrt<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>linalg<span class=\"token punctuation\">.</span>det<span class=\"token punctuation\">(</span><span class=\"token number\">2.0</span><span class=\"token operator\">*</span>math<span class=\"token punctuation\">.</span>pi<span class=\"token operator\">*</span>cov<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token keyword\">return</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>ans<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">init_params</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 随机初始化参数</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    self<span class=\"token punctuation\">.</span>means<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>choice<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>shape</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\t<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>n_cluster<span class=\"token punctuation\">,</span>replace<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 从 data 里面随机挑 n_cluster 个数当均值</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    self<span class=\"token punctuation\">.</span>covs<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>cov<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>n_cluster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span> </pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t<span class=\"token comment\"># 所有的协方差都用当前数据的协方差矩阵</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    self<span class=\"token punctuation\">.</span>weights <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>ones<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>n_cluster<span class=\"token punctuation\">)</span><span class=\"token operator\">/</span>self<span class=\"token punctuation\">.</span>n_cluster </pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t<span class=\"token comment\"># 属于哪个高斯函数初始化都一样为 1/n_cluster</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">E_step</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    possibility <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>n_cluster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t<span class=\"token comment\"># 初始化一个 (训练集样本数，n_cluster) 大小的 0 矩阵</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>n_cluster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        possibility<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>weights<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>self<span class=\"token punctuation\">.</span>Gaussian<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>means<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>covs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> </pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t\t<span class=\"token comment\"># E 步分子的计算</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    possibility <span class=\"token operator\">/=</span> possibility<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>keepdims<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># E 步除以分母 </span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">return</span> possibility</pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">M_step</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>possibility<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    Nk <span class=\"token operator\">=</span> possibility<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 计算概率总和</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    self<span class=\"token punctuation\">.</span>weights<span class=\"token operator\">=</span>Nk<span class=\"token operator\">/</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 除以总样本数得到新的 alpha 参数</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    self<span class=\"token punctuation\">.</span>means <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>possibility<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">)</span><span class=\"token operator\">/</span>Nk<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span>np<span class=\"token punctuation\">.</span>newaxis<span class=\"token punctuation\">]</span> </pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\t<span class=\"token comment\"># 给列新增维度，为了保持维度的一致</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    covs <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>n_cluster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        diff <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>data <span class=\"token operator\">-</span> self<span class=\"token punctuation\">.</span>means<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        cov <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>possibility<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>diff<span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">,</span>diff<span class=\"token punctuation\">)</span><span class=\"token operator\">/</span>Nk<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span>  <span class=\"token comment\">#直接计算每一个单体值，分子除以分母</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>        covs<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>cov<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>    self<span class=\"token punctuation\">.</span>covs<span class=\"token operator\">=</span>covs <span class=\"token comment\"># 更新协方差矩阵</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">loglikelyhood</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 计算对数似然</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>    likelyhood <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>n_cluster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>n_cluster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>        likelyhood<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>weights<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>self<span class=\"token punctuation\">.</span>Gaussian<span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>means<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>covs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    <span class=\"token keyword\">return</span> np<span class=\"token punctuation\">.</span>log<span class=\"token punctuation\">(</span>likelyhood<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">EM</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    self<span class=\"token punctuation\">.</span>init_params<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    log_likelyhood_prev<span class=\"token operator\">=</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>max_iteration<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        possibility<span class=\"token operator\">=</span>self<span class=\"token punctuation\">.</span>E_step<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        self<span class=\"token punctuation\">.</span>M_step<span class=\"token punctuation\">(</span>possibility<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        log_likelyhood_cur <span class=\"token operator\">=</span> self<span class=\"token punctuation\">.</span>loglikelyhood<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token keyword\">if</span> np<span class=\"token punctuation\">.</span><span class=\"token builtin\">abs</span><span class=\"token punctuation\">(</span>log_likelyhood_cur<span class=\"token operator\">-</span>log_likelyhood_prev<span class=\"token punctuation\">)</span><span class=\"token operator\">&lt;</span>self<span class=\"token punctuation\">.</span>tolerance<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>            <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>        log_likelyhood_prev <span class=\"token operator\">=</span> log_likelyhood_cur</pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token keyword\">return</span> self<span class=\"token punctuation\">.</span>means<span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>covs<span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>weights</pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">predict</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 计算某一个新样本点的由此高斯模型产生的概率</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    possibility <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">.</span>n_cluster<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>        possibility<span class=\"token operator\">+=</span>self<span class=\"token punctuation\">.</span>weights<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>self<span class=\"token punctuation\">.</span>Gaussian<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>means<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>self<span class=\"token punctuation\">.</span>covs<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token keyword\">return</span> possibility</pre></td></tr></table></figure><p>有了 GMM 模型的类剩下的就很好解决了，先对数据进行读取处理</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Xtrain_file <span class=\"token operator\">=</span> <span class=\"token string\">\"F:/Mechine Learning/实验三/Emu-Train-Samples.csv\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Ytrain_file <span class=\"token operator\">=</span> <span class=\"token string\">\"F:/Mechine Learning/实验三/Emu-Train-Labels.csv\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Xtest_file <span class=\"token operator\">=</span> <span class=\"token string\">\"F:/Mechine Learning/实验三/Emu-Test-Samples.csv\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Ytest_file <span class=\"token operator\">=</span> <span class=\"token string\">\"F:/Mechine Learning/实验三/Emu-Test-Labels.csv\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>X_train <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>X_test <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Y_train <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Y_test <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>Xtrain_file<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> csvfile<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    reader <span class=\"token operator\">=</span> csv<span class=\"token punctuation\">.</span>reader<span class=\"token punctuation\">(</span>csvfile<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> reader<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        temp <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> row<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            temp<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        X_train<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>Ytrain_file<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> csvfile<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    reader <span class=\"token operator\">=</span> csv<span class=\"token punctuation\">.</span>reader<span class=\"token punctuation\">(</span>csvfile<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> reader<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        Y_train<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>row<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>Xtest_file<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> csvfile<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    reader <span class=\"token operator\">=</span> csv<span class=\"token punctuation\">.</span>reader<span class=\"token punctuation\">(</span>csvfile<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> reader<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        temp <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> row<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            temp<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        X_test<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>Ytest_file<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> csvfile<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    reader <span class=\"token operator\">=</span> csv<span class=\"token punctuation\">.</span>reader<span class=\"token punctuation\">(</span>csvfile<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> reader<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        Y_test<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>row<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token comment\"># 由于需要对分别对两类进行估计，因此需要把两类样本分别分出来</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>X_train_zero <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>X_train_one <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token keyword\">if</span> Y_train<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>        X_train_zero<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        X_train_one<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>X_train_one <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>X_train_one<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>X_train_zero <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>X_train_zero<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>剩下的就是朴实无华的训练</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>gmm_zero <span class=\"token operator\">=</span> GMM<span class=\"token punctuation\">(</span>X_train_zero<span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>mean<span class=\"token punctuation\">,</span>cov<span class=\"token punctuation\">,</span>weight <span class=\"token operator\">=</span> gmm_zero<span class=\"token punctuation\">.</span>EM<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>mean<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>cov<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>weight<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>gmm_one <span class=\"token operator\">=</span> GMM<span class=\"token punctuation\">(</span>X_train_one<span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>mean<span class=\"token punctuation\">,</span>cov<span class=\"token punctuation\">,</span>weight <span class=\"token operator\">=</span> gmm_one<span class=\"token punctuation\">.</span>EM<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>mean<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>cov<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>weight<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>训练的结果如下表：</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">GMM 估计模型参数</th>\n<th style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>α</mi></mrow><annotation encoding=\"application/x-tex\">\\alpha</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.0037em;\">α</span></span></span></span></th>\n<th style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>μ</mi></mrow><annotation encoding=\"application/x-tex\">\\mu</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">μ</span></span></span></span></th>\n<th style=\"text-align:center\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>σ</mi></mrow><annotation encoding=\"application/x-tex\">\\sigma</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">σ</span></span></span></span></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">类别 0，高斯 1</td>\n<td style=\"text-align:center\">0.65890602</td>\n<td style=\"text-align:center\">[-0.04877201,-0.03493048]</td>\n<td style=\"text-align:center\">[[2.85162614,0.97072729],[0.97072729,0.9689499]]</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">类别 0，高斯 2</td>\n<td style=\"text-align:center\">0.34109398</td>\n<td style=\"text-align:center\">[9.97026618,9.95347268]</td>\n<td style=\"text-align:center\">[[2.0163164,2.35543704],[2.35543704,5.31830092]]</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">类别 1，高斯 1</td>\n<td style=\"text-align:center\">0.66799982</td>\n<td style=\"text-align:center\">[2.02206041,10.16700955]</td>\n<td style=\"text-align:center\">[[0.96728744,0.91060643],[0.91060643,2.74892244]]</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">类别 1，高斯 2</td>\n<td style=\"text-align:center\">0.33200018</td>\n<td style=\"text-align:center\">[14.97097406,2.02206041]</td>\n<td style=\"text-align:center\">[[5.28809399,2.18044657],[2.18044657,1.12285598]]</td>\n</tr>\n</tbody>\n</table>\n<p>最后再测试集上测试准确率</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>predict <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">for</span> per_test <span class=\"token keyword\">in</span> X_test<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    prob_zero <span class=\"token operator\">=</span> gmm_zero<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>per_test<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    prob_one <span class=\"token operator\">=</span> gmm_one<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>per_test<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">if</span> prob_zero<span class=\"token operator\">></span>prob_one<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        predict<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token keyword\">elif</span> prob_zero<span class=\"token operator\">&lt;</span>prob_one<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        predict<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        predict<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'null'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>right <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">if</span> predict<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>Y_test<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        right<span class=\"token operator\">+=</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"正确识别率为：\"</span><span class=\"token punctuation\">,</span>right<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"正确率为：\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>right<span class=\"token operator\">*</span><span class=\"token number\">1.0</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span><span class=\"token operator\">*</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>经过预测验证后，发现正确率来到惊人的 1.0，侧面也说明了数据集真的很好</p>\n<h3 id=\"2-题目二mnist数据集测试\"><a class=\"anchor\" href=\"#2-题目二mnist数据集测试\">#</a> 2、题目二：MNIST 数据集测试</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>N</mi><mi>I</mi><mi>S</mi><mi>T</mi><mo>−</mo><mi>T</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo>−</mo><mi>S</mi><mi>a</mi><mi>m</mi><mi>p</mi><mi>l</mi><mi>e</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>c</mi><mi>s</mi><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">MNIST-Train-Samples.csv</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 中包含 30000 个 17 维特征手写数字样本训练，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>N</mi><mi>I</mi><mi>S</mi><mi>T</mi><mo>−</mo><mi>T</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo>−</mo><mi>L</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>c</mi><mi>s</mi><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">MNIST-Train-Labels.csv</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 中包含训练样本的标签</p>\n<p>分别使用每个数字的样本集学习该类别的 GMM 模型参数</p>\n<p>使用 10 个类别的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 模型构成的分类器，分类 MNIST-Test-Samples.csv 的 10000 个样本，与<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>M</mi><mi>N</mi><mi>I</mi><mi>S</mi><mi>T</mi><mo>−</mo><mi>T</mi><mi>e</mi><mi>s</mi><mi>t</mi><mo>−</mo><mi>L</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi><mi>s</mi><mi mathvariant=\"normal\">.</mi><mi>c</mi><mi>s</mi><mi>v</mi></mrow><annotation encoding=\"application/x-tex\">MNIST-Test-Labels.csv</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">I</span><span class=\"mord mathnormal\" style=\"margin-right:0.05764em;\">S</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">s</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">v</span></span></span></span> 的类别标记比对，计算识别的正确率</p>\n<p>尝试设置不同的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 模型超参数 —— 高斯数，测试不同高斯数的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 分类器的识别正确率</p>\n<p>和第一个题目类似，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>G</mi><mi>M</mi><mi>M</mi></mrow><annotation encoding=\"application/x-tex\">GMM</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">G</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span></span></span></span> 类的编写和上一道题目的代码一模一样，所以不在赘述</p>\n<p>先对数据进行预处理</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>Xtrain_file <span class=\"token operator\">=</span> <span class=\"token string\">\"F:/Mechine Learning/实验三/MNIST-Train-Samples.csv\"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>Ytrain_file <span class=\"token operator\">=</span> <span class=\"token string\">\"F:/Mechine Learning/实验三/MNIST-Train-Labels.csv\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>Xtest_file <span class=\"token operator\">=</span> <span class=\"token string\">\"F:/Mechine Learning/实验三/MNIST-Test-Samples.csv\"</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Ytest_file <span class=\"token operator\">=</span> <span class=\"token string\">\"F:/Mechine Learning/实验三/MNIST-Test-Labels.csv\"</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>X_train <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>X_test <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>Y_train <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>Y_test <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>TX_train <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>Xtrain_file<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> csvfile<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    reader <span class=\"token operator\">=</span> csv<span class=\"token punctuation\">.</span>reader<span class=\"token punctuation\">(</span>csvfile<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> reader<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        temp <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> row<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            temp<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        X_train<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>Ytrain_file<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> csvfile<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    reader <span class=\"token operator\">=</span> csv<span class=\"token punctuation\">.</span>reader<span class=\"token punctuation\">(</span>csvfile<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> reader<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        Y_train<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>row<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>Xtest_file<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> csvfile<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>    reader <span class=\"token operator\">=</span> csv<span class=\"token punctuation\">.</span>reader<span class=\"token punctuation\">(</span>csvfile<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>    <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> reader<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>        temp <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> row<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            temp<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>        X_test<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>Ytest_file<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'utf-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> csvfile<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    reader <span class=\"token operator\">=</span> csv<span class=\"token punctuation\">.</span>reader<span class=\"token punctuation\">(</span>csvfile<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">for</span> row <span class=\"token keyword\">in</span> reader<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        Y_test<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>row<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    temp <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>        <span class=\"token keyword\">if</span> Y_train<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span> <span class=\"token operator\">==</span> i<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>            temp<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    TX_train<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>temp<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>然后预测新的数据集</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Gaussian</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>mean<span class=\"token punctuation\">,</span>cov<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    ans <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">for</span> one <span class=\"token keyword\">in</span> x<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        X<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>one<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        mean<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>mean<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        cov<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>cov<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        ans<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>exp<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">0.5</span><span class=\"token operator\">*</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>dot<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>X<span class=\"token operator\">-</span>mean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>T<span class=\"token punctuation\">,</span>np<span class=\"token punctuation\">.</span>linalg<span class=\"token punctuation\">.</span>inv<span class=\"token punctuation\">(</span>cov<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>X<span class=\"token operator\">-</span>mean<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t\t<span class=\"token operator\">/</span>math<span class=\"token punctuation\">.</span>sqrt<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>linalg<span class=\"token punctuation\">.</span>det<span class=\"token punctuation\">(</span><span class=\"token number\">2.0</span><span class=\"token operator\">*</span>math<span class=\"token punctuation\">.</span>pi<span class=\"token operator\">*</span>cov<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token keyword\">return</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>ans<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">for</span> num <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"高斯数为\"</span><span class=\"token punctuation\">,</span>num<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    gmm <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        gmm_t <span class=\"token operator\">=</span> GMM<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>TX_train<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>num<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        mean<span class=\"token punctuation\">,</span>cov<span class=\"token punctuation\">,</span>weight <span class=\"token operator\">=</span> gmm_t<span class=\"token punctuation\">.</span>EM<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        gmm<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>mean<span class=\"token punctuation\">,</span>cov<span class=\"token punctuation\">,</span>weight<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    predict <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token keyword\">for</span> per_test <span class=\"token keyword\">in</span> X_test<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        predict_label <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        max_prob <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            possibility <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            <span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>num<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>                possibility<span class=\"token operator\">+=</span>gmm<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>Gaussian<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>per_test<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>gmm<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>gmm<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token keyword\">if</span> max_prob <span class=\"token operator\">&lt;</span> possibility<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>                max_prob <span class=\"token operator\">=</span> possibility</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>                predict_label <span class=\"token operator\">=</span> i</pre></td></tr><tr><td data-num=\"28\"></td><td><pre>        predict<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>predict_label<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    right<span class=\"token operator\">=</span><span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>        <span class=\"token keyword\">if</span> predict<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">==</span>Y_test<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>             right <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"正确识别数为：\"</span><span class=\"token punctuation\">,</span>right<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"正确率为：\"</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span><span class=\"token operator\">*</span>right<span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.0</span><span class=\"token operator\">*</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>经过 8 个小时的训练，终于抛出了最终的结果，如下：（若想加快训练，可以降低最大迭代次数和放宽迭代退出条件）</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">高斯数</th>\n<th style=\"text-align:center\">正确率</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">1</td>\n<td style=\"text-align:center\">0.9332</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">2</td>\n<td style=\"text-align:center\">0.9441</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">3</td>\n<td style=\"text-align:center\">0.948</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">4</td>\n<td style=\"text-align:center\">0.9486</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">5</td>\n<td style=\"text-align:center\">0.953</td>\n</tr>\n</tbody>\n</table>\n<p>完结撒花！！！</p>\n",
            "tags": [
                "机器学习",
                "Python"
            ]
        },
        {
            "id": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E8%AF%86%E5%88%AB/",
            "url": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%89%8B%E5%86%99%E6%95%B0%E5%AD%97%E8%AF%86%E5%88%AB/",
            "title": "机器学习之手写数字识别",
            "date_published": "2023-04-05T02:11:01.000Z",
            "content_html": "<h1 id=\"手写数字识别\"><a class=\"anchor\" href=\"#手写数字识别\">#</a> 手写数字识别</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-前置库\"><a class=\"anchor\" href=\"#一-前置库\">#</a> 一、前置库</h2>\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport os\nfrom array import array as pyarray\nimport struct\nfrom sklearn.metrics import accuracy_score,classification_report\nfrom sklearn.neighbors import KNeighborsClassifier\nfrom sklearn.naive_bayes import MultinomialNB\nfrom sklearn.tree import DecisionTreeClassifier\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.linear_model import LogisticRegression\nfrom sklearn.svm import SVC\n</code></pre>\n<h2 id=\"二-数据集\"><a class=\"anchor\" href=\"#二-数据集\">#</a> 二、数据集</h2>\n<p>数据集采用的从官网上下载的 mnist 数据集，下载地址为<span class=\"exturl\" data-url=\"aHR0cDovL3lhbm4ubGVjdW4uY29tL2V4ZGIvbW5pc3Qv\"> http://yann.lecun.com/exdb/mnist/</span></p>\n<p>一共包含了 4 个部分</p>\n<p>1、训练数据集：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo>−</mo><mi>i</mi><mi>m</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>s</mi><mo>−</mo><mi>i</mi><mi>d</mi><mi>x</mi><mn>3</mn><mo>−</mo><mi>u</mi><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi mathvariant=\"normal\">.</mi><mi>g</mi><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">train-images-idx3-ubyte.gz</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span> （9.45 MB，包含 60,000 个样本）</p>\n<p>2、训练数据集标签:<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi><mi>r</mi><mi>a</mi><mi>i</mi><mi>n</mi><mo>−</mo><mi>l</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi><mi>s</mi><mo>−</mo><mi>i</mi><mi>d</mi><mi>x</mi><mn>1</mn><mo>−</mo><mi>u</mi><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi mathvariant=\"normal\">.</mi><mi>g</mi><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">train-labels-idx1-ubyte.gz</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74285em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span>（28.2 KB，包含 60,000 个标签）</p>\n<p>3、测试数据集：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi><mn>10</mn><mi>k</mi><mo>−</mo><mi>i</mi><mi>m</mi><mi>a</mi><mi>g</mi><mi>e</mi><mi>s</mi><mo>−</mo><mi>i</mi><mi>d</mi><mi>x</mi><mn>3</mn><mo>−</mo><mi>u</mi><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi mathvariant=\"normal\">.</mi><mi>g</mi><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">t10k-images-idx3-ubyte.gz</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mord\">3</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span>（1.57 MB ，包含 10,000 个样本）</p>\n<p>4、测试数据集标签：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>t</mi><mn>10</mn><mi>k</mi><mo>−</mo><mi>l</mi><mi>a</mi><mi>b</mi><mi>e</mi><mi>l</mi><mi>s</mi><mo>−</mo><mi>i</mi><mi>d</mi><mi>x</mi><mn>1</mn><mo>−</mo><mi>u</mi><mi>b</mi><mi>y</mi><mi>t</mi><mi>e</mi><mi mathvariant=\"normal\">.</mi><mi>g</mi><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">t10k-labels-idx1-ubyte.gz</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">t</span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">s</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.77777em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">x</span><span class=\"mord\">1</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span>（4.43 KB，包含 10,000 个样本的标签）</p>\n<p>可以看到这些数据集和以往的数据集不太一样，需要一些特殊的方法才可以将它们读出来，处理代码如下：</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">load_mnist</span><span class=\"token punctuation\">(</span>image_file<span class=\"token punctuation\">,</span>label_file<span class=\"token punctuation\">,</span>path<span class=\"token operator\">=</span><span class=\"token string\">\"F:/Mechine Learning/Handy Writing/mnist\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    digits <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    fname_image <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span>image_file<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    fname_label <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span>label_file<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    flbl <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>fname_label<span class=\"token punctuation\">,</span><span class=\"token string\">'rb'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    magic_nr<span class=\"token punctuation\">,</span>size <span class=\"token operator\">=</span> struct<span class=\"token punctuation\">.</span>unpack<span class=\"token punctuation\">(</span><span class=\"token string\">\">II\"</span><span class=\"token punctuation\">,</span>flbl<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    lbl <span class=\"token operator\">=</span> pyarray<span class=\"token punctuation\">(</span><span class=\"token string\">\"b\"</span><span class=\"token punctuation\">,</span>flbl<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    flbl<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    fimg <span class=\"token operator\">=</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span>fname_image<span class=\"token punctuation\">,</span><span class=\"token string\">'rb'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    magic_nr<span class=\"token punctuation\">,</span>size<span class=\"token punctuation\">,</span>rows<span class=\"token punctuation\">,</span>cols <span class=\"token operator\">=</span> struct<span class=\"token punctuation\">.</span>unpack<span class=\"token punctuation\">(</span><span class=\"token string\">\">IIII\"</span><span class=\"token punctuation\">,</span>fimg<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token number\">16</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    img <span class=\"token operator\">=</span> pyarray<span class=\"token punctuation\">(</span><span class=\"token string\">\"B\"</span><span class=\"token punctuation\">,</span>fimg<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    fimg<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    ind <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>k <span class=\"token keyword\">for</span> k <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>size<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> lbl<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">]</span> <span class=\"token keyword\">in</span> digits <span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    N <span class=\"token operator\">=</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>ind<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    images <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>N<span class=\"token punctuation\">,</span>rows<span class=\"token operator\">*</span>cols<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    labels <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>N<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>dtype<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>uint8<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>ind<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>        images<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">[</span> ind<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">*</span>rows<span class=\"token operator\">*</span>cols <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span>ind<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">*</span>rows<span class=\"token operator\">*</span>cols<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>rows<span class=\"token operator\">*</span>cols<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>        labels<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> lbl<span class=\"token punctuation\">[</span>ind<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">return</span> images<span class=\"token punctuation\">,</span>labels</pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>train_image<span class=\"token punctuation\">,</span>train_label <span class=\"token operator\">=</span> load_mnist<span class=\"token punctuation\">(</span><span class=\"token string\">\"train-images.idx3-ubyte\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"train-labels.idx1-ubyte\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>test_image<span class=\"token punctuation\">,</span>test_label <span class=\"token operator\">=</span> load_mnist<span class=\"token punctuation\">(</span><span class=\"token string\">\"t10k-images.idx3-ubyte\"</span><span class=\"token punctuation\">,</span><span class=\"token string\">\"t10k-labels.idx1-ubyte\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>这样所有数据被读进来了，下面看看部分图片</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">show_image</span><span class=\"token punctuation\">(</span>imgdata<span class=\"token punctuation\">,</span>imgtarget<span class=\"token punctuation\">,</span>show_column<span class=\"token punctuation\">,</span>show_row<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">for</span> index<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>im<span class=\"token punctuation\">,</span>it<span class=\"token punctuation\">)</span> <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span>imgdata<span class=\"token punctuation\">,</span>imgtarget<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        xx <span class=\"token operator\">=</span> im<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">28</span><span class=\"token punctuation\">,</span><span class=\"token number\">28</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        plt<span class=\"token punctuation\">.</span>subplots_adjust<span class=\"token punctuation\">(</span>left<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>bottom<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>right<span class=\"token operator\">=</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>top<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>wspace<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span>hspace<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        plt<span class=\"token punctuation\">.</span>subplot<span class=\"token punctuation\">(</span>show_row<span class=\"token punctuation\">,</span>show_column<span class=\"token punctuation\">,</span>index<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        plt<span class=\"token punctuation\">.</span>axis<span class=\"token punctuation\">(</span><span class=\"token string\">'off'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        plt<span class=\"token punctuation\">.</span>imshow<span class=\"token punctuation\">(</span>xx<span class=\"token punctuation\">,</span>cmap<span class=\"token operator\">=</span><span class=\"token string\">'gray'</span><span class=\"token punctuation\">,</span>interpolation<span class=\"token operator\">=</span><span class=\"token string\">'nearest'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        plt<span class=\"token punctuation\">.</span>title<span class=\"token punctuation\">(</span><span class=\"token string\">'label:%i'</span><span class=\"token operator\">%</span>it<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>show_image<span class=\"token punctuation\">(</span>train_image<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">50</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>train_label<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">50</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>显示如下：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/6rWVMkI4Jv9ltQU.png\" alt=\"部分图片显示\" /></p>\n<p>对数据再进行一些处理，进行归一化</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>train_image <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>im<span class=\"token operator\">/</span><span class=\"token number\">255.0</span> <span class=\"token keyword\">for</span> im <span class=\"token keyword\">in</span> train_image<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>test_image <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>im<span class=\"token operator\">/</span><span class=\"token number\">255.0</span> <span class=\"token keyword\">for</span> im <span class=\"token keyword\">in</span> test_image<span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>接下来用不同的方法进行分类，大部分模型都是用的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>k</mi><mi>l</mi><mi>e</mi><mi>a</mi><mi>r</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">sklearn</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">n</span></span></span></span> 里的</p>\n<h2 id=\"一-kneighbors\"><a class=\"anchor\" href=\"#一-kneighbors\">#</a> 一、KNeighbors</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>metrics <span class=\"token keyword\">import</span> accuracy_score<span class=\"token punctuation\">,</span>classification_report</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>neighbors <span class=\"token keyword\">import</span> KNeighborsClassifier</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>knc <span class=\"token operator\">=</span> KNeighborsClassifier<span class=\"token punctuation\">(</span>n_neighbors<span class=\"token operator\">=</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>knc<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>train_image<span class=\"token punctuation\">,</span>train_label<span class=\"token punctuation\">.</span>ravel<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>predict <span class=\"token operator\">=</span> knc<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>test_image<span class=\"token punctuation\">)</span>\\</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"accuracy_score:%.4lf\"</span> <span class=\"token operator\">%</span> accuracy_score<span class=\"token punctuation\">(</span>predict<span class=\"token punctuation\">,</span>test_label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Classification report for classifier %s:\\n%s\\n\"</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>knc<span class=\"token punctuation\">,</span>classification_report<span class=\"token punctuation\">(</span>test_label<span class=\"token punctuation\">,</span>predict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>结果如下：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/eGY2onupU6D5jbZ.png\" alt=\"KNeighbors结果\" /></p>\n<p>准确率为：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>c</mi><mi>c</mi><mi>u</mi><mi>r</mi><mi>a</mi><mi>c</mi><mi>y</mi><mi mathvariant=\"normal\">_</mi><mi>s</mi><mi>c</mi><mi>o</mi><mi>r</mi><mi>e</mi><mo>:</mo><mn>0.9665</mn></mrow><annotation encoding=\"application/x-tex\">accuracy\\_score:0.9665</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.74056em;vertical-align:-0.31em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord\" style=\"margin-right:0.02778em;\">_</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">:</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">9</span><span class=\"mord\">6</span><span class=\"mord\">6</span><span class=\"mord\">5</span></span></span></span></p>\n<h2 id=\"二-multinomialnb\"><a class=\"anchor\" href=\"#二-multinomialnb\">#</a> 二、MultinomialNB</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>naive_bayes <span class=\"token keyword\">import</span> MultinomialNB</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>mnb <span class=\"token operator\">=</span> MultinomialNB<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>mnb<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>train_image<span class=\"token punctuation\">,</span>train_label<span class=\"token punctuation\">.</span>ravel<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>predict1 <span class=\"token operator\">=</span> mnb<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>test_image<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"accuracy_score:%.4lf\"</span> <span class=\"token operator\">%</span> accuracy_score<span class=\"token punctuation\">(</span>predict1<span class=\"token punctuation\">,</span>test_label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Classification report for classifier %s:\\n%s\\n\"</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>mnb<span class=\"token punctuation\">,</span> classification_report<span class=\"token punctuation\">(</span>test_label<span class=\"token punctuation\">,</span> predict1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>结果如下：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/wJcTglFhZ7Y1qv2.png\" alt=\"MultinomialNB结果\" /></p>\n<h2 id=\"三-决策树\"><a class=\"anchor\" href=\"#三-决策树\">#</a> 三、决策树</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>tree <span class=\"token keyword\">import</span> DecisionTreeClassifier</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>dtc <span class=\"token operator\">=</span> DecisionTreeClassifier<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>dtc<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>train_image<span class=\"token punctuation\">,</span>train_label<span class=\"token punctuation\">.</span>ravel<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>predict2 <span class=\"token operator\">=</span> dtc<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>test_image<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"accuracy_score:%.4lf\"</span> <span class=\"token operator\">%</span> accuracy_score<span class=\"token punctuation\">(</span>predict2<span class=\"token punctuation\">,</span>test_label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Classification report for classifier %s:\\n%s\\n\"</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>dtc<span class=\"token punctuation\">,</span> classification_report<span class=\"token punctuation\">(</span>test_label<span class=\"token punctuation\">,</span> predict2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>结果如下：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/nR6g4ZBCdm7DbeM.png\" alt=\"决策树结果\" /></p>\n<h2 id=\"四-随机森林\"><a class=\"anchor\" href=\"#四-随机森林\">#</a> 四、随机森林</h2>\n<pre><code>from sklearn.ensemble import RandomForestClassifier\n\nrfc = RandomForestClassifier()\nrfc.fit(train_image,train_label.ravel())\npredict3 = rfc.predict(test_image)\nprint(&quot;accuracy_score:%.4lf&quot; % accuracy_score(predict3,test_label))\nprint(&quot;Classification report for classifier %s:\\n%s\\n&quot; % (rfc, classification_report(test_label, predict3)))\n</code></pre>\n<p>结果如下：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/5YxlLaoVmbiZNJX.png\" alt=\"随机森林结果\" /></p>\n<h2 id=\"五-逻辑回归\"><a class=\"anchor\" href=\"#五-逻辑回归\">#</a> 五、逻辑回归</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>linear_model <span class=\"token keyword\">import</span> LogisticRegression</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>lr <span class=\"token operator\">=</span> LogisticRegression<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>lr<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>train_image<span class=\"token punctuation\">,</span>train_label<span class=\"token punctuation\">.</span>ravel<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>predict4 <span class=\"token operator\">=</span> lr<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>test_image<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"accuracy_score: %.4lf\"</span> <span class=\"token operator\">%</span> accuracy_score<span class=\"token punctuation\">(</span>predict4<span class=\"token punctuation\">,</span>test_label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Classification report for classifier %s:\\n%s\\n\"</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>lr<span class=\"token punctuation\">,</span> classification_report<span class=\"token punctuation\">(</span>test_label<span class=\"token punctuation\">,</span> predict4<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>结果如下：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/6drWugzSOwGIPiF.png\" alt=\"逻辑回归结果\" /></p>\n<h2 id=\"六-svm\"><a class=\"anchor\" href=\"#六-svm\">#</a> 六、SVM</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>svm <span class=\"token keyword\">import</span> SVC</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>svc <span class=\"token operator\">=</span> SVC<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>svc<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>train_image<span class=\"token punctuation\">,</span>train_label<span class=\"token punctuation\">.</span>ravel<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>predict5 <span class=\"token operator\">=</span> svc<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>test_image<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"accuracy_score: %.4lf\"</span> <span class=\"token operator\">%</span> accuracy_score<span class=\"token punctuation\">(</span>predict5<span class=\"token punctuation\">,</span>test_label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Classification report for classifier %s:\\n%s\\n\"</span> <span class=\"token operator\">%</span> <span class=\"token punctuation\">(</span>svc<span class=\"token punctuation\">,</span> classification_report<span class=\"token punctuation\">(</span>test_label<span class=\"token punctuation\">,</span> predict5<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>结果如下：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/YxZq3fNAgROrSy1.png\" alt=\"SVM结果\" /></p>\n",
            "tags": [
                "机器学习",
                "Python"
            ]
        },
        {
            "id": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/",
            "url": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%88%BF%E4%BB%B7%E9%A2%84%E6%B5%8B/",
            "title": "机器学习之房价预测",
            "date_published": "2023-04-01T14:04:21.000Z",
            "content_html": "<h1 id=\"线性回归解决波士顿房价预测问题\"><a class=\"anchor\" href=\"#线性回归解决波士顿房价预测问题\">#</a> 线性回归解决波士顿房价预测问题</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-数据集\"><a class=\"anchor\" href=\"#一-数据集\">#</a> 一、数据集</h2>\n<p>波士顿房价预测也是个经典的数据集，利用<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>k</mi><mi>l</mi><mi>e</mi><mi>a</mi><mi>r</mi><mi>n</mi><mi mathvariant=\"normal\">.</mi><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">sklearn.datasets</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">n</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">s</span></span></span></span> 的数据集直接进行训练</p>\n<p>数据集获取以及相关库导入</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>model_selection <span class=\"token keyword\">import</span> train_test_split</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> sklearn<span class=\"token punctuation\">.</span>datasets <span class=\"token keyword\">as</span> datasets</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>linear_model <span class=\"token keyword\">import</span> Lasso</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>linear_model <span class=\"token keyword\">import</span> Ridge</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>linear_model <span class=\"token keyword\">import</span> LinearRegression</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">load_dataset</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\tboston <span class=\"token operator\">=</span> datasets<span class=\"token punctuation\">.</span>load_boston<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\tfeature_name <span class=\"token operator\">=</span> boston<span class=\"token punctuation\">[</span><span class=\"token string\">'feature_names'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\ttrain <span class=\"token operator\">=</span> boston<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\ttarget <span class=\"token operator\">=</span> boston<span class=\"token punctuation\">.</span>target</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\tX_train<span class=\"token punctuation\">,</span>X_test<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">,</span>Y_test <span class=\"token operator\">=</span> train_test_split<span class=\"token punctuation\">(</span>train<span class=\"token punctuation\">,</span>target<span class=\"token punctuation\">,</span>test_size<span class=\"token operator\">=</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">,</span>random_state<span class=\"token operator\">=</span><span class=\"token number\">666</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t<span class=\"token keyword\">return</span> X_train<span class=\"token punctuation\">,</span>X_test<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">,</span>Y_test</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t<span class=\"token comment\"># 0.3 的测试集，0.7 的训练集</span></pre></td></tr></table></figure><h2 id=\"二-lasso回归预测\"><a class=\"anchor\" href=\"#二-lasso回归预测\">#</a> 二、Lasso 回归预测</h2>\n<h4 id=\"1-利用sklearn库进行预测\"><a class=\"anchor\" href=\"#1-利用sklearn库进行预测\">#</a> 1、利用 sklearn 库进行预测</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Lasso_train</span><span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 训练模型</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\tlasso <span class=\"token operator\">=</span> Lasso<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\tlasso<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\tpredict <span class=\"token operator\">=</span> lasso<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token keyword\">return</span> lasso<span class=\"token punctuation\">,</span>predict</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Lasso_draw</span><span class=\"token punctuation\">(</span>Y_test<span class=\"token punctuation\">,</span>Y_predict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>Y_test<span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'Y_True'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>Y_predict<span class=\"token punctuation\">,</span><span class=\"token string\">'r:'</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'Y_Predict'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>X_train<span class=\"token punctuation\">,</span>X_test<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">,</span>Y_test <span class=\"token operator\">=</span> load_dataset<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>lasso<span class=\"token punctuation\">,</span>lasso_predict <span class=\"token operator\">=</span> Lasso_train<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'w='</span><span class=\"token punctuation\">,</span>lasso<span class=\"token punctuation\">.</span>coef_<span class=\"token punctuation\">)</span> <span class=\"token comment\"># w 向量</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b='</span><span class=\"token punctuation\">,</span>lasson<span class=\"token punctuation\">.</span>intercept_<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b 向量</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"训练集得分：&#123;:.2f&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>lasso<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span> Y_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"测试集得分：&#123;:.2f&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>lasso<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">,</span> Y_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>Lasso_draw<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"2-输出图片如下\"><a class=\"anchor\" href=\"#2-输出图片如下\">#</a> 2、输出图片如下：</h4>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/7jDgOP8YyFXIVlL.png\" alt=\"输出图片\" /></p>\n<h2 id=\"三-ridge回归预测\"><a class=\"anchor\" href=\"#三-ridge回归预测\">#</a> 三、Ridge 回归预测</h2>\n<h4 id=\"1-利用sklearn库进行检测\"><a class=\"anchor\" href=\"#1-利用sklearn库进行检测\">#</a> 1、利用 sklearn 库进行检测</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Ridge_train</span><span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 训练模型</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\tridge <span class=\"token operator\">=</span> Ridge<span class=\"token punctuation\">(</span>alpha<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>max_iter<span class=\"token operator\">=</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token comment\"># alpha: 正则化力度，必须是一个浮点整数。正则化提升问题条件，减少估计器的方差</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token comment\"># max_iter: 共轭梯度求解器的最大迭代次数</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tridge<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\tpredict <span class=\"token operator\">=</span> lasso<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token keyword\">return</span> ridge<span class=\"token punctuation\">,</span>predict</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Ridge_draw</span><span class=\"token punctuation\">(</span>Y_test<span class=\"token punctuation\">,</span>Y_predict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>Y_test<span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'Y_True'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>Y_predict<span class=\"token punctuation\">,</span><span class=\"token string\">'r:'</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'Y_Predict'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>X_train<span class=\"token punctuation\">,</span>X_test<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">,</span>Y_test <span class=\"token operator\">=</span> load_dataset<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>Ridge<span class=\"token punctuation\">,</span>Ridge_predict <span class=\"token operator\">=</span> Ridge_train<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'w='</span><span class=\"token punctuation\">,</span>Ridge<span class=\"token punctuation\">.</span>coef_<span class=\"token punctuation\">)</span> <span class=\"token comment\"># w 向量</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b='</span><span class=\"token punctuation\">,</span>Ridge<span class=\"token punctuation\">.</span>intercept_<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b 向量</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"训练集得分：&#123;:.2f&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>Ridge<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span> Y_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"测试集得分：&#123;:.2f&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>Ridge<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">,</span> Y_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>Ridge_draw<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"2-输出图片如下-2\"><a class=\"anchor\" href=\"#2-输出图片如下-2\">#</a> 2、输出图片如下：</h4>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/ybXuQl5EM3pgPk7.png\" alt=\"输出图片\" /></p>\n<h2 id=\"四-linear_regression多元回归预测\"><a class=\"anchor\" href=\"#四-linear_regression多元回归预测\">#</a> 四、Linear_Regression 多元回归预测</h2>\n<h4 id=\"1-利用sklearn库进行检测-2\"><a class=\"anchor\" href=\"#1-利用sklearn库进行检测-2\">#</a> 1、利用 sklearn 库进行检测</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Linear_train</span><span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 训练模型</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\tlinear <span class=\"token operator\">=</span> LinearRegression<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token comment\"># alpha: 正则化力度，必须是一个浮点整数。正则化提升问题条件，减少估计器的方差</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token comment\"># max_iter: 共轭梯度求解器的最大迭代次数</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\tlinear<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\tpredict <span class=\"token operator\">=</span> linear<span class=\"token punctuation\">.</span>predict<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token keyword\">return</span> linear<span class=\"token punctuation\">,</span>predict</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Linear_draw</span><span class=\"token punctuation\">(</span>Y_test<span class=\"token punctuation\">,</span>Y_predict<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>Y_test<span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'Y_True'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>Y_predict<span class=\"token punctuation\">,</span><span class=\"token string\">'r:'</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'Y_Predict'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\tplt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>X_train<span class=\"token punctuation\">,</span>X_test<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">,</span>Y_test <span class=\"token operator\">=</span> load_dataset<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>linear<span class=\"token punctuation\">,</span>linear_predict <span class=\"token operator\">=</span> Linear_train<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span>Y_train<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'w='</span><span class=\"token punctuation\">,</span>linear<span class=\"token punctuation\">.</span>coef_<span class=\"token punctuation\">)</span> <span class=\"token comment\"># w 向量</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'b='</span><span class=\"token punctuation\">,</span>linear<span class=\"token punctuation\">.</span>intercept_<span class=\"token punctuation\">)</span>  <span class=\"token comment\"># b 向量</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"训练集得分：&#123;:.2f&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">(</span>X_train<span class=\"token punctuation\">,</span> Y_train<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"测试集得分：&#123;:.2f&#125;\"</span><span class=\"token punctuation\">.</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>linear<span class=\"token punctuation\">.</span>score<span class=\"token punctuation\">(</span>X_test<span class=\"token punctuation\">,</span> Y_test<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>Linear_draw<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"2-输出图片如下-3\"><a class=\"anchor\" href=\"#2-输出图片如下-3\">#</a> 2、输出图片如下：</h4>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/BFAs2GyvicCwKLa.png\" alt=\"输出图片\" /></p>\n",
            "tags": [
                "机器学习",
                "Python"
            ]
        },
        {
            "id": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8BKMeans%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/",
            "url": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8BKMeans%E8%81%9A%E7%B1%BB%E7%AE%97%E6%B3%95/",
            "title": "机器学习之KMeans聚类算法",
            "date_published": "2023-04-01T05:21:11.000Z",
            "content_html": "<h1 id=\"kmeans聚类算法\"><a class=\"anchor\" href=\"#kmeans聚类算法\">#</a> KMeans 聚类算法</h1>\n<p><span id=\"more\"></span></p>\n<h3 id=\"一-数据集\"><a class=\"anchor\" href=\"#一-数据集\">#</a> 一、数据集</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>k</mi><mi>l</mi><mi>e</mi><mi>a</mi><mi>r</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">sklearn</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">n</span></span></span></span> 库自带了一些数据集，本次<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi><mo>−</mo><mi>m</mi><mi>e</mi><mi>a</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">K-mean</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">n</span></span></span></span> 算法实践就用的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>k</mi><mi>l</mi><mi>e</mi><mi>a</mi><mi>n</mi><mi mathvariant=\"normal\">.</mi><mi>d</mi><mi>a</mi><mi>t</mi><mi>a</mi><mi>s</mi><mi>e</mi><mi>t</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">sklean.datasets</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">n</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">s</span></span></span></span> 的鸢尾花数据集，下面的这张表记录了一些不需要下载的数据集</p>\n<table>\n<thead>\n<tr>\n<th style=\"text-align:center\">导入数据的函数</th>\n<th style=\"text-align:center\">简介</th>\n<th style=\"text-align:center\">任务</th>\n<th style=\"text-align:center\">数据规模</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align:center\">load_boston()</td>\n<td style=\"text-align:center\">加载和返回一个 boston 房屋价格的数据集</td>\n<td style=\"text-align:center\">回归</td>\n<td style=\"text-align:center\">506*13</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">load_iris()</td>\n<td style=\"text-align:center\">加载和返回一个鸢尾花数据集</td>\n<td style=\"text-align:center\">分类</td>\n<td style=\"text-align:center\">150*4</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">load_diabetes()</td>\n<td style=\"text-align:center\">加载和返回一个糖尿病数据集</td>\n<td style=\"text-align:center\">回归</td>\n<td style=\"text-align:center\">442*10</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">load_digits()</td>\n<td style=\"text-align:center\">加载和返回一个手写字数据集</td>\n<td style=\"text-align:center\">分类</td>\n<td style=\"text-align:center\">1797*64</td>\n</tr>\n<tr>\n<td style=\"text-align:center\">load_linnerud()</td>\n<td style=\"text-align:center\">加载和返回一个健身数据集</td>\n<td style=\"text-align:center\">多分类</td>\n<td style=\"text-align:center\">20</td>\n</tr>\n</tbody>\n</table>\n<h3 id=\"二-手写实现k-means算法\"><a class=\"anchor\" href=\"#二-手写实现k-means算法\">#</a> 二、手写实现 K-Means 算法</h3>\n<h4 id=\"1-导入前置库\"><a class=\"anchor\" href=\"#1-导入前置库\">#</a> 1、导入前置库</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> sklearn<span class=\"token punctuation\">.</span>cluster <span class=\"token keyword\">import</span> KMeans </pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">from</span> sklearn <span class=\"token keyword\">import</span> datasets</pre></td></tr></table></figure><h4 id=\"2-导入数据集\"><a class=\"anchor\" href=\"#2-导入数据集\">#</a> 2、导入数据集</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 直接从 sklearn 中获取数据集</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>iris <span class=\"token operator\">=</span> datasets<span class=\"token punctuation\">.</span>load_iris<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>X <span class=\"token operator\">=</span> iris<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">:</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span>    <span class=\"token comment\"># 表示我们取特征空间中的 4 个维度</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">></span> output <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">150</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"3-取前两个维度萼片长度-萼片宽度绘制数据分布图\"><a class=\"anchor\" href=\"#3-取前两个维度萼片长度-萼片宽度绘制数据分布图\">#</a> 3、取前两个维度（萼片长度、萼片宽度）, 绘制数据分布图</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> X<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> c<span class=\"token operator\">=</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span> marker<span class=\"token operator\">=</span><span class=\"token string\">'o'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'see'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>plt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'sepal length'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>plt<span class=\"token punctuation\">.</span>ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'sepal width'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>plt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span>loc<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/26/7zeimPlAwcaIbKL.png\" alt=\"分布图\" /></p>\n<h4 id=\"4-具体算法代码\"><a class=\"anchor\" href=\"#4-具体算法代码\">#</a> 4、具体算法代码</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 计算欧式距离</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">distEclud</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token keyword\">return</span> np<span class=\"token punctuation\">.</span>sqrt<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>x<span class=\"token operator\">-</span>y<span class=\"token punctuation\">)</span><span class=\"token operator\">**</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># 为给定数据集构建一个包含 K 个随机质心 centroids 的集合</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">randCent</span><span class=\"token punctuation\">(</span>dataSet<span class=\"token punctuation\">,</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\tm<span class=\"token punctuation\">,</span>n <span class=\"token operator\">=</span> dataSet<span class=\"token punctuation\">.</span>shape <span class=\"token comment\"># m=150,n=4</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tcentroids <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">,</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># k*4</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 执行 4 次</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\tindex <span class=\"token operator\">=</span> <span class=\"token builtin\">int</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>uniform<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># 产生 0 到 150 的随机数 (即在数据集中随机挑选一个向量作为质心的初始值)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\tcentroids<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> dataSet<span class=\"token punctuation\">[</span>index<span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 把对应的四个维度传给质心的集合</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token keyword\">return</span> centroids</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># k 均值聚类算法</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">KMeans</span><span class=\"token punctuation\">(</span>dataSet<span class=\"token punctuation\">,</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\tm <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">(</span>dataSet<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 行数 150</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t<span class=\"token comment\"># 第一列存每个样本属于哪一个簇</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token comment\"># 第二列存每个样本到簇中心的误差</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>\tclusterAssment <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>mat<span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\"># mat () 创建 150*2 的矩阵</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>\tclusterChange <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t<span class=\"token comment\">#1、初始化质心 centroids</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\tcentroids <span class=\"token operator\">=</span> randCent<span class=\"token punctuation\">(</span>dataSet<span class=\"token punctuation\">,</span>k<span class=\"token punctuation\">)</span> <span class=\"token comment\"># k*4</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t<span class=\"token keyword\">while</span> clusterChange<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>\t\t<span class=\"token comment\"># 样本所属簇不再更新时停止迭代</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>\t\tclusterChange <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t\t<span class=\"token comment\">#遍历所有的样本 (行数 150)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\t\t<span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>m<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>\t\t\tminDist <span class=\"token operator\">=</span> <span class=\"token number\">1000000.0</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t\t\tminIndex <span class=\"token operator\">=</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>\t\t\t<span class=\"token comment\"># 遍历所有质心</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>\t\t\t<span class=\"token comment\"># 2、找出最近的质心</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>\t\t\t<span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>\t\t\t\t<span class=\"token comment\"># 计算每个样本到 k 个质心的距离</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>\t\t\t\tdistance <span class=\"token operator\">=</span> disEclud<span class=\"token punctuation\">(</span>centroids<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>dataSet<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t\t\t\t<span class=\"token keyword\">if</span> distance <span class=\"token operator\">&lt;</span> minDist<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\t\t\t\t\tminDist <span class=\"token operator\">=</span> distance</pre></td></tr><tr><td data-num=\"36\"></td><td><pre>\t\t\t\t\tminIndex <span class=\"token operator\">=</span> j</pre></td></tr><tr><td data-num=\"37\"></td><td><pre>\t\t\t<span class=\"token comment\"># 3、更新该行样本的所属的簇</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>\t\t\t<span class=\"token keyword\">if</span> clusterAssment<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> minIndex<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>\t\t\t\tclusterChange <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>\t\t\t\tclusterAssment<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> minIndex<span class=\"token punctuation\">,</span>minDist<span class=\"token operator\">**</span><span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>\t\t<span class=\"token comment\"># 更新质心</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>\t\t<span class=\"token keyword\">for</span> j <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>\t\t\t<span class=\"token comment\"># np.nonzero (x) 返回值不为零的元素的下标，它的返回值是一个长度为 x.ndim (x 的轴数) 的元组</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>            <span class=\"token comment\"># 元组的每个元素都是一个整数数组，其值为非零元素的下标在对应轴上的值。</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>            <span class=\"token comment\"># 矩阵名.A 代表将 矩阵转化为 array 数组类型</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>            </pre></td></tr><tr><td data-num=\"47\"></td><td><pre>            <span class=\"token comment\"># 这里取矩阵 clusterAssment 所有行的第一列，转为一个 array 数组，与 j（簇类标签值）比较，返回 true or false</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>            <span class=\"token comment\"># 通过 np.nonzero 产生一个 array，其中是对应簇类所有的点的下标值（x 个）</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>            <span class=\"token comment\"># 再用这些下标值求出 dataSet 数据集中的对应行，保存为 pointsInCluster（x*4）</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>            pointsInCluster <span class=\"token operator\">=</span> dataSet<span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>nonzero<span class=\"token punctuation\">(</span>clusterAssment<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>A <span class=\"token operator\">==</span> j<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># 获取对应簇类所有的点（x*4）</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>            centroids<span class=\"token punctuation\">[</span>j<span class=\"token punctuation\">,</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>mean<span class=\"token punctuation\">(</span>pointsInCluster<span class=\"token punctuation\">,</span>axis<span class=\"token operator\">=</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>   <span class=\"token comment\"># 求均值，产生新的质心</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>            <span class=\"token comment\"># axis=0，那么输出是 1 行 4 列，求的是 pointsInCluster 每一列的平均值，即 axis 是几，那就表明哪一维度被压缩成 1</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"cluster complete\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>\t<span class=\"token keyword\">return</span> centroids<span class=\"token punctuation\">,</span>clusterAssment</pre></td></tr><tr><td data-num=\"55\"></td><td><pre></pre></td></tr><tr><td data-num=\"56\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">,</span>center<span class=\"token punctuation\">,</span>assment<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    length<span class=\"token operator\">=</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>center<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>    fig<span class=\"token operator\">=</span>plt<span class=\"token punctuation\">.</span>figure</pre></td></tr><tr><td data-num=\"59\"></td><td><pre>    data1<span class=\"token operator\">=</span>data<span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>nonzero<span class=\"token punctuation\">(</span>assment<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>A <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>    data2<span class=\"token operator\">=</span>data<span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>nonzero<span class=\"token punctuation\">(</span>assment<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>A <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>    data3<span class=\"token operator\">=</span>data<span class=\"token punctuation\">[</span>np<span class=\"token punctuation\">.</span>nonzero<span class=\"token punctuation\">(</span>assment<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>A <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token comment\"># 选取前两个维度绘制原始数据的散点图</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>data1<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>data1<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>c<span class=\"token operator\">=</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span>marker<span class=\"token operator\">=</span><span class=\"token string\">'o'</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'label0'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>data2<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>data2<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>c<span class=\"token operator\">=</span><span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span> marker<span class=\"token operator\">=</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'label1'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>data3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>data3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>c<span class=\"token operator\">=</span><span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> marker<span class=\"token operator\">=</span><span class=\"token string\">'+'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'label2'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>    <span class=\"token comment\"># 绘制簇的质心点</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>        plt<span class=\"token punctuation\">.</span>annotate<span class=\"token punctuation\">(</span><span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>xy<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>center<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>center<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>xytext<span class=\"token operator\">=</span>\\</pre></td></tr><tr><td data-num=\"69\"></td><td><pre>        <span class=\"token punctuation\">(</span>center<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>center<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>arrowprops<span class=\"token operator\">=</span><span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span>facecolor<span class=\"token operator\">=</span><span class=\"token string\">'yellow'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>        <span class=\"token comment\">#  plt.annotate('center',xy=(center[i,0],center[i,1]),xytext=\\</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>        <span class=\"token comment\"># (center[i,0]+1,center[i,1]+1),arrowprops=dict(facecolor='red'))</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token comment\"># 选取后两个维度绘制原始数据的散点图</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>data1<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>data1<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>c<span class=\"token operator\">=</span><span class=\"token string\">\"red\"</span><span class=\"token punctuation\">,</span>marker<span class=\"token operator\">=</span><span class=\"token string\">'o'</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'label0'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>data2<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>data2<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>c<span class=\"token operator\">=</span><span class=\"token string\">\"green\"</span><span class=\"token punctuation\">,</span> marker<span class=\"token operator\">=</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'label1'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>data3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>data3<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>c<span class=\"token operator\">=</span><span class=\"token string\">\"blue\"</span><span class=\"token punctuation\">,</span> marker<span class=\"token operator\">=</span><span class=\"token string\">'+'</span><span class=\"token punctuation\">,</span> label<span class=\"token operator\">=</span><span class=\"token string\">'label2'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    <span class=\"token comment\"># 绘制簇的质心点</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        plt<span class=\"token punctuation\">.</span>annotate<span class=\"token punctuation\">(</span><span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>xy<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span>center<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>center<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>xytext<span class=\"token operator\">=</span>\\</pre></td></tr><tr><td data-num=\"81\"></td><td><pre>        <span class=\"token punctuation\">(</span>center<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span>center<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>arrowprops<span class=\"token operator\">=</span><span class=\"token builtin\">dict</span><span class=\"token punctuation\">(</span>facecolor<span class=\"token operator\">=</span><span class=\"token string\">'yellow'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>dataSet <span class=\"token operator\">=</span> X</pre></td></tr><tr><td data-num=\"85\"></td><td><pre>k <span class=\"token operator\">=</span> <span class=\"token number\">3</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>centroids<span class=\"token punctuation\">,</span>clusterAssment <span class=\"token operator\">=</span> KMeans<span class=\"token punctuation\">(</span>dataSet<span class=\"token punctuation\">,</span>k<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>draw<span class=\"token punctuation\">(</span>dataSet<span class=\"token punctuation\">,</span>centroids<span class=\"token punctuation\">,</span>clusterAssment<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"5-结果截图\"><a class=\"anchor\" href=\"#5-结果截图\">#</a> 5、结果截图：</h4>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/PNy6Ze4rK5hcDAq.png\" alt=\"结果截图1\" /></p>\n<h3 id=\"三-利用sklearn的库进行k-means算法\"><a class=\"anchor\" href=\"#三-利用sklearn的库进行k-means算法\">#</a> 三、利用 sklearn 的库进行 K-Means 算法</h3>\n<p>前置库和数据的导入和手写板是一样的，区别在于后面具体算法实现</p>\n<h4 id=\"1-具体算法代码\"><a class=\"anchor\" href=\"#1-具体算法代码\">#</a> 1、具体算法代码</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">Model</span><span class=\"token punctuation\">(</span>n_clusters<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    estimator <span class=\"token operator\">=</span> KMeans<span class=\"token punctuation\">(</span>n_clusters<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 构造聚类器</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token keyword\">return</span> estimator</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">train</span><span class=\"token punctuation\">(</span>estimator<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    estimator<span class=\"token punctuation\">.</span>fit<span class=\"token punctuation\">(</span>X<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 训练模型</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>estimator<span class=\"token operator\">=</span>Model<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>train<span class=\"token punctuation\">(</span>estimator<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 画出分类结果</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>label_pred <span class=\"token operator\">=</span> estimator<span class=\"token punctuation\">.</span>labels_ <span class=\"token comment\">#获取聚类标签</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># 绘制 k-means 结果</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>x0 <span class=\"token operator\">=</span> X<span class=\"token punctuation\">[</span>label_pred <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>x1 <span class=\"token operator\">=</span> X<span class=\"token punctuation\">[</span>label_pred <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>x2 <span class=\"token operator\">=</span> X<span class=\"token punctuation\">[</span>label_pred <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>x0<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>x0<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>c<span class=\"token operator\">=</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">,</span>marker<span class=\"token operator\">=</span><span class=\"token string\">'o'</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'label0'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>x1<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>x1<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>c<span class=\"token operator\">=</span><span class=\"token string\">'green'</span><span class=\"token punctuation\">,</span>marker<span class=\"token operator\">=</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'label1'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>x2<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>x2<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>c<span class=\"token operator\">=</span><span class=\"token string\">'blue'</span><span class=\"token punctuation\">,</span>marker<span class=\"token operator\">=</span><span class=\"token string\">'+'</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'label2'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>plt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'seqal length'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>plt<span class=\"token punctuation\">.</span>ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'seqal length'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>plt<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span>loc<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"2-结果截图\"><a class=\"anchor\" href=\"#2-结果截图\">#</a> 2、结果截图：</h4>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/spWV8KOIfTexMA2.png\" alt=\"结果图片\" /></p>\n<h3 id=\"四-不同k值结果对比\"><a class=\"anchor\" href=\"#四-不同k值结果对比\">#</a> 四、不同 k 值结果对比</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> 值为 2:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/fulU96CZBMNbsyE.png\" alt=\"k值为2\" /></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> 值为 3:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/spWV8KOIfTexMA2.png\" alt=\"k值为3\" /></p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>K</mi></mrow><annotation encoding=\"application/x-tex\">K</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">K</span></span></span></span> 值为 4:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/fZp4aMkJg8UzKnR.png\" alt=\"k值为4\" /></p>\n",
            "tags": [
                "机器学习",
                "Python"
            ]
        },
        {
            "id": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%96%87%E6%9C%AC%E8%AF%8D%E9%A2%91%E5%88%86%E6%9E%90/",
            "url": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%96%87%E6%9C%AC%E8%AF%8D%E9%A2%91%E5%88%86%E6%9E%90/",
            "title": "机器学习之文本词频分析",
            "date_published": "2023-03-28T08:26:10.000Z",
            "content_html": "<h1 id=\"文本词频分析\"><a class=\"anchor\" href=\"#文本词频分析\">#</a> 文本词频分析</h1>\n<p><span id=\"more\"></span></p>\n<h3 id=\"一-前置库\"><a class=\"anchor\" href=\"#一-前置库\">#</a> 一、前置库</h3>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi><mi>i</mi><mi>e</mi><mi>b</mi><mi>a</mi></mrow><annotation encoding=\"application/x-tex\">jieba</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">a</span></span></span></span> 库</p>\n<h3 id=\"二-词频分析代码及结果\"><a class=\"anchor\" href=\"#二-词频分析代码及结果\">#</a> 二、词频分析代码及结果</h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> jieba</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>\t<span class=\"token keyword\">with</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:/Users/asus/Desktop/test.txt'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'UTF-8'</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">as</span> novelFile<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    novel <span class=\"token operator\">=</span> novelFile<span class=\"token punctuation\">.</span>read<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>stopwords <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>line<span class=\"token punctuation\">.</span>strip<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">for</span> line <span class=\"token keyword\">in</span> <span class=\"token builtin\">open</span><span class=\"token punctuation\">(</span><span class=\"token string\">'C:/Users/asus/Desktop/stopword.txt'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">,</span>encoding<span class=\"token operator\">=</span><span class=\"token string\">'UTF-8'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>readlines<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>novelList <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>jieba<span class=\"token punctuation\">.</span>lcut<span class=\"token punctuation\">(</span>novel<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>novelDict <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># 统计出词频字典</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">for</span> word <span class=\"token keyword\">in</span> novelList<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">if</span> word <span class=\"token keyword\">not</span> <span class=\"token keyword\">in</span> stopwords<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token comment\"># 不统计字数为一的词</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">continue</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>            novelDict<span class=\"token punctuation\">[</span>word<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> novelDict<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>word<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># 对词频进行排序</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>novelListSorted <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>novelDict<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>novelListSorted<span class=\"token punctuation\">.</span>sort<span class=\"token punctuation\">(</span>key<span class=\"token operator\">=</span><span class=\"token keyword\">lambda</span> e<span class=\"token punctuation\">:</span> e<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>reverse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># 打印前 10 词频</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>topWordNum <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">for</span> topWordTup <span class=\"token keyword\">in</span> novelListSorted<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>topWordTup<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>输出结果如下：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/oKQDvp2HA78yhPr.png\" alt=\"词频结果\" /></p>\n<p>这一段是输出词频统计图的代码</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> matplotlib <span class=\"token keyword\">import</span> pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>x <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>c <span class=\"token keyword\">for</span> c<span class=\"token punctuation\">,</span>v <span class=\"token keyword\">in</span> novelListSorted<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>y <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>v <span class=\"token keyword\">for</span> c<span class=\"token punctuation\">,</span>v <span class=\"token keyword\">in</span> novelListSorted<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/26/8NEutR96Unx4JC7.png\" alt=\"词频图\" /></p>\n<p>使用的文章和分词文本如下:</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL250bXlkYi9ibG9nX3Byb2ZpbGUvYmxvYi9tYWluL3Rlc3QudHh0\">test.txt</span>&lt;br/&gt;<br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9naXRodWIuY29tL250bXlkYi9ibG9nX3Byb2ZpbGUvYmxvYi9tYWluL3N0b3B3b3JkLnR4dA==\">stopwords.txt</span></p>\n",
            "tags": [
                "机器学习",
                "Python"
            ]
        },
        {
            "id": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E7%AE%80%E5%8D%95%E8%AE%A1%E7%AE%97%E5%99%A8%E5%AE%9E%E7%8E%B0/",
            "url": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E7%AE%80%E5%8D%95%E8%AE%A1%E7%AE%97%E5%99%A8%E5%AE%9E%E7%8E%B0/",
            "title": "机器学习之简单计算器实现",
            "date_published": "2023-03-26T10:45:40.000Z",
            "content_html": "<h1 id=\"简单计算器的实现\"><a class=\"anchor\" href=\"#简单计算器的实现\">#</a> 简单计算器的实现</h1>\n<p><span id=\"more\"></span></p>\n<p>本篇更像是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mi>y</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">Python</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span></span></span></span> 的实践学习，也是数据处理学习的深入，把不是我们需要的格式处理成我们需要的格式</p>\n<p>计算器可以抽样出几个函数出来</p>\n<ul>\n<li>\n<p>弹栈时计算两个数字和运算符组成的算式结果的函数</p>\n</li>\n<li>\n<p>判断元素是数字还是运算符的函数</p>\n</li>\n<li>\n<p>把算式处理成列表形式的函数，如 '-1-2*((-2+3)+(-2/2))' 要处理成 ['-1','-','2','*','(','(','-2','+','3',')','+','(','-2','/','2',')',')']</p>\n</li>\n<li>\n<p>决策函数，决定应该是入栈，弹栈运算，还是弹栈丢弃</p>\n</li>\n<li>\n<p>主函数，遍历算式列表，计算最终结果</p>\n</li>\n</ul>\n<h2 id=\"一-所需要使用的库\"><a class=\"anchor\" href=\"#一-所需要使用的库\">#</a> 一、所需要使用的库</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> re</pre></td></tr></table></figure><h2 id=\"二-代码以及结果\"><a class=\"anchor\" href=\"#二-代码以及结果\">#</a> 二、代码以及结果</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 这部分用于计算器的具体计算功能实现</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">caculate</span><span class=\"token punctuation\">(</span>n1<span class=\"token punctuation\">,</span>n2<span class=\"token punctuation\">,</span>operator<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token comment\"># n1:float</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token comment\"># n2:float</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token comment\"># operator: + - * /</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token comment\"># return float</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\tresult <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token keyword\">if</span> operator <span class=\"token operator\">==</span> <span class=\"token string\">\"+\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t\t<span class=\"token keyword\">return</span> n1 <span class=\"token operator\">+</span> n2</pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token keyword\">if</span> operator <span class=\"token operator\">==</span> <span class=\"token string\">\"-\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t\t<span class=\"token keyword\">return</span> n1 <span class=\"token operator\">-</span> n2</pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token keyword\">if</span> operator <span class=\"token operator\">==</span> <span class=\"token string\">\"*\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>\t\t<span class=\"token keyword\">return</span> n1<span class=\"token operator\">*</span>n2</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t<span class=\"token keyword\">if</span> operator <span class=\"token operator\">==</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>\t\t<span class=\"token keyword\">return</span> n1<span class=\"token operator\">/</span>n2</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>\t<span class=\"token keyword\">return</span> result</pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># 这部分判断是否是运算符，如果是就返回 True 否则就返回 False</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">is_operator</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t<span class=\"token comment\"># e: str</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>\t<span class=\"token comment\"># return bool</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>\topers <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'+'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'-'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'('</span><span class=\"token punctuation\">,</span><span class=\"token string\">')'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t<span class=\"token keyword\">return</span> <span class=\"token boolean\">True</span> <span class=\"token keyword\">if</span> e <span class=\"token keyword\">in</span> opers <span class=\"token keyword\">else</span> <span class=\"token boolean\">False</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># 将算式处理成列表，解决 '-' 是负数还是列表</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">formula_format</span><span class=\"token punctuation\">(</span>formula<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>\t<span class=\"token comment\"># 去掉算式中的空格</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>\tformula <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>sub<span class=\"token punctuation\">(</span><span class=\"token string\">' '</span><span class=\"token punctuation\">,</span><span class=\"token string\">''</span><span class=\"token punctuation\">,</span>formula<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>\t<span class=\"token comment\"># 以 ' 横杠 + 数字 ' 分割，其中正则表达式：(\\-\\d+\\.?\\d*) 括号内：</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>\t<span class=\"token comment\"># \\- 表示匹配横杠开头； \\d+ 表示匹配数字 1 次或多次；\\.? 表示匹配小数点 0 次或 1 次；\\d * 表示匹配数字 1 次或多次。</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>\tformula_list <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>i <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> re<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">'(\\-\\d+\\.?\\d*)'</span><span class=\"token punctuation\">,</span>formula<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> i<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>\t<span class=\"token comment\"># 最终算式列表</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>\tfinal_formula <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>\t<span class=\"token keyword\">for</span> item <span class=\"token keyword\">in</span> formula_list<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>\t\t<span class=\"token comment\">#第一个是以横杠开头的数字（包括小数）final_formula, 即第一个是负数，横杠就不是减号</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>\t\t<span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>final_formula<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span> <span class=\"token keyword\">and</span> re<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">(</span><span class=\"token string\">'^\\-\\d+\\.?\\d*$'</span><span class=\"token punctuation\">,</span>item<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>\t\t\tfinal_formula<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>\t\t\t<span class=\"token keyword\">continue</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>\t\t<span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>final_formula<span class=\"token punctuation\">)</span> <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>\t\t\t<span class=\"token comment\">#如果 final_formal 最后一个运算符 ['+', '-', '*', '/', '('], 则横杠数组不是负数</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>\t\t\t<span class=\"token keyword\">if</span> re<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">(</span><span class=\"token string\">'[\\+\\-\\*\\/\\(]$'</span><span class=\"token punctuation\">,</span>final_formal<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>\t\t\t\tfinal_formula<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre>\t\t\t\t<span class=\"token keyword\">continue</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre>\t\t<span class=\"token comment\"># 按照运算符分割开</span></pre></td></tr><tr><td data-num=\"43\"></td><td><pre>\t\titem_split <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>i <span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> re<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">'([\\+\\-\\*\\/\\(\\)])'</span><span class=\"token punctuation\">,</span>item<span class=\"token punctuation\">)</span> <span class=\"token keyword\">if</span> i<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>\t\tfinal_formula <span class=\"token operator\">+=</span> item_split</pre></td></tr><tr><td data-num=\"45\"></td><td><pre>\t<span class=\"token keyword\">return</span> final_formula</pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">decision</span><span class=\"token punctuation\">(</span>tail_op<span class=\"token punctuation\">,</span> now_op<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    <span class=\"token comment\"># tail_op: 运算符栈的最后一个运算符</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    <span class=\"token comment\"># now_op: 从算式列表取出的当前运算符</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token comment\"># return: 1 代表弹栈运算，0 代表弹运算符栈最后一个元素， -1 表示入栈</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token comment\"># 定义 4 种运算符级别</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    rate1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'+'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>    rate2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'/'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>    rate3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'('</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>    rate4 <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">')'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre> </pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token keyword\">if</span> tail_op <span class=\"token keyword\">in</span> rate1<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>        <span class=\"token keyword\">if</span> now_op <span class=\"token keyword\">in</span> rate2 <span class=\"token keyword\">or</span> now_op <span class=\"token keyword\">in</span> rate3<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre>            <span class=\"token comment\"># 说明连续两个运算优先级不一样，需要入栈</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"60\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre> </pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token keyword\">elif</span> tail_op <span class=\"token keyword\">in</span> rate2<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre>        <span class=\"token keyword\">if</span> now_op <span class=\"token keyword\">in</span> rate3<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre> </pre></td></tr><tr><td data-num=\"69\"></td><td><pre>    <span class=\"token keyword\">elif</span> tail_op <span class=\"token keyword\">in</span> rate3<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre>        <span class=\"token keyword\">if</span> now_op <span class=\"token keyword\">in</span> rate4<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token number\">0</span>   <span class=\"token comment\"># (遇上) 需要弹出 (，丢掉 )</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span>  <span class=\"token comment\"># 只要栈顶元素为 (，当前元素不是) 都应入栈。</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre>    <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre>        <span class=\"token keyword\">return</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"76\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">final_calc</span><span class=\"token punctuation\">(</span>formula_list<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"77\"></td><td><pre>    num_stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>       <span class=\"token comment\"># 数字栈</span></pre></td></tr><tr><td data-num=\"78\"></td><td><pre>    op_stack <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>        <span class=\"token comment\"># 运算符栈</span></pre></td></tr><tr><td data-num=\"79\"></td><td><pre>    <span class=\"token keyword\">for</span> e <span class=\"token keyword\">in</span> formula_list<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"80\"></td><td><pre>        operator <span class=\"token operator\">=</span> is_operator<span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"81\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> operator<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"82\"></td><td><pre>            <span class=\"token comment\"># 压入数字栈</span></pre></td></tr><tr><td data-num=\"83\"></td><td><pre>            <span class=\"token comment\"># 字符串转换为符点数</span></pre></td></tr><tr><td data-num=\"84\"></td><td><pre>            num_stack<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token builtin\">float</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"85\"></td><td><pre>        <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"86\"></td><td><pre>            <span class=\"token comment\"># 如果是运算符</span></pre></td></tr><tr><td data-num=\"87\"></td><td><pre>            <span class=\"token keyword\">while</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"88\"></td><td><pre>                <span class=\"token comment\"># 如果运算符栈等于 0 无条件入栈</span></pre></td></tr><tr><td data-num=\"89\"></td><td><pre>                <span class=\"token keyword\">if</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>op_stack<span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"90\"></td><td><pre>                    op_stack<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"91\"></td><td><pre>                    <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"92\"></td><td><pre> </pre></td></tr><tr><td data-num=\"93\"></td><td><pre>                <span class=\"token comment\"># decision 函数做决策</span></pre></td></tr><tr><td data-num=\"94\"></td><td><pre>                tag <span class=\"token operator\">=</span> decision<span class=\"token punctuation\">(</span>op_stack<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"95\"></td><td><pre>                <span class=\"token keyword\">if</span> tag <span class=\"token operator\">==</span> <span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"96\"></td><td><pre>                    <span class=\"token comment\"># 如果是 - 1 压入运算符栈进入下一次循环</span></pre></td></tr><tr><td data-num=\"97\"></td><td><pre>                    op_stack<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"98\"></td><td><pre>                    <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"99\"></td><td><pre>                <span class=\"token keyword\">elif</span> tag <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"100\"></td><td><pre>                    <span class=\"token comment\"># 如果是 0 弹出运算符栈内最后一个 (, 丢掉当前)，进入下一次循环</span></pre></td></tr><tr><td data-num=\"101\"></td><td><pre>                    op_stack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"102\"></td><td><pre>                    <span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"103\"></td><td><pre>                <span class=\"token keyword\">elif</span> tag <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"104\"></td><td><pre>                    <span class=\"token comment\"># 如果是 1 弹出运算符栈内最后两个元素，弹出数字栈最后两位元素。</span></pre></td></tr><tr><td data-num=\"105\"></td><td><pre>                    op <span class=\"token operator\">=</span> op_stack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"106\"></td><td><pre>                    num2 <span class=\"token operator\">=</span> num_stack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"107\"></td><td><pre>                    num1 <span class=\"token operator\">=</span> num_stack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"108\"></td><td><pre>                    <span class=\"token comment\"># 执行计算</span></pre></td></tr><tr><td data-num=\"109\"></td><td><pre>                    <span class=\"token comment\"># 计算之后压入数字栈</span></pre></td></tr><tr><td data-num=\"110\"></td><td><pre>                    num_stack<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>calculate<span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">,</span> op<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"111\"></td><td><pre>    <span class=\"token comment\"># 处理大循环结束后 数字栈和运算符栈中可能还有元素 的情况</span></pre></td></tr><tr><td data-num=\"112\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>op_stack<span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"113\"></td><td><pre>        op <span class=\"token operator\">=</span> op_stack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"114\"></td><td><pre>        num2 <span class=\"token operator\">=</span> num_stack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"115\"></td><td><pre>        num1 <span class=\"token operator\">=</span> num_stack<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"116\"></td><td><pre>        num_stack<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span>calculate<span class=\"token punctuation\">(</span>num1<span class=\"token punctuation\">,</span> num2<span class=\"token punctuation\">,</span> op<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"117\"></td><td><pre> </pre></td></tr><tr><td data-num=\"118\"></td><td><pre>    <span class=\"token keyword\">return</span> num_stack<span class=\"token punctuation\">,</span> op_stack</pre></td></tr><tr><td data-num=\"119\"></td><td><pre><span class=\"token keyword\">if</span> __name__ <span class=\"token operator\">==</span> <span class=\"token string\">'__main__'</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"120\"></td><td><pre>    formula <span class=\"token operator\">=</span> <span class=\"token builtin\">input</span><span class=\"token punctuation\">(</span><span class=\"token string\">'请输入：\\n'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"121\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"算式：\"</span><span class=\"token punctuation\">,</span> formula<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"122\"></td><td><pre>    formula_list <span class=\"token operator\">=</span> formula_format<span class=\"token punctuation\">(</span>formula<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"123\"></td><td><pre>    result<span class=\"token punctuation\">,</span> _ <span class=\"token operator\">=</span> final_calc<span class=\"token punctuation\">(</span>formula_list<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"124\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"计算结果：\"</span><span class=\"token punctuation\">,</span> result<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h2 id=\"三-结果图示\"><a class=\"anchor\" href=\"#三-结果图示\">#</a> 三、结果图示：</h2>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/uEyhpTZxvsj8KBG.png\" alt=\"效果图\" /></p>\n",
            "tags": [
                "机器学习",
                "Python"
            ]
        },
        {
            "id": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%B5%B7%E9%87%8F%E6%96%87%E4%BB%B6%E9%81%8D%E5%8E%86/",
            "url": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E6%B5%B7%E9%87%8F%E6%96%87%E4%BB%B6%E9%81%8D%E5%8E%86/",
            "title": "机器学习之海量文件遍历",
            "date_published": "2023-03-26T08:25:36.000Z",
            "content_html": "<h1 id=\"海量文件遍历\"><a class=\"anchor\" href=\"#海量文件遍历\">#</a> 海量文件遍历</h1>\n<p><span id=\"more\"></span></p>\n<p>机器学习往往需要大量的数据来训练模型，因此对数据的处理肯定是不能少的，而数据往往很多，大多数以压缩文件.zip 出现的，所以本篇记录文件遍历的方法</p>\n<h2 id=\"一-所需要调用的库\"><a class=\"anchor\" href=\"#一-所需要调用的库\">#</a> 一、所需要调用的库</h2>\n<ul>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi><mi>i</mi><mi>p</mi><mi>f</mi><mi>i</mi><mi>l</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">zipfile</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">e</span></span></span></span> 库</p>\n</li>\n<li>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>o</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">os</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">s</span></span></span></span> 库</p>\n</li>\n</ul>\n<h2 id=\"二-具体代码-注释及效果图\"><a class=\"anchor\" href=\"#二-具体代码-注释及效果图\">#</a> 二、具体代码、注释及效果图</h2>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> zipfile</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">unzip_data</span><span class=\"token punctuation\">(</span>src_path<span class=\"token punctuation\">,</span>target_path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#解压原始数据集，将 src_path 路径下的 zip 压缩包解压到 target_path 目录下</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">not</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>isdir<span class=\"token punctuation\">(</span>target_path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\">#os.path.isdir (path) 判断 path 路径是否是一个目录</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        z <span class=\"token operator\">=</span> zipfile<span class=\"token punctuation\">.</span>ZipFile<span class=\"token punctuation\">(</span>src_path<span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        z<span class=\"token punctuation\">.</span>extractall<span class=\"token punctuation\">(</span>path<span class=\"token operator\">=</span>target_path<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        z<span class=\"token punctuation\">.</span>close<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>unzip_data<span class=\"token punctuation\">(</span><span class=\"token string\">'data/data00001/test_data.zip'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'data/data00001/test_data'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>unzip_data<span class=\"token punctuation\">(</span><span class=\"token string\">'data/data00001/train_data.zip'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'data/data00001/train_data'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>执行这一段代码后效果如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/SWq8yZKuiRQwOU9.png\" alt=\"生效前图\" /><br />\n<img data-src=\"https://s2.loli.net/2023/10/26/8dR194MXqQKwOyF.png\" alt=\"生效后图\" /></p>\n<p>点开这两个文件夹，可以发现压缩文件的内容已经被解压到这两个文件夹里了</p>\n<p>下面是通过指定目录，统计所有的不同文件类型及占用内存的代码</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> os</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>size_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>type_dict <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">get_size_type</span><span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    files <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>listdir<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 返回目录文件夹中所有文件名或文件夹的列表</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">for</span> filename <span class=\"token keyword\">in</span> files<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        temp_path <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span>filename<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 构建绝对路径</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token keyword\">if</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>isdir<span class=\"token punctuation\">(</span>temp_path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\">#如果这是一个文件夹，那么递归解析这个文件夹</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>            get_size_type<span class=\"token punctuation\">(</span>temp_path<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">elif</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>isfile<span class=\"token punctuation\">(</span>temp_path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">#如果这是一个文件</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>            type_name <span class=\"token operator\">=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>splitext<span class=\"token punctuation\">(</span>temp_path<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span> <span class=\"token comment\">#分离文件名和扩展名，返回的是有两个元素的列表，放着分建名和扩展名</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> type_name<span class=\"token punctuation\">:</span> <span class=\"token comment\">#如果这个文件没有扩展名</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>                type_dict<span class=\"token punctuation\">.</span>setdefault<span class=\"token punctuation\">(</span><span class=\"token string\">\"None\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>                type_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"None\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>                size_dict<span class=\"token punctuation\">.</span>setdefault<span class=\"token punctuation\">(</span><span class=\"token string\">\"None\"</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>                size_dict<span class=\"token punctuation\">[</span><span class=\"token string\">\"None\"</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>getsize<span class=\"token punctuation\">(</span>temp_path<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>  <span class=\"token comment\">#如果有扩展名</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                type_dict<span class=\"token punctuation\">.</span>setdefault<span class=\"token punctuation\">(</span>type_name<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>                type_dict<span class=\"token punctuation\">[</span>type_name<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>                size_dict<span class=\"token punctuation\">.</span>setdefault<span class=\"token punctuation\">(</span>type_name<span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>                size_dict<span class=\"token punctuation\">[</span>type_name<span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> os<span class=\"token punctuation\">.</span>path<span class=\"token punctuation\">.</span>getsize<span class=\"token punctuation\">(</span>temp_path<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>path <span class=\"token operator\">=</span> <span class=\"token string\">\"data/\"</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>get_size_type<span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token keyword\">for</span> each_type <span class=\"token keyword\">in</span> type_dict<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token keyword\">print</span> <span class=\"token punctuation\">(</span><span class=\"token string\">\"%5s下共有【%5s】的文件【%5d】个,占用内存【%7.2f】MB\"</span> <span class=\"token operator\">%</span>     </pre></td></tr><tr><td data-num=\"26\"></td><td><pre>            <span class=\"token punctuation\">(</span>path<span class=\"token punctuation\">,</span>each_type<span class=\"token punctuation\">,</span>type_dict<span class=\"token punctuation\">[</span>each_type<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\\</pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            size_dict<span class=\"token punctuation\">[</span>each_type<span class=\"token punctuation\">]</span><span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token operator\">*</span><span class=\"token number\">1024</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"总文件数：【%d】\"</span><span class=\"token operator\">%</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>type_dict<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>    </pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"总内存大小：【%.2f】GB\"</span><span class=\"token operator\">%</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span>size_dict<span class=\"token punctuation\">.</span>values<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token punctuation\">(</span><span class=\"token number\">1024</span><span class=\"token operator\">**</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>输出结果如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/37j5F6eUTWmqkXa.png\" alt=\"输出结果\" /></p>\n",
            "tags": [
                "机器学习",
                "Python"
            ]
        },
        {
            "id": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8BPython%E7%B9%81%E6%9D%82%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/",
            "url": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8BPython%E7%B9%81%E6%9D%82%E5%BA%93%E7%9A%84%E4%BD%BF%E7%94%A8/",
            "title": "机器学习之Python繁杂库的使用",
            "date_published": "2023-03-22T08:41:37.000Z",
            "content_html": "<h1 id=\"python机器学习常用库的使用\"><a class=\"anchor\" href=\"#python机器学习常用库的使用\">#</a> Python 机器学习常用库的使用</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-numpy库\"><a class=\"anchor\" href=\"#一-numpy库\">#</a> 一、Numpy 库</h2>\n<h4 id=\"1-array函数创建数组对象\"><a class=\"anchor\" href=\"#1-array函数创建数组对象\">#</a> 1、array 函数创建数组对象</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>arr1 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>dtype<span class=\"token operator\">=</span><span class=\"token string\">'float'</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#创建一个一维数组，其数据类型为 float</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr1<span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>arr2 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#创建一个二维数组</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>arr2<span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">5</span> <span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"2-通过arange-linspace函数创建等差数组对象\"><a class=\"anchor\" href=\"#2-通过arange-linspace函数创建等差数组对象\">#</a> 2、通过 arange、linspace 函数创建等差数组对象</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>∙</mo></mrow><annotation encoding=\"application/x-tex\">\\bullet</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"></span><span class=\"mord\">∙</span></span></span></span> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>a</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>g</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">arrage</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span></span></span></span> 函数语法格式：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>p</mi><mi mathvariant=\"normal\">.</mi><mi>a</mi><mi>r</mi><mi>r</mi><mi>a</mi><mi>n</mi><mi>g</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo separator=\"true\">,</mo><mi>e</mi><mi>n</mi><mi>d</mi><mo separator=\"true\">,</mo><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>t</mi><mi>y</mi><mi>p</mi><mi>e</mi><mo>=</mo><mi>N</mi><mi>o</mi><mi>n</mi><mi>e</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">np.arrange(start,end,step,dtype=None)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">p</span><span class=\"mord\">.</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">N</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">e</span><span class=\"mclose\">)</span></span></span></span> 左闭右开区间</p>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>∙</mo></mrow><annotation encoding=\"application/x-tex\">\\bullet</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"></span><span class=\"mord\">∙</span></span></span></span> <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>i</mi><mi>n</mi><mi>s</mi><mi>p</mi><mi>a</mi><mi>c</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">linspace</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">e</span></span></span></span> 函数语法格式：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>p</mi><mi mathvariant=\"normal\">.</mi><mi>l</mi><mi>i</mi><mi>n</mi><mi>s</mi><mi>p</mi><mi>a</mi><mi>c</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo separator=\"true\">,</mo><mi>e</mi><mi>n</mi><mi>d</mi><mo separator=\"true\">,</mo><mi>s</mi><mi>t</mi><mi>e</mi><mi>p</mi><mo separator=\"true\">,</mo><mi>d</mi><mi>t</mi><mi>y</mi><mi>p</mi><mi>e</mi><mo>=</mo><mi>T</mi><mi>r</mi><mi>u</mi><mi>e</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">np.linspace(start,end,step,dtype=True)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">p</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">e</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">p</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">e</span><span class=\"mclose\">)</span></span></span></span>  闭区间</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>a_arange <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arrage<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a_arange<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">6</span> <span class=\"token number\">11</span> <span class=\"token number\">16</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>a_linespace <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>linspace<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a_linespace<span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span> <span class=\"token number\">0.25</span> <span class=\"token number\">0.5</span> <span class=\"token number\">1.25</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"3-通过logspace函数创建等比数组\"><a class=\"anchor\" href=\"#3-通过logspace函数创建等比数组\">#</a> 3、通过 logspace 函数创建等比数组</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>∙</mo></mrow><annotation encoding=\"application/x-tex\">\\bullet</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.44445em;vertical-align:0em;\"></span><span class=\"mord\">∙</span></span></span></span> 语法格式：<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>n</mi><mi>p</mi><mi mathvariant=\"normal\">.</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>s</mi><mi>p</mi><mi>a</mi><mi>c</mi><mi>e</mi><mo stretchy=\"false\">(</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo separator=\"true\">,</mo><mi>e</mi><mi>n</mi><mi>d</mi><mo separator=\"true\">,</mo><mi>n</mi><mi>u</mi><mi>m</mi><mo separator=\"true\">,</mo><mi>e</mi><mi>n</mi><mi>d</mi><mi>p</mi><mi>o</mi><mi>i</mi><mi>n</mi><mi>t</mi><mo>=</mo><mi>T</mi><mi>r</mi><mi>u</mi><mi>e</mi><mo separator=\"true\">,</mo><mi>b</mi><mi>a</mi><mi>s</mi><mi>e</mi><mo>=</mo><mn>10.0</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">np.logspace(start,end,num,endpoint=True,base=10.0)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">p</span><span class=\"mord\">.</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">e</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">m</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">t</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">e</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.16666666666666666em;\"></span><span class=\"mord mathnormal\">b</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">e</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span><span class=\"mrel\">=</span><span class=\"mspace\" style=\"margin-right:0.2777777777777778em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">.</span><span class=\"mord\">0</span><span class=\"mclose\">)</span></span></span></span></p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>a_logspace <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>logspace<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span>base<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a_logspace<span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">,</span><span class=\"token number\">16</span><span class=\"token punctuation\">,</span><span class=\"token number\">32</span><span class=\"token punctuation\">,</span><span class=\"token number\">64</span><span class=\"token punctuation\">,</span><span class=\"token number\">128</span><span class=\"token punctuation\">,</span><span class=\"token number\">256</span><span class=\"token punctuation\">,</span><span class=\"token number\">512</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"4-函数zerosonesdiageyefull的使用\"><a class=\"anchor\" href=\"#4-函数zerosonesdiageyefull的使用\">#</a> 4、函数 zeros,ones,diag,eye,full 的使用</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>a_zeros1 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span>dtype<span class=\"token operator\">=</span><span class=\"token builtin\">int</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#创建元素值都为 0 的一维数组，数据类型为 int</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a_zeros1<span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>a_zeros2 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#创建元素值都是 0 的二维数组</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a_zeros2<span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#ones 函数的用法和 zeros 很像，区别在于生成的数组值都为 1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>c_diag <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>diag<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#创建给定对角线的二维数组</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>c_diag<span class=\"token punctuation\">)</span>   <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">2</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">3</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>d_eye <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>eye<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#创建单位数组</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>d_eye<span class=\"token punctuation\">)</span>   <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">0</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">1</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span> <span class=\"token number\">0</span> <span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>e_full <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>full<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">4</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#创建值相同的二维数组</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>e_full<span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">3</span> <span class=\"token number\">3</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">3</span> <span class=\"token number\">3</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">3</span> <span class=\"token number\">3</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">3</span> <span class=\"token number\">3</span> <span class=\"token number\">3</span> <span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"5-numpy多维数组产生随机数\"><a class=\"anchor\" href=\"#5-numpy多维数组产生随机数\">#</a> 5、Numpy 多维数组产生随机数</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#同一随机数种子生成的随机数相同</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>a <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#生成随机一维数组，5 个 0 到 20 的整数</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token number\">8</span> <span class=\"token number\">3</span> <span class=\"token number\">7</span> <span class=\"token number\">15</span> <span class=\"token number\">16</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>b <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randint<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#3 行 4 列的二维数组，随机数大小都位于 0 到 20</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">10</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span> <span class=\"token number\">2</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">14</span> <span class=\"token number\">2</span> <span class=\"token number\">17</span> <span class=\"token number\">16</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">15</span> <span class=\"token number\">4</span> <span class=\"token number\">11</span> <span class=\"token number\">16</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>c <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#5 个介于 [0,1) 的随机数一维数组</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token number\">0.56229626</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.003124</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.3413341</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.6352321</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.4235985</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>d <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#产生 5 个标准正态随机分布组成的一维数组</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>d<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">0.23198063</span> <span class=\"token operator\">-</span><span class=\"token number\">0.51772213</span>  <span class=\"token number\">1.43018797</span>  <span class=\"token number\">0.94971126</span>  <span class=\"token number\">0.65692046</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>其次，还有一个<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>h</mi><mi>u</mi><mi>f</mi><mi>f</mi><mi>l</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">shuffle</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">e</span></span></span></span> 函数</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>a <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arrange<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>shuffle<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token number\">8</span> <span class=\"token number\">1</span> <span class=\"token number\">4</span> <span class=\"token number\">6</span> <span class=\"token number\">7</span> <span class=\"token number\">2</span> <span class=\"token number\">5</span> <span class=\"token number\">3</span> <span class=\"token number\">0</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>b <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arrange<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>shuffle<span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span>  <span class=\"token number\">6</span>  <span class=\"token number\">7</span>  <span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">9</span> <span class=\"token number\">10</span> <span class=\"token number\">11</span> <span class=\"token number\">12</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span>  <span class=\"token number\">2</span>  <span class=\"token number\">3</span>  <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"6-numpy多维数组的属性\"><a class=\"anchor\" href=\"#6-numpy多维数组的属性\">#</a> 6、Numpy 多维数组的属性</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>a <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">13</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># a.ndim () 返回数组维度</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>ndim<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># a.shape () 返回数组的形状</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># a.size () 返回数组的元素个数</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">format</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>size<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span><span class=\"token number\">12</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># reshape (shape) 不改变数组元素，返回一个 shape 形状的数组</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>b <span class=\"token operator\">=</span> a<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">3</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span> <span class=\"token number\">6</span> <span class=\"token number\">7</span> <span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">9</span> <span class=\"token number\">10</span> <span class=\"token number\">11</span> <span class=\"token number\">12</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>c <span class=\"token operator\">=</span> b<span class=\"token punctuation\">.</span>flatten<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>c<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token number\">1</span> <span class=\"token number\">2</span> <span class=\"token number\">3</span> <span class=\"token number\">4</span> <span class=\"token number\">5</span> <span class=\"token number\">6</span> <span class=\"token number\">7</span> <span class=\"token number\">8</span> <span class=\"token number\">9</span> <span class=\"token number\">10</span> <span class=\"token number\">11</span> <span class=\"token number\">12</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><h4 id=\"7-数组合并\"><a class=\"anchor\" href=\"#7-数组合并\">#</a> 7、数组合并</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>A <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>B <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>ones<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\t</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># hstack 为水平合并</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>hstack<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">,</span>B<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># -></span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># [[0 0 0 1 1 1 1]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># [0 0 0 1 1 1 1]]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># concatenate 可选择 axis=0 时为垂直，axis=1 时为水平</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>concatenate<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">,</span>B<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># -></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># [[0 0 0 1 1 1 1]</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># [0 0 0 1 1 1 1]]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>A <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>B <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>ones<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\t</pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>vstack<span class=\"token punctuation\">(</span>A<span class=\"token punctuation\">,</span>B<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\"># -></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\"># [[0 0 0 0]</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token comment\"># [0 0 0 0]</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># [1 1 1 1]</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># [1 1 1 1]]</span></pre></td></tr></table></figure><h4 id=\"8-数组分割\"><a class=\"anchor\" href=\"#8-数组分割\">#</a> 8、数组分割</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>a <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>hsplit<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#水平分割</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># -> [array([[0,1],[4,5],[8,9]]),array([[2,3],[6,7],[10,11]])]</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>vsplit<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#垂直分割</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># -> [array([[0,1,2,3]]),array([[4,5,6,7]]),array([[8,9,10,11]])]</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>np<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>axis<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#axis=1 为水平分割，axis=0 为垂直分割</span></pre></td></tr></table></figure><h4 id=\"9-一维数组索引和切片\"><a class=\"anchor\" href=\"#9-一维数组索引和切片\">#</a> 9、一维数组索引和切片</h4>\n<p>这个和列表<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>i</mi><mi>s</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">list</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span></span></span></span> 的用法是差不多的</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># arr [0,1] 索引访问指定某个元素，第一行第二列</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># arr [[1,3],:] 索引访问指定某行元素，第 2,4 行元素</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># arr [:,0:3]  索引访问指定某些列的元素，第 1,2,3 列的元素</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># arr [2:,2:]  索引访问指定某些元素，从第三行第三列开始的元素</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># arr [-2:,-3:] 数组最后两行最后三列的元素</span></pre></td></tr></table></figure><h4 id=\"10-数组的访问\"><a class=\"anchor\" href=\"#10-数组的访问\">#</a> 10、数组的访问</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># np.append (arr,x) 在数组 arr 后面增加一个元素为 x</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># np.insert (arr,pos,x) 在数组 arr 索引为 pos 的位置插入元素 x</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># np.delete (arr,pos) 删除数组 arr 索引为 pos 的元素</span></pre></td></tr></table></figure><h4 id=\"11-数组的去重与重复\"><a class=\"anchor\" href=\"#11-数组的去重与重复\">#</a> 11、数组的去重与重复</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># np.unique 找出数组的唯一值并返回已经排序的结果</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># np.tile (arr,3) 返回 arr 数组重复 3 次的数组</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># np.repeat (arr,2,axis=0) 返回 arr 数组按行重复 2 次的数组，即 [[1][2]] 变为 [[1][1][2][2]]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># axis=0 是行重复，1 是列重复</span></pre></td></tr></table></figure><h4 id=\"12-统计函数\"><a class=\"anchor\" href=\"#12-统计函数\">#</a> 12、统计函数</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># np.sum (a,axis) 计算数组中沿指定轴的和</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token comment\"># np.min (a,axis) 计算数组中沿指定轴的最小值</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># np.argmin (a,axis) 计算数组中沿指定轴的最小值的索引</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># np.max (a,axis) 计算数组中沿指定轴的最大值</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># np.argmax (a,axis) 计算数组中沿指定轴的最大值的索引</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\"># np.median (a,axis) 计算数组中沿指定轴的中位数</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># np.mean (a,axis) 计算数组中沿指定轴的平均数</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token comment\"># np.std (a,axis)  计算数组标准差</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\"># np.var (a,axis)  计算数组方差</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># np.cov (a)       计算数组协方差矩阵</span></pre></td></tr></table></figure><h2 id=\"二-matplotlib库\"><a class=\"anchor\" href=\"#二-matplotlib库\">#</a> 二、Matplotlib 库</h2>\n<h4 id=\"1-figure\"><a class=\"anchor\" href=\"#1-figure\">#</a> 1、Figure</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>F</mi><mi>i</mi><mi>g</mi><mi>u</mi><mi>r</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">Figure</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">F</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">e</span></span></span></span> 对象可以理解成是一个画板</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>fig <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"2-axes\"><a class=\"anchor\" href=\"#2-axes\">#</a> 2、Axes</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>A</mi><mi>x</mi><mi>e</mi><mi>s</mi></mrow><annotation encoding=\"application/x-tex\">Axes</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">A</span><span class=\"mord mathnormal\">x</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">s</span></span></span></span> 就是轴，一幅图总有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>x</mi></mrow><annotation encoding=\"application/x-tex\">x</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">x</span></span></span></span> 轴，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>y</mi></mrow><annotation encoding=\"application/x-tex\">y</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.625em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span></span></span></span> 轴，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>z</mi></mrow><annotation encoding=\"application/x-tex\">z</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.43056em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.04398em;\">z</span></span></span></span> 轴之类的轴来确定</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>fig <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ax <span class=\"token operator\">=</span> fig<span class=\"token punctuation\">.</span>add_subplot<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\"># 在 figure 的第一行第一列的第一个位置生成一个 Axes 对象作画</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ax<span class=\"token punctuation\">.</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>xlim<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span><span class=\"token number\">4.5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>ylim<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>title<span class=\"token operator\">=</span><span class=\"token string\">'Example'</span><span class=\"token punctuation\">,</span>ylabel<span class=\"token operator\">=</span><span class=\"token string\">'Y'</span><span class=\"token punctuation\">,</span>xlabel<span class=\"token operator\">=</span><span class=\"token string\">'X'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果如下图：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/tvMXQ3VIDgo7Cl8.png\" alt=\"效果图\" /></p>\n<h4 id=\"3-add_subplot函数\"><a class=\"anchor\" href=\"#3-add_subplot函数\">#</a> 3、add_subplot 函数</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>fig <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>ax1 <span class=\"token operator\">=</span> fig<span class=\"token punctuation\">.</span>add_subplot<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ax2 <span class=\"token operator\">=</span> fig<span class=\"token punctuation\">.</span>add_subplot<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ax3 <span class=\"token operator\">=</span> fig<span class=\"token punctuation\">.</span>add_subplot<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果如如下：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/QLxwTCHcvGZn25o.png\" alt=\"效果图\" /></p>\n<h4 id=\"4-画函数\"><a class=\"anchor\" href=\"#4-画函数\">#</a> 4、画函数</h4>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi>l</mi><mi>o</mi><mi>t</mi></mrow><annotation encoding=\"application/x-tex\">plot</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">t</span></span></span></span> 函数画出一系列点并用线将它们连接起来</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>linspace<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>np<span class=\"token punctuation\">.</span>pi<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>y_sin <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>sin<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>y_cos <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>cos<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>fig <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>figure<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ax1 <span class=\"token operator\">=</span> fig<span class=\"token punctuation\">.</span>add_subplot<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ax2 <span class=\"token operator\">=</span> fig<span class=\"token punctuation\">.</span>add_subplot<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ax3 <span class=\"token operator\">=</span> fig<span class=\"token punctuation\">.</span>add_subplot<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>ax1<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y_sin<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y_sin<span class=\"token punctuation\">,</span><span class=\"token string\">'go--'</span><span class=\"token punctuation\">,</span>linewidth<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>markersize<span class=\"token operator\">=</span><span class=\"token number\">12</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>ax3<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y_cos<span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">,</span>marker<span class=\"token operator\">=</span><span class=\"token string\">'+'</span><span class=\"token punctuation\">,</span>linestyle<span class=\"token operator\">=</span><span class=\"token string\">'dashed'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果如如下</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/Sx3XOJGLVgb7WRH.png\" alt=\"效果图\" /></p>\n<h4 id=\"5-画散点图\"><a class=\"anchor\" href=\"#5-画散点图\">#</a> 5、画散点图</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>y <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">,</span>marker<span class=\"token operator\">=</span><span class=\"token string\">'+'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果图如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/lCarYJejLKviO8k.png\" alt=\"效果图\" /></p>\n<h4 id=\"6-条形图\"><a class=\"anchor\" href=\"#6-条形图\">#</a> 6、条形图</h4>\n<p>条形图分为水平的和垂直的</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>y<span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>fig<span class=\"token punctuation\">,</span>axes <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span>ncols<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>figsize<span class=\"token operator\">=</span>plt<span class=\"token punctuation\">.</span>figaspect<span class=\"token punctuation\">(</span><span class=\"token number\">1.</span><span class=\"token operator\">/</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>vert_bars <span class=\"token operator\">=</span> axes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token string\">'lightblue'</span><span class=\"token punctuation\">,</span>align<span class=\"token operator\">=</span><span class=\"token string\">'center'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>horiz_bars <span class=\"token operator\">=</span> axes<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>barh<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token string\">'lightblue'</span><span class=\"token punctuation\">,</span>align<span class=\"token operator\">=</span><span class=\"token string\">'center'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>axes<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>axhline<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token string\">'gray'</span><span class=\"token punctuation\">,</span>linewidth<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>axes<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>axvline<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token string\">'gray'</span><span class=\"token punctuation\">,</span>linewidth<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果如如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/tx4AY92WCwEamPV.png\" alt=\"效果图\" /></p>\n<h4 id=\"7-直方图\"><a class=\"anchor\" href=\"#7-直方图\">#</a> 7、直方图</h4>\n<p>直方图用于统计出现的次数或者频率，有多种参数可以调整</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">114514</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>n_bins <span class=\"token operator\">=</span> <span class=\"token number\">10</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>fig<span class=\"token punctuation\">,</span>axes <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span>nrows<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>ncols<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ax0<span class=\"token punctuation\">,</span>ax1<span class=\"token punctuation\">,</span>ax2<span class=\"token punctuation\">,</span>ax3 <span class=\"token operator\">=</span> axes<span class=\"token punctuation\">.</span>flatten<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>colors <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'red'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'tan'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'lime'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ax0<span class=\"token punctuation\">.</span>hist<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>n_bins<span class=\"token punctuation\">,</span>density<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>histtype<span class=\"token operator\">=</span><span class=\"token string\">'bar'</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>ax0<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span>prop<span class=\"token operator\">=</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'size'</span><span class=\"token punctuation\">:</span><span class=\"token number\">10</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>ax0<span class=\"token punctuation\">.</span>set_title<span class=\"token punctuation\">(</span><span class=\"token string\">'bar with legend'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>ax1<span class=\"token punctuation\">.</span>hist<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> n_bins<span class=\"token punctuation\">,</span> density<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span> histtype<span class=\"token operator\">=</span><span class=\"token string\">'barstacked'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>ax1<span class=\"token punctuation\">.</span>set_title<span class=\"token punctuation\">(</span><span class=\"token string\">'stacked bar'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>hist<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>  histtype<span class=\"token operator\">=</span><span class=\"token string\">'barstacked'</span><span class=\"token punctuation\">,</span> rwidth<span class=\"token operator\">=</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>ax3<span class=\"token punctuation\">.</span>hist<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">[</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> rwidth<span class=\"token operator\">=</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>ax3<span class=\"token punctuation\">.</span>set_title<span class=\"token punctuation\">(</span><span class=\"token string\">'different sample sizes'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>fig<span class=\"token punctuation\">.</span>tight_layout<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果图如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/1tQVuDrFpUX8LCc.png\" alt=\"效果图\" /></p>\n<h4 id=\"8-饼状图\"><a class=\"anchor\" href=\"#8-饼状图\">#</a> 8、饼状图</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>labels <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'Frogs'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Hogs'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Dogs'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Logs'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>sizes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token number\">15</span><span class=\"token punctuation\">,</span><span class=\"token number\">30</span><span class=\"token punctuation\">,</span><span class=\"token number\">45</span><span class=\"token punctuation\">,</span><span class=\"token number\">10</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>explode <span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>fig1<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>ax1<span class=\"token punctuation\">,</span>ax2<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ax1<span class=\"token punctuation\">.</span>pie<span class=\"token punctuation\">(</span>sizes<span class=\"token punctuation\">,</span>labels<span class=\"token operator\">=</span>labels<span class=\"token punctuation\">,</span>autopct<span class=\"token operator\">=</span><span class=\"token string\">'%1.1f%%'</span><span class=\"token punctuation\">,</span>shadow<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ax1<span class=\"token punctuation\">.</span>axis<span class=\"token punctuation\">(</span><span class=\"token string\">'equal'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>pie<span class=\"token punctuation\">(</span>sizes<span class=\"token punctuation\">,</span>autopct<span class=\"token operator\">=</span><span class=\"token string\">'%1.2%%'</span><span class=\"token punctuation\">,</span>shadow<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>startangle<span class=\"token operator\">=</span><span class=\"token number\">90</span><span class=\"token punctuation\">,</span>explode<span class=\"token operator\">=</span>explode<span class=\"token punctuation\">,</span>pctdistance<span class=\"token operator\">=</span><span class=\"token number\">1.12</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>axis<span class=\"token punctuation\">(</span><span class=\"token string\">'equal'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span>labels<span class=\"token operator\">=</span>labels<span class=\"token punctuation\">,</span>loc<span class=\"token operator\">=</span><span class=\"token string\">'upper right'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果图如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/XrR3jtgxHCsVPYT.png\" alt=\"效果图\" /></p>\n<h4 id=\"9-箱型图\"><a class=\"anchor\" href=\"#9-箱型图\">#</a> 9、箱型图</h4>\n<p>虽然用的不多吧，但毕竟是一个用于总结的文章，加上吧</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">114514</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>fig<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>ax1<span class=\"token punctuation\">,</span> ax2<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>data <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>data2 <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>randn<span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ax1<span class=\"token punctuation\">.</span>boxplot<span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>boxplot<span class=\"token punctuation\">(</span>data2<span class=\"token punctuation\">,</span> vert<span class=\"token operator\">=</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#控制方向</span></pre></td></tr></table></figure><p>效果如下：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/dtrlc7oe5STKFQg.png\" alt=\"效果图\" /></p>\n<h4 id=\"10-泡泡图\"><a class=\"anchor\" href=\"#10-泡泡图\">#</a> 10、泡泡图</h4>\n<p>和箱型图一样，加上吧</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>seed<span class=\"token punctuation\">(</span><span class=\"token number\">114514</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>n <span class=\"token operator\">=</span> <span class=\"token number\">50</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>y <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>colors <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>area <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token number\">30</span> <span class=\"token operator\">*</span> np<span class=\"token punctuation\">.</span>random<span class=\"token punctuation\">.</span>rand<span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token operator\">**</span><span class=\"token number\">2</span>  </pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>plt<span class=\"token punctuation\">.</span>scatter<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span> y<span class=\"token punctuation\">,</span> s<span class=\"token operator\">=</span>area<span class=\"token punctuation\">,</span> c<span class=\"token operator\">=</span>colors<span class=\"token punctuation\">,</span> alpha<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><h4 id=\"效果图如下\"><a class=\"anchor\" href=\"#效果图如下\">#</a> 效果图如下:</h4>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/dVNPLQrc8Tmz5O1.png\" alt=\"效果图\" /></p>\n<h4 id=\"11-等高线\"><a class=\"anchor\" href=\"#11-等高线\">#</a> 11、等高线</h4>\n<p>同上，一般不会用</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>fig<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>ax1<span class=\"token punctuation\">,</span>ax2<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>y <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>xx<span class=\"token punctuation\">,</span>yy<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span>meshgrid<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>sparse<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>z <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>sin<span class=\"token punctuation\">(</span>xx<span class=\"token operator\">**</span><span class=\"token number\">2</span><span class=\"token operator\">+</span>yy<span class=\"token operator\">**</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token operator\">/</span><span class=\"token punctuation\">(</span>xx<span class=\"token operator\">**</span><span class=\"token number\">2</span><span class=\"token operator\">+</span>yy<span class=\"token operator\">**</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ax1<span class=\"token punctuation\">.</span>contourf<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>z<span class=\"token punctuation\">)</span> <span class=\"token comment\">#contourf 会填充轮廓间的颜色</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>contour<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">,</span>z<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果图如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/TcU2JRmXvna9lZW.png\" alt=\"效果图\" /></p>\n<h4 id=\"12-区间调整\"><a class=\"anchor\" href=\"#12-区间调整\">#</a> 12、区间调整</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ax<span class=\"token punctuation\">.</span>set_xlim<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>xmin<span class=\"token punctuation\">,</span>xmax<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#设置 x 轴区间</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ax<span class=\"token punctuation\">.</span>set_ylim<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>ymin<span class=\"token punctuation\">,</span>ymax<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#设置 y 轴区间</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>ax<span class=\"token punctuation\">.</span>axis<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>xmin<span class=\"token punctuation\">,</span>xmax<span class=\"token punctuation\">,</span>ymin<span class=\"token punctuation\">,</span>ymax<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#设置 x，y 轴区间</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ax<span class=\"token punctuation\">.</span>set_ylim<span class=\"token punctuation\">(</span>bottom<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#Y 轴下限</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ax<span class=\"token punctuation\">.</span>set_xlim<span class=\"token punctuation\">(</span>right<span class=\"token operator\">=</span><span class=\"token number\">25</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#X 轴上限</span></pre></td></tr></table></figure><p>实例演示：</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>linspace<span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token operator\">*</span>np<span class=\"token punctuation\">.</span>pi<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>y <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>sin<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>fig<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>ax1<span class=\"token punctuation\">,</span>ax2<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ax1<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>y<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>set_xlim<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>set_ylim<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果图如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/WglLDx51dvBYjcG.png\" alt=\"效果图\" /></p>\n<h3 id=\"13-设置标注名\"><a class=\"anchor\" href=\"#13-设置标注名\">#</a> 13、设置标注名</h3>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>fig <span class=\"token punctuation\">,</span>ax <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ax<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">25</span><span class=\"token punctuation\">,</span><span class=\"token number\">30</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'BeiJing'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ax<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">30</span><span class=\"token punctuation\">,</span><span class=\"token number\">23</span><span class=\"token punctuation\">,</span><span class=\"token number\">13</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>label<span class=\"token operator\">=</span><span class=\"token string\">'NanJing'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>ax<span class=\"token punctuation\">.</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>ylabel<span class=\"token operator\">=</span><span class=\"token string\">'Temperature(deg C)'</span><span class=\"token punctuation\">,</span>xlabel<span class=\"token operator\">=</span><span class=\"token string\">'Time'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ax<span class=\"token punctuation\">.</span>legend<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果图如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/cJw823Aat9vzOE6.png\" alt=\"效果图\" /></p>\n<p>其中<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>e</mi><mi>g</mi><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy=\"false\">(</mo><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">legend()</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span><span class=\"mopen\">(</span><span class=\"mclose\">)</span></span></span></span> 里面可以传参数<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>c</mi></mrow><annotation encoding=\"application/x-tex\">loc</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">c</span></span></span></span>，用来调整图例的位置，参数表如下:</p>\n<p>| Location String | Location Code |<br />\n| :-------------: | :-----------: |<br />\n|     'best'      |      0        |<br />\n|  'upper right'  |      1        |<br />\n|  'upper left'   |      2        |<br />\n|  'lower left'   |      3        |<br />\n|  'lower right'  |      4        |<br />\n|     'right'     |      5        |<br />\n|  'center left'  |      6        |<br />\n|  'center right' |      7        |<br />\n|  'lower center' |      8        |<br />\n|  'upper center' |      9        |<br />\n|     'center'    |      10       |</p>\n<h4 id=\"14-区间分段\"><a class=\"anchor\" href=\"#14-区间分段\">#</a> 14、区间分段</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">'apples'</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">'oranges'</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">'peaches'</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>fruit<span class=\"token punctuation\">,</span>value <span class=\"token operator\">=</span> <span class=\"token builtin\">zip</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>fig <span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>ax1<span class=\"token punctuation\">,</span>ax2<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>x <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>arange<span class=\"token punctuation\">(</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>fruit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ax1<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>value<span class=\"token punctuation\">,</span>align<span class=\"token operator\">=</span><span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token string\">'lightblue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>bar<span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">,</span>value<span class=\"token punctuation\">,</span>align<span class=\"token operator\">=</span><span class=\"token string\">'center'</span><span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span><span class=\"token string\">'lightblue'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>ax2<span class=\"token punctuation\">.</span><span class=\"token builtin\">set</span><span class=\"token punctuation\">(</span>xticks<span class=\"token operator\">=</span>x<span class=\"token punctuation\">,</span>xticklabels<span class=\"token operator\">=</span>fruit<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">#ax.tick_params (axis='y',direction='inout',length=10) 修改 ticks 的方向和长度</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果图如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/naNw7DHMxPmgT4c.png\" alt=\"效果图\" /></p>\n<h4 id=\"15-子图布局\"><a class=\"anchor\" href=\"#15-子图布局\">#</a> 15、子图布局</h4>\n<p>这一部分可以调整子图之间的间隔，子图与画板的外边间距以及子图的内边间距等功能</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>fig<span class=\"token punctuation\">,</span>axes <span class=\"token operator\">=</span> plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>figsize<span class=\"token operator\">=</span><span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">,</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>fig<span class=\"token punctuation\">.</span>subplots_adjust<span class=\"token punctuation\">(</span>wspace<span class=\"token operator\">=</span><span class=\"token number\">0.5</span><span class=\"token punctuation\">,</span>hspace<span class=\"token operator\">=</span><span class=\"token number\">0.3</span><span class=\"token punctuation\">,</span>left<span class=\"token operator\">=</span><span class=\"token number\">0.125</span><span class=\"token punctuation\">,</span>right<span class=\"token operator\">=</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span>top<span class=\"token operator\">=</span><span class=\"token number\">0.9</span><span class=\"token punctuation\">,</span>bottom<span class=\"token operator\">=</span><span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#fig.tight_layout () #自动调整布局，使标题不重叠</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果图如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/vQ6hExq1Jtm3kDY.png\" alt=\"效果图\" /></p>\n<p>这四个子图的 X,Y 区间是一致的，可以调整它们使用一样的 X,Y</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>fig<span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span>ax1<span class=\"token punctuation\">,</span>ax2<span class=\"token punctuation\">)</span><span class=\"token operator\">=</span>plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>sharex<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>sharey<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ax1<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ax2<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span><span class=\"token number\">6</span><span class=\"token punctuation\">,</span><span class=\"token number\">7</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果图如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/Kl1iSpQr27TxFyE.png\" alt=\"效果图\" /></p>\n<h4 id=\"16-边框去除\"><a class=\"anchor\" href=\"#16-边框去除\">#</a> 16、边框去除</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>fig <span class=\"token punctuation\">,</span>ax <span class=\"token operator\">=</span>plt<span class=\"token punctuation\">.</span>subplots<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ax<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">,</span><span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">,</span><span class=\"token number\">25</span><span class=\"token punctuation\">,</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>ax<span class=\"token punctuation\">.</span>spines<span class=\"token punctuation\">[</span><span class=\"token string\">'top'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>set_visible<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ax<span class=\"token punctuation\">.</span>xaxis<span class=\"token punctuation\">.</span>set_ticks_position<span class=\"token punctuation\">(</span><span class=\"token string\">'bottom'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>ax<span class=\"token punctuation\">.</span>spines<span class=\"token punctuation\">[</span><span class=\"token string\">'right'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>set_visible<span class=\"token punctuation\">(</span><span class=\"token boolean\">False</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ax<span class=\"token punctuation\">.</span>yaxis<span class=\"token punctuation\">.</span>set_ticks_position<span class=\"token punctuation\">(</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># outward</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># 移动左、下边界离 Axes 10 个距离</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\"># ax.spines['bottom'].set_position(('outward',10))</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\"># ax.spines['left'].set_position(('outward',10))</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\"># data</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token comment\"># 移动左、下边界到 (0,0) 处相交</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>ax<span class=\"token punctuation\">.</span>spines<span class=\"token punctuation\">[</span><span class=\"token string\">'bottom'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>set_position<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>ax<span class=\"token punctuation\">.</span>spines<span class=\"token punctuation\">[</span><span class=\"token string\">'left'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span>set_position<span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token string\">'data'</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token comment\"># axes</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\"># 移动边界，按 Axes 的百分比位置</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token comment\"># ax.spines['bottom'].set_position(('axes',0.75))</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token comment\"># ax.spines['left'].set_position(('axes',0.3))</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>效果图如下:</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/zfYdWxngtErZ6ec.png\" alt=\"效果图\" /></p>\n<h2 id=\"三-re库\"><a class=\"anchor\" href=\"#三-re库\">#</a> 三、Re 库</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">Re</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\">e</span></span></span></span> 库主要是用于字符串匹配，在处理数据方面有着较为重要的作用，其主要功能函数表如下：</p>\n<p>|     函数        |      说明      |<br />\n| :-------------: | :-----------: |<br />\n|   re.search ()   |  在一个字符串中搜索出匹配正则表达式的第一个位置，返回 match 对象 |<br />\n|  re.match ()     | 从一个字符串的开始位置起匹配正则表达式，返回 match 对象 |<br />\n|  re.findall ()   | 搜索字符串，以列表类型返回全部能匹配的字符串 |<br />\n|  re.split ()   |  将一个字符按照正则表达式匹配结果进行分割，返回列表类型 |<br />\n|  re.finditer ()  | 搜索字符串，返回一个匹配结果的迭代类型，每个迭代元素式 match 对象 |<br />\n|     re.sub ()     |  在一个字符串中替换所有匹配正则表达式的子串，返回替换后的字符串        |</p>\n<h4 id=\"1-search\"><a class=\"anchor\" href=\"#1-search\">#</a> 1、search()</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> re</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>s <span class=\"token operator\">=</span> <span class=\"token string\">\"I have a dream that one day\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ret <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>seach<span class=\"token punctuation\">(</span><span class=\"token string\">\"^I.*day$\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 检查字符串以 'I' 开头，以 'day' 结尾</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>ret1 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">(</span><span class=\"token string\">\"\\s\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 在字符串中搜索第一个空白字符</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>ret2 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">(</span><span class=\"token string\">\"the\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 在字符串中检索特定内容，如果没有检索到就返回 None</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ret3 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>search<span class=\"token punctuation\">(</span><span class=\"token string\">\"HAVE\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">,</span>re<span class=\"token punctuation\">.</span>I<span class=\"token punctuation\">)</span> <span class=\"token comment\">#忽略大小写匹配</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret<span class=\"token punctuation\">.</span>group<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/26/oVJbMyFUOsDIK2p.png\" alt=\"输出结果\" /><br />\n<img data-src=\"https://s2.loli.net/2023/10/26/OxToKJFC1kM6dye.png\" alt=\"Ret3输出结果\" /></p>\n<h4 id=\"2-match\"><a class=\"anchor\" href=\"#2-match\">#</a> 2、match()</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> re</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>s <span class=\"token operator\">=</span> <span class=\"token string\">\"I have a dream that one day\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ret1 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span><span class=\"token keyword\">match</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dream'</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret1<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>ret2 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span><span class=\"token keyword\">match</span><span class=\"token punctuation\">(</span><span class=\"token string\">'the'</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret2<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\"># 由于是第一个开始匹配，所以匹配失败返回 None</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>password <span class=\"token operator\">=</span> <span class=\"token string\">'deepdark114514fantancy'</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">if</span> re<span class=\"token punctuation\">.</span><span class=\"token keyword\">match</span><span class=\"token punctuation\">(</span><span class=\"token string\">r'.*[0-9].*'</span><span class=\"token punctuation\">,</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Access granted'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Access deny'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/26/QZxAdEhM7f1LsWP.png\" alt=\"输出结果1\" /><br />\n<img data-src=\"https://s2.loli.net/2023/10/26/UmoHxak2Qj8MN6K.png\" alt=\"输出结果2\" /></p>\n<h4 id=\"3-split\"><a class=\"anchor\" href=\"#3-split\">#</a> 3、split()</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> re</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>s <span class=\"token operator\">=</span> <span class=\"token string\">\"I have a dream that one day\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ret1 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">\"\\s\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret1<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 指定了 maxsplit，控制出现次数</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>ret2 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">\"\\s\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">,</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret2<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ret3 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">\"ahaki\"</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret3<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>ss <span class=\"token operator\">=</span> <span class=\"token string\">\"a b;c! d e;f,g\"</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>ret4 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">\";\"</span><span class=\"token punctuation\">,</span>ss<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 单个切割符</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret4<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>ret5 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">\"[:,!]\"</span><span class=\"token punctuation\">,</span>ss<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 多个切割符</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret5<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>ret6 <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>split<span class=\"token punctuation\">(</span><span class=\"token string\">\"(?:[:,!])\"</span><span class=\"token punctuation\">,</span>ss<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 多个切割符并捕获分组，不保留分隔符</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ret6<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/26/3iXBcvOQH1ndUo6.png\" alt=\"输出结果\" /></p>\n<h4 id=\"4-sub\"><a class=\"anchor\" href=\"#4-sub\">#</a> 4、sub()</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> re</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>s <span class=\"token operator\">=</span> <span class=\"token string\">\"我最喜欢的数字是114514\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>ss <span class=\"token operator\">=</span> re<span class=\"token punctuation\">.</span>sub<span class=\"token punctuation\">(</span><span class=\"token string\">r'[0-9]'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'*'</span><span class=\"token punctuation\">,</span>s<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>ss<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token comment\"># 输出是 \"我最喜欢的数字是 ******\"</span></pre></td></tr></table></figure><h2 id=\"四-cv2库\"><a class=\"anchor\" href=\"#四-cv2库\">#</a> 四、cv2 库</h2>\n<p>必须要写的一点是这个库的安装流程</p>\n<p>首先先检查自己的<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mi>y</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">Python</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span></span></span></span> 版本，本人用的是 3.6 版本的，直接输入</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> opencv-python</pre></td></tr></table></figure><p>会安装失败，报一大堆错误，而且很慢，所以考虑安装老一点的版本然后用国内镜像安装</p>\n<figure class=\"highlight shell\"><figcaption data-lang=\"Bash\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip <span class=\"token function\">install</span> <span class=\"token parameter variable\">-i</span> https://pypi.douban.com/simple/ pip <span class=\"token function\">install</span> opencv-python<span class=\"token operator\">==</span><span class=\"token number\">4.3</span>.0.38</pre></td></tr></table></figure><p>完成安装后就可以调用了</p>\n<p>以下是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>C</mi><mi>V</mi><mn>2</mn></mrow><annotation encoding=\"application/x-tex\">CV2</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathnormal\" style=\"margin-right:0.22222em;\">V</span><span class=\"mord\">2</span></span></span></span> 库实验图片：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/OmHLZusWXUK4dRr.jpg\" alt=\"实验图片\" /></p>\n<h4 id=\"1-读入图像并画出直方图\"><a class=\"anchor\" href=\"#1-读入图像并画出直方图\">#</a> 1、读入图像并画出直方图</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> matplotlib <span class=\"token keyword\">import</span> pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>img <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'F:/images/Assassin\\'s Creed.jpg'</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>plt<span class=\"token punctuation\">.</span>hist<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span>reshape<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token number\">256</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/26/l3j1XdxmqWNFerf.png\" alt=\"效果图\" /></p>\n<h4 id=\"2-画出rgb三色图像直方图\"><a class=\"anchor\" href=\"#2-画出rgb三色图像直方图\">#</a> 2、画出 rgb 三色图像直方图</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> matplotlib <span class=\"token keyword\">import</span> pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>img <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'F:/images/Assassin\\'s Creed.jpg'</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>color <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'b'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'g'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'r'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">for</span> i<span class=\"token punctuation\">,</span>col <span class=\"token keyword\">in</span> <span class=\"token builtin\">enumerate</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    histr <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>calcHist<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>img<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>histr<span class=\"token punctuation\">,</span>color<span class=\"token operator\">=</span>col<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>xlim<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/26/qalgBwm4ZVeQj5v.png\" alt=\"效果图\" /></p>\n<h4 id=\"3-画出灰度直方图\"><a class=\"anchor\" href=\"#3-画出灰度直方图\">#</a> 3、画出灰度直方图</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> sys</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">import</span> numpy <span class=\"token keyword\">as</span> np</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">import</span> cv2</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">import</span> matplotlib<span class=\"token punctuation\">.</span>pyplot <span class=\"token keyword\">as</span> plt</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    img <span class=\"token operator\">=</span> cv2<span class=\"token punctuation\">.</span>imread<span class=\"token punctuation\">(</span><span class=\"token string\">'F:/images/Assassin\\'s Creed.jpg'</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\"># 得到计算灰度直方图的值</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    n <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>array<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    xy <span class=\"token operator\">=</span> xygray<span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    </pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token comment\"># 画出灰度直方图</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    x_range <span class=\"token operator\">=</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">256</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>plot<span class=\"token punctuation\">(</span>x_range<span class=\"token punctuation\">,</span>xy<span class=\"token punctuation\">,</span><span class=\"token string\">\"r\"</span><span class=\"token punctuation\">,</span>linewidth<span class=\"token operator\">=</span><span class=\"token number\">2</span><span class=\"token punctuation\">,</span>c<span class=\"token operator\">=</span><span class=\"token string\">'black'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>    <span class=\"token comment\"># 设置坐标轴的范围</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>    y_maxValue<span class=\"token operator\">=</span>np<span class=\"token punctuation\">.</span><span class=\"token builtin\">max</span><span class=\"token punctuation\">(</span>xy<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>axis<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span>y_maxValue<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\"># 设置坐标轴标签</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>xlabel<span class=\"token punctuation\">(</span><span class=\"token string\">'gray Level'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>ylabel<span class=\"token punctuation\">(</span><span class=\"token string\">'number of pixels'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>    plt<span class=\"token punctuation\">.</span>show<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">xygray</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token comment\"># 得到高度和宽</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    rows <span class=\"token punctuation\">,</span>cols <span class=\"token operator\">=</span> img<span class=\"token punctuation\">.</span>shape</pre></td></tr><tr><td data-num=\"26\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>img<span class=\"token punctuation\">.</span>shape<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>    <span class=\"token comment\"># 储存灰度直方图</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre>    xy <span class=\"token operator\">=</span> np<span class=\"token punctuation\">.</span>zeros<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token number\">256</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>np<span class=\"token punctuation\">.</span>uint64<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre>    <span class=\"token keyword\">for</span> r <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>rows<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>        <span class=\"token keyword\">for</span> c <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span>cols<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre>            xy<span class=\"token punctuation\">[</span>img<span class=\"token punctuation\">[</span>r<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>c<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre>    <span class=\"token comment\"># 返回以为 ndarry</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre>    <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>xy<span class=\"token punctuation\">.</span><span class=\"token builtin\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token keyword\">return</span> xy</pre></td></tr><tr><td data-num=\"35\"></td><td><pre></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>main<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p><img data-src=\"https://s2.loli.net/2023/10/26/iB61bRvEsdLNkzP.png\" alt=\"效果图\" /></p>\n",
            "tags": [
                "机器学习",
                "Python"
            ]
        },
        {
            "id": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%89%8D%E7%BD%AEPython%E6%93%8D%E4%BD%9C/",
            "url": "http://ntmydb/github.io/mechine-learning/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0%E4%B9%8B%E5%89%8D%E7%BD%AEPython%E6%93%8D%E4%BD%9C/",
            "title": "机器学习之前置Python操作",
            "date_published": "2023-03-21T08:12:42.000Z",
            "content_html": "<h1 id=\"python初级操作\"><a class=\"anchor\" href=\"#python初级操作\">#</a> Python 初级操作</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-数字\"><a class=\"anchor\" href=\"#一-数字\">#</a> 一、数字</h2>\n<p>编程语言的数字都差不多，包括整形、长整型、浮点型、复数</p>\n<p>常用运算函数大多数在 math 模块中</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">import</span> math</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>math<span class=\"token punctuation\">.</span>ceil<span class=\"token punctuation\">(</span><span class=\"token number\">4.1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#返回数字上的向上取整   ->5</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>math<span class=\"token punctuation\">.</span>floor<span class=\"token punctuation\">(</span><span class=\"token number\">4.9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#返回数字上的向下取整  ->4</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>math<span class=\"token punctuation\">.</span>fabs<span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">10.3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#返回数字的绝对值     ->10.3</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>math<span class=\"token punctuation\">.</span>sqrt<span class=\"token punctuation\">(</span><span class=\"token number\">9</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#返回数字的开放           ->3.0</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>math<span class=\"token punctuation\">.</span>exp<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">#返回 e 的 x 次幂             ->2.718281828459045</span></pre></td></tr></table></figure><h2 id=\"二-字符串\"><a class=\"anchor\" href=\"#二-字符串\">#</a> 二、字符串</h2>\n<p><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mi>y</mi><mi>t</mi><mi>h</mi><mi>o</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">Python</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">y</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">h</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span></span></span></span> 中的字符串可以用单引号、双引号和三引号（三个单引号或三个双引号）扩起来，使用反斜杠<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mspace linebreak=\"newline\"></mspace></mrow><annotation encoding=\"application/x-tex\">\\\\</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"mspace newline\"></span></span></span> 转义特殊字符</p>\n<p>正常字符串输出如下:</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Hello World!'</span><span class=\"token punctuation\">)</span>   <span class=\"token operator\">-</span><span class=\"token operator\">></span>Hello World!</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Hello World!\"</span><span class=\"token punctuation\">)</span>   <span class=\"token operator\">-</span><span class=\"token operator\">></span>Hello World!</pre></td></tr></table></figure><p>带有特殊字符的输出如下，这部分和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>L</mi><mi>a</mi><mi>T</mi><mi>e</mi><mi>X</mi></mrow><annotation encoding=\"application/x-tex\">LaTeX</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">L</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\" style=\"margin-right:0.07847em;\">X</span></span></span></span> 的表示方法很像</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"The \\t is a tab\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span>The      <span class=\"token keyword\">is</span> a tab</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">'I\\'m going to the movies'</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span>I'm going to the movies</pre></td></tr></table></figure><p>三引号的使用方法</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token triple-quoted-string string\">'''I'm going to the movies'''</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span>I'm going to the movies</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>html <span class=\"token operator\">=</span> <span class=\"token triple-quoted-string string\">'''</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>&lt;HTML>&lt;HEAD>&lt;TITLE></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>Friends CGI Demo&lt;/TITLE>&lt;/HEAD></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>&lt;BODY>&lt;H3>ERORR&lt;/H3></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>&lt;B>%s&lt;/B>&lt;P></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>&lt;FORM>&lt;INPUT TYPE=button VALUE=Back</pre></td></tr><tr><td data-num=\"8\"></td><td><pre>ONCLICK=\"window.history.back()\">&lt;/FORM></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>&lt;BODY>&lt;/HTML></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>'''</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>html<span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token operator\">&lt;</span>HTML<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>HEAD<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>TITLE<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>Friends CGI Demo<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>TITLE<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>HEAD<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token operator\">&lt;</span>BODY<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>H3<span class=\"token operator\">></span>ERORR<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>H3<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token operator\">&lt;</span>B<span class=\"token operator\">></span><span class=\"token operator\">%</span>s<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>B<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>P<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token operator\">&lt;</span>FORM<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span>INPUT TYPE<span class=\"token operator\">=</span>button VALUE<span class=\"token operator\">=</span>Back</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>ONCLICK<span class=\"token operator\">=</span><span class=\"token string\">\"window.history.back()\"</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>FORM<span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token operator\">&lt;</span>BODY<span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>HTML<span class=\"token operator\">></span></pre></td></tr></table></figure><p>字符串的连接分为两种</p>\n<h4 id=\"1-使用运算符\"><a class=\"anchor\" href=\"#1-使用运算符\">#</a> 1、使用 + 运算符</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>str1<span class=\"token operator\">=</span><span class=\"token string\">\"Hello \"</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>str2<span class=\"token operator\">=</span><span class=\"token string\">\"World!\"</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>str1<span class=\"token operator\">+</span>str2<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">></span>Hello World</pre></td></tr></table></figure><h4 id=\"2-使用join运算符\"><a class=\"anchor\" href=\"#2-使用join运算符\">#</a> 2、使用 join 运算符</h4>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>new_str <span class=\"token operator\">=</span> <span class=\"token string\">'-'</span><span class=\"token punctuation\">.</span>join<span class=\"token punctuation\">(</span><span class=\"token string\">'Hello'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>new_str<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">></span>H<span class=\"token operator\">-</span>e<span class=\"token operator\">-</span>l<span class=\"token operator\">-</span>l<span class=\"token operator\">-</span>o</pre></td></tr></table></figure><h2 id=\"三-列表list\"><a class=\"anchor\" href=\"#三-列表list\">#</a> 三、列表（List）</h2>\n<p>声明一个列表</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#声明一个列表</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>names<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'jack'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'tom'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'tonney'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'superman'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'jay'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#通过下标或索引获取元素</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>names<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span>jack</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>names<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span>tom</pre></td></tr></table></figure><p>访问最后一个元素</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#获取最后一个元素</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>names<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span>jay</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>names<span class=\"token punctuation\">[</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>names<span class=\"token punctuation\">)</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span>jay</pre></td></tr></table></figure><p>访问第一个元素</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#获取第一个元素</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>names<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span>jack</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>names<span class=\"token punctuation\">[</span><span class=\"token operator\">-</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span>jack</pre></td></tr></table></figure><p>查询列表中有没有值为'superman' 的元素</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># 查询列表中有没有值为'superman' 的元素</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>flag <span class=\"token operator\">=</span> <span class=\"token number\">0</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">for</span> name <span class=\"token keyword\">in</span> names<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token keyword\">if</span> name <span class=\"token operator\">==</span> <span class=\"token string\">\"superman\"</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Yes\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t\tflag <span class=\"token operator\">=</span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t\t<span class=\"token keyword\">break</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">if</span> flag <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"No\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\"># 更简便的方法</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token string\">'superman'</span> <span class=\"token keyword\">in</span> names<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Yes\"</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"No\"</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>添加元素、删除元素与统计元素</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">#声明空列表</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>girls <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token comment\">#append (), 末尾增加</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>girls<span class=\"token punctuation\">.</span>append<span class=\"token punctuation\">(</span><span class=\"token string\">'Alice'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>girls<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Alice'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">#extend (): 合并列表</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>models <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Mary'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>girls<span class=\"token punctuation\">.</span>extend<span class=\"token punctuation\">(</span>models<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token comment\">#girls = girls + models</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>girls<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Alice'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Mary'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">#insert (), 在指定位置增加</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>girls<span class=\"token punctuation\">.</span>insert<span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Jane'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>girls<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Alice'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Jane'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Mary'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token comment\">#del，删除列表元素</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">del</span> girls<span class=\"token punctuation\">[</span><span class=\"token number\">3</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>girls<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Alice'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Jane'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token comment\">#遍历方法</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token keyword\">for</span> i <span class=\"token keyword\">in</span> <span class=\"token builtin\">range</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>girls<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">></span> Alice Jane Cindy</pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token keyword\">for</span> girl <span class=\"token keyword\">in</span> girls<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>girl<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">></span> Alice Jane Cindy</pre></td></tr><tr><td data-num=\"24\"></td><td><pre><span class=\"token comment\">#截取方法</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>girls<span class=\"token punctuation\">[</span><span class=\"token number\">1</span><span class=\"token punctuation\">:</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'Jane'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token comment\">#count (), 统计某个元素的出现次数</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>girls<span class=\"token punctuation\">.</span>count<span class=\"token punctuation\">(</span><span class=\"token string\">'Jane'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token number\">1</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">#index (), 获得某个元素第一个匹配项的索引位置</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>girls<span class=\"token punctuation\">.</span>index<span class=\"token punctuation\">(</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token number\">2</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token comment\">#pop (), 移除列表的一个元素 (默认是最后一个元素), 并返回该元素的值</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>girls<span class=\"token punctuation\">.</span>pop<span class=\"token punctuation\">(</span>index<span class=\"token operator\">=</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> Cindy</pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\">#remove (), 移除某一个值的第一个匹配项</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\">#reverse (), 翻转列表中的元素</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token comment\">#sort (cmp=None,key=None,reverse=None) 对原列表排序，cmp 确定从大到小还是从小到大，key 确定排序关键字，reverse 确定是否翻转</span></pre></td></tr></table></figure><h2 id=\"四-元组\"><a class=\"anchor\" href=\"#四-元组\">#</a> 四、元组</h2>\n<p>特性：与列表类似，但元组内容不可修改</p>\n<p>与列表转换方法:</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>tuple1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'world'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>list1 <span class=\"token operator\">=</span> <span class=\"token builtin\">list</span><span class=\"token punctuation\">(</span>tuple1<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>list1<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">[</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'world'</span><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><p>定义元组（只有一个元素时，最后面要加逗号）</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>tuple1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>tuple1<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">class</span> <span class=\"token string\">'tuple'</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>tuple2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>tuple2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">class</span> <span class=\"token string\">'str'</span><span class=\"token operator\">></span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>tuple3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'hello'</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">type</span><span class=\"token punctuation\">(</span>tuple3<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token operator\">&lt;</span><span class=\"token keyword\">class</span> <span class=\"token string\">'tuple'</span><span class=\"token operator\">></span></pre></td></tr></table></figure><p>访问元组</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>tup1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'I'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'am'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'a'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'dog'</span><span class=\"token punctuation\">,</span><span class=\"token number\">233</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>tup1<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span> I</pre></td></tr></table></figure><p>遍历元组和遍历列表的方法是一样的</p>\n<p>无任何符号的对象而且用逗号隔开默认为元组</p>\n<h2 id=\"五-字典\"><a class=\"anchor\" href=\"#五-字典\">#</a> 五、字典</h2>\n<p>定义空字典</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>dict1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>定义一个字典时并初始化</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>dict2 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'Alice'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'weight'</span><span class=\"token punctuation\">:</span><span class=\"token number\">45</span><span class=\"token punctuation\">,</span><span class=\"token string\">'age'</span><span class=\"token punctuation\">:</span><span class=\"token number\">25</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dict2<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span>Alice</pre></td></tr></table></figure><p>定义一个字典后添加元素</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>dict3 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>dict3<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token string\">'Cindy'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>dict3<span class=\"token punctuation\">[</span><span class=\"token string\">'weight'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">43</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dict3<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span>  <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'weight'</span><span class=\"token punctuation\">:</span><span class=\"token number\">43</span><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>修改字典元素</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>dict3<span class=\"token punctuation\">[</span><span class=\"token string\">'weight'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token number\">44</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dict3<span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span><span class=\"token operator\">></span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">:</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'weight'</span><span class=\"token punctuation\">:</span><span class=\"token number\">44</span><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>字典元素删除</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">del</span> dict3<span class=\"token punctuation\">[</span><span class=\"token string\">'name'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 删除键是 'name' 的条目</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>dict3<span class=\"token punctuation\">.</span>clear<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>     <span class=\"token comment\"># 清空字典所有条目</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">del</span> dict3         <span class=\"token comment\"># 删除字典</span></pre></td></tr></table></figure><p>字典内置函数</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin\">cmp</span><span class=\"token punctuation\">(</span>dict1<span class=\"token punctuation\">,</span>dict2<span class=\"token punctuation\">)</span> <span class=\"token comment\"># 比较两个字典元素</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin\">len</span><span class=\"token punctuation\">(</span>dict1<span class=\"token punctuation\">)</span>       <span class=\"token comment\"># 计算字典元素个数，即 key 的个数</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin\">str</span><span class=\"token punctuation\">(</span>dict1<span class=\"token punctuation\">)</span>       <span class=\"token comment\"># 输出字典可打印的字符串</span></pre></td></tr></table></figure><p>字典内置方法</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token builtin\">dict</span><span class=\"token punctuation\">.</span>copy<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 返回字典的一个复制品</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token builtin\">dict</span><span class=\"token punctuation\">.</span>fromkeys<span class=\"token punctuation\">(</span>seq<span class=\"token punctuation\">[</span><span class=\"token punctuation\">,</span>val<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 创建一个新字典，以序列 seq 中的元素做字典的 key，val 为所有 key 的对应初始值</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token builtin\">dict</span><span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">,</span>default<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\"># 返回指定 key 的值，如果值不在字典中返回 default</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">#dict.item () 返回可遍历的 (key,value)</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>dict5 <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token string\">'Alice'</span><span class=\"token punctuation\">:</span><span class=\"token number\">165</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">:</span><span class=\"token number\">166</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Jane'</span><span class=\"token punctuation\">:</span><span class=\"token number\">164</span><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>dict5<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">></span>dict_items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Alice'</span><span class=\"token punctuation\">,</span><span class=\"token number\">165</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">,</span><span class=\"token number\">166</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span><span class=\"token punctuation\">(</span><span class=\"token string\">'Jane'</span><span class=\"token punctuation\">,</span><span class=\"token number\">164</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">for</span> key<span class=\"token punctuation\">,</span>value <span class=\"token keyword\">in</span> dict5<span class=\"token punctuation\">.</span>items<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token keyword\">if</span> value <span class=\"token operator\">></span> <span class=\"token number\">165</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t\t<span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>key<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token operator\">-</span><span class=\"token operator\">></span> Cindy</pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token comment\">#dict.keys () 返回可遍历的 keys</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>names <span class=\"token operator\">=</span>  dict5<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>names<span class=\"token punctuation\">)</span>   <span class=\"token operator\">-</span><span class=\"token operator\">></span>dict_keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'Alice'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Cindy'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'Jane'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token comment\">#dict.value () 返回可遍历的 vales</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>values <span class=\"token operator\">=</span> dict5<span class=\"token punctuation\">.</span>keys<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre><span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>values<span class=\"token punctuation\">)</span>  <span class=\"token operator\">-</span><span class=\"token operator\">></span>dict_values<span class=\"token punctuation\">[</span><span class=\"token number\">165</span><span class=\"token punctuation\">,</span><span class=\"token number\">166</span><span class=\"token punctuation\">,</span><span class=\"token number\">164</span><span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre><span class=\"token comment\">#dict.has_key (key)  返回字典里是否存在 key 值，是则返回 true，否则返回 false</span></pre></td></tr></table></figure>",
            "tags": [
                "机器学习",
                "Python"
            ]
        },
        {
            "id": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E6%9C%80%E5%A4%A7%E6%B5%81%E4%B8%8E%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D/",
            "url": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E6%9C%80%E5%A4%A7%E6%B5%81%E4%B8%8E%E4%BA%8C%E5%88%86%E5%9B%BE%E5%8C%B9%E9%85%8D/",
            "title": "模板之最大流与二分图匹配",
            "date_published": "2023-03-21T05:05:12.000Z",
            "content_html": "<h1 id=\"最大流和二分图匹配的模板\"><a class=\"anchor\" href=\"#最大流和二分图匹配的模板\">#</a> 最大流和二分图匹配的模板</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-二分图匹配\"><a class=\"anchor\" href=\"#一-二分图匹配\">#</a> 一、二分图匹配</h2>\n<p>二分图是一种特殊的图，图中每一条边所关联的两个节点都属于两个不同的点集，匹配的定义是在二分图的一个子图中任意一条边都不依附于同一个节点，称为是一个匹配，最大匹配是所有匹配中边数最多的匹配。</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDMzODY=\">例题：二分图匹配</span></p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N=1001;\n\nint n,m,E,rgh[N];\nbool use[N],link[N][N];\n\nbool find(int x)\n&#123;\n\tfor(int i=1;i&lt;=m;i++)\n\t&#123;\n\t\tif(link[x][i] &amp;&amp; !use[i])\n\t\t&#123;\n\t\t\tuse[i]=true;\n\t\t\tif(!rgh[i] || find(rgh[i]))\n\t\t\t&#123;\n\t\t\t\trgh[i]=x;\n\t\t\t\treturn true;\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;\n\treturn false;\n&#125;\n\nint main()\n&#123;\n\tscanf(&quot;%d %d %d&quot;,&amp;n,&amp;m,&amp;E);\n\tfor(int i=1;i&lt;=E;i++)\n\t&#123;\n\t\tint zuo,you;\n\t\tscanf(&quot;%d %d&quot;,&amp;zuo,&amp;you);\n\t\tif(zuo&gt;n || you&gt;m)\n\t\t\tcontinue;\n\t\tlink[zuo][you]=true;\n\t&#125;\n\tint sum=0;\n\tfor(int i=1;i&lt;=n;i++)\n\t&#123;\n\t\tmemset(use,0,sizeof(use));\n\t\tif(find(i))\n\t\t\tsum++;\n\t&#125;\n\tprintf(&quot;%d\\n&quot;,sum);\n\treturn 0;\n&#125;\n</code></pre>\n<h2 id=\"二-最大流\"><a class=\"anchor\" href=\"#二-最大流\">#</a> 二、最大流</h2>\n<p>给定一个图，图中每一条边都有一个权值，把每一条边当做是水管，权值是就是最大流量，最大流问题，就是满足这些性质的情况下，源点到汇点的最大流量</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDMzNzY=\">例题：网络最大流</span></p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N=100001;\nstruct node\n&#123;\n\tint to,len,id;\n\tnode(int tt,int ll,int ii)\n\t&#123;\n\t\tto=tt,len=ll,id=ii;\n\t&#125;\n\tnode()\n\t&#123;\n\t&#125;\n&#125;;\nvector &lt;node &gt; g[N];\nvector &lt;node &gt; v[N];\nint n,m,st,ed,pre[200001][2];\nbool vis[N],flag[N];\nqueue &lt;int &gt; q;\nbool bfs()\n&#123;\n\tq.push(st),vis[st]=true;\n\twhile(!q.empty())\n\t&#123;\n\t\tint t=q.front();\n\t\tq.pop();\n\t\tint size=g[t].size();\n\t\tfor(int i=0;i&lt;size;i++)\n\t\t&#123;\n\t\t\tint to=g[t][i].to;\n\t\t\tint len=g[t][i].len;\n\t\t\tif(!vis[to] &amp;&amp; len&gt;0)\n\t\t\t&#123;\n\t\t\t\tvis[to]=true;\n\t\t\t\tpre[to][0]=t,pre[to][1]=len;\n\t\t\t\tif(to==ed)\n\t\t\t\t\treturn true;\n\t\t\t\tq.push(to);\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;\n\treturn false;\n&#125;\nvoid dfs(int cur,int &amp;val)\n&#123;\n\tint size=v[cur].size();\n\tfor(int i=0;i&lt;size;i++)\n\t&#123;\n\t\tif(v[cur][i].to==pre[cur][0])\n\t\t&#123;\n\t\t\tflag[v[cur][i].id]=true;\n\t\t\tval=min(pre[cur][1],val);\n\t\t\tdfs(v[cur][i].to,val);\n\t\t&#125;\n\t&#125;\n\treturn;\n&#125;\nint ek()\n&#123;\n\tint ans=0;\n\twhile(bfs())\n\t&#123;\n\t\tint minn=0x7f7f7f7f;\n\t\tdfs(ed,minn);\n\t\tfor(int i=1;i&lt;=n;i++)\n\t\t&#123;\n\t\t\tint s1=g[i].size();\n\t\t\tint s2=v[i].size();\n\t\t\tfor(int j=0;j&lt;s1;j++)\n\t\t\t\tif(flag[g[i][j].id])\n\t\t\t\t\tg[i][j].len-=minn;\n\t\t\tfor(int j=0;j&lt;s2;j++)\n\t\t\t\tif(flag[v[i][j].id])\n\t\t\t\t\tv[i][j].len+=minn;\n\t\t&#125;\n\t\tans+=minn;\n\t\tmemset(vis,0,sizeof(vis));\n\t\tmemset(flag,0,sizeof(flag));\n\t\tmemset(pre,0,sizeof(pre));\n\t\twhile(!q.empty()) q.pop();\n\t&#125;\n\treturn ans;\n&#125;\nint main()\n&#123;\n\tscanf(&quot;%d %d %d %d&quot;,&amp;n,&amp;m,&amp;st,&amp;ed);\n\tfor(int i=1;i&lt;=m;i++)\n\t&#123;\n\t\tint a,b,c;\n\t\tscanf(&quot;%d %d %d&quot;,&amp;a,&amp;b,&amp;c);\n\t\tg[a].push_back(node(b,c,i));\n\t\tv[b].push_back(node(a,0,i));\n\t&#125;\n\tprintf(&quot;%d\\n&quot;,ek());\n\treturn 0;\n&#125;\n</code></pre>\n<p>另一种写法：</p>\n<pre><code class=\"language-c++\">#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N=100001;\nconst int INF=0x7f7f7f7f;\nstruct node\n&#123;\n\tint to;\n\tint cap;\n\tint flink;\n\tnode(int tt,int cc,int ff)\n\t&#123;\n\t\tto=tt,cap=cc,flink=ff;\n\t&#125;\n\tnode()\n\t&#123;\n\t&#125;\n&#125;;\nvector &lt;node &gt; g[N];\nbool vis[N];\nint n,m,st,ed;\nint dfs(int now,int aim,int val)\n&#123;\n\tif(now==aim)\n\t\treturn val;\n\tvis[now]=true;\n\tint size=g[now].size();\n\tfor(int i=0;i&lt;size;i++)\n\t&#123;\n\t\tint to=g[now][i].to;\n\t\tint len=g[now][i].cap;\n\t\tint f=g[now][i].flink;\n\t\tif(!vis[to] &amp;&amp; len&gt;0)\n\t\t&#123;\n\t\t\tint v=dfs(to,aim,min(len,val));\n\t\t\tif(v&gt;0)\n\t\t\t&#123;\n\t\t\t\tg[now][i].cap-=v;\n\t\t\t\tg[to][f].cap+=v;\n\t\t\t\treturn v;\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;\n\treturn 0;\n&#125;\nint EK()\n&#123;\n\tint ans=0;\n\twhile(1)\n\t&#123;\n\t\tmemset(vis,0,sizeof(vis));\n\t\tint flow=dfs(st,ed,INF);\n\t\tif(!flow)\n\t\t\treturn ans;\n\t\tans+=flow;\n\t&#125;\n\treturn ans;\n&#125;\nint main()\n&#123;\n\tscanf(&quot;%d %d %d %d&quot;,&amp;m,&amp;n,&amp;st,&amp;ed);\n\tfor(int i=0;i&lt;m;i++)\n\t&#123;\n\t\tint a,b,c;\n\t\tscanf(&quot;%d %d %d&quot;,&amp;a,&amp;b,&amp;c);\n\t\tg[a].push_back(node(b,c,g[b].size()));\n\t\tg[b].push_back(node(a,0,g[a].size()-1));\n\t&#125;\n\tprintf(&quot;%d\\n&quot;,EK());\n\treturn 0;\n&#125;\n</code></pre>\n<h2 id=\"三-最小费用最大流\"><a class=\"anchor\" href=\"#三-最小费用最大流\">#</a> 三、最小费用最大流</h2>\n<p>这部分用的是增广路算法，代码如下：</p>\n<pre><code class=\"language-c++\">#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N=100001;\nconst int INF=0x7f7f7f7f;\nstruct node\n&#123;\n\tint to;\n\tint len;\n\tint flink;\n\tint cost;\n\tnode(int tt,int ll,int ff,int oo)\n\t&#123;\n\t\tto=tt,len=ll,flink=ff,cost=oo;\n\t&#125;\n\tnode()\n\t&#123;\n\t&#125;\n&#125;;\nvector &lt;node &gt; g[N];\nbool flag[N];\nint n,m,S,T,dis[N],flow[N],pre[N][2];\nbool spfa()\n&#123;\n\tmemset(pre,0,sizeof(pre));\n\tmemset(dis,0x3f,sizeof(dis));\n\tmemset(flow,0x3f,sizeof(flow));\n\tmemset(flag,0,sizeof(flag));\n\tqueue &lt;int &gt; q;\n\tq.push(S),dis[S]=0,pre[T][0]=-1,flag[S]=true;\n\twhile(!q.empty())\n\t&#123;\n\t\tint t=q.front();\n\t\tq.pop();\n\t\tflag[t]=false;\n\t\tint size=g[t].size();\n\t\tfor(int i=0;i&lt;size;i++)\n\t\t&#123;\n\t\t\tint to=g[t][i].to;\n\t\t\tint len=g[t][i].len;\n\t\t\tint cos=g[t][i].cost;\n\t\t\tif(len&gt;0 &amp;&amp; dis[to]&gt;dis[t]+cos)\n\t\t\t&#123;\n\t\t\t\tdis[to]=dis[t]+cos;\n\t\t\t\tflow[to]=min(flow[t],len);\n\t\t\t\tpre[to][0]=t;\n\t\t\t\tpre[to][1]=i;\n\t\t\t\tif(!flag[to])\n\t\t\t\t\tq.push(to),flag[to]=true;\n\t\t\t&#125;\n\t\t&#125;\n\t&#125;\n\treturn dis[T]!=0x3f3f3f3f;\n&#125;\nint maxflow,mincost;\nvoid MDMF()\n&#123;\n\twhile(spfa())\n\t&#123;\n\t\tint now=T;\n\t\tmaxflow+=flow[T];\n\t\tmincost+=flow[T]*dis[T];\n\t\twhile(now!=S)\n\t\t&#123;\n\t\t\tg[pre[now][0]][pre[now][1]].len-=flow[T];\n\t\t\tg[now][g[pre[now][0]][pre[now][1]].flink].len+=flow[T];\n\t\t\tnow=pre[now][0];\n\t\t&#125;\n\t&#125;\n\treturn;\n&#125;\nvoid add(int now,int to,int len,int cos)\n&#123;\n\tg[now].push_back(node(to,len,g[to].size(),cos));\n\tg[to].push_back(node(now,0,g[now].size()-1,-cos));\n\treturn;\n&#125;\nint main()\n&#123;\n\tscanf(&quot;%d %d %d %d&quot;,&amp;n,&amp;m,&amp;S,&amp;T);\n\tfor(int i=0;i&lt;m;i++)\n\t&#123;\n\t\tint a,b,c,d;\n\t\tscanf(&quot;%d %d %d %d&quot;,&amp;a,&amp;b,&amp;c,&amp;d);\n\t\tadd(a,b,c,d);\n\t&#125;\n\tMDMF();\n\tprintf(&quot;%d %d\\n&quot;,maxflow,mincost);\n\treturn 0;\n&#125;\n</code></pre>\n<p>例题如下：</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vbGlzdD9rZXl3b3JkPSVFNiU5QyU4MCVFNSVCMCU4RiVFOCVCNCVCOSVFNyU5NCVBOCVFNiU5QyU4MCVFNSVBNCVBNyVFNSU4QSU5QiZhbXA7cGFnZT0x\">最小费用最大流</span></p>\n<p>两种算法的具体解析请移步另一篇文章</p>\n",
            "tags": [
                "OI模板",
                "C++",
                "图论",
                "最大流"
            ]
        },
        {
            "id": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%BF%AB%E8%AF%BB%E3%80%81%E5%BF%AB%E5%86%99%E5%92%8C%E5%AF%B9%E6%8B%8D/",
            "url": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E5%BF%AB%E8%AF%BB%E3%80%81%E5%BF%AB%E5%86%99%E5%92%8C%E5%AF%B9%E6%8B%8D/",
            "title": "模板之快读、快写和对拍",
            "date_published": "2023-03-21T01:34:54.000Z",
            "content_html": "<h1 id=\"快读-快写和对拍的模板\"><a class=\"anchor\" href=\"#快读-快写和对拍的模板\">#</a> 快读、快写和对拍的模板</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-用途介绍\"><a class=\"anchor\" href=\"#一-用途介绍\">#</a> 一、用途介绍</h2>\n<p>其实我觉得不需要介绍太多，写这东西不就为了卡个常数吗，不卡常数用<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>s</mi><mi>c</mi><mi>a</mi><mi>n</mi><mi>f</mi></mrow><annotation encoding=\"application/x-tex\">scanf</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.10764em;\">f</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>c</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding=\"application/x-tex\">cin</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.65952em;vertical-align:0em;\"></span><span class=\"mord mathnormal\">c</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">n</span></span></span></span> 不香吗</p>\n<h2 id=\"二-代码\"><a class=\"anchor\" href=\"#二-代码\">#</a> 二、代码</h2>\n<p>Code:</p>\n<pre><code class=\"language-c++\">inline void read(int &amp; a)\n&#123;\n    char ch;\n    int fh=1;\n    while(!(isdigit(ch)))\n    &#123;\n        if(ch=='-')\n            fh=-1;\n        ch=getchar();\n    &#125;\n    a=ch-'0';\n    ch=getchar();\n    while(isdigit(ch))\n        a=(a&lt;&lt;3)+(a&lt;&lt;1)+ch-'0',ch=getchar();\n    a*=fh;\n&#125;\ninline void write(int x)\n&#123;\n    if(x&lt;0)\n\t&#123;//判断负数\n        x=-x;\n        putchar('-');\n    &#125;\n    if(x&gt;9) write(x/10);//位值拆数，递归\n    putchar(x%10+'0');//按位输出\n&#125;\n</code></pre>\n<p>对拍的 Code:</p>\n<pre><code class=\"language-c++\">#include &lt;windows.h&gt;\n#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nint main()\n&#123;\n    int T=1000;\n    while(T--)\n    &#123;\n        system(&quot;data.exe &gt;  1.in&quot;);\n        system(&quot;my.exe &lt;1.in &gt; 1.out&quot;);\n        system(&quot;bc.exe &lt;1.in &gt; 2.out&quot;);\n        if(system(&quot;fc 1.out 2.out&quot;))\n            break;\n    &#125;\n    system(&quot;pause&quot;);\n    return 0;\n&#125;\n/*\ndata为数据生成器\nmy为自己的高效代码\nbc为自己的暴力代码 记得每个文件点一下编译运行\n如果错误，数据在1.in中\n*/\n</code></pre>\n",
            "tags": [
                "OI模板",
                "C++",
                "数据读写"
            ]
        },
        {
            "id": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E9%AB%98%E7%B2%BE%E5%BA%A6/",
            "url": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E9%AB%98%E7%B2%BE%E5%BA%A6/",
            "title": "模板之高精度",
            "date_published": "2023-03-21T01:09:44.000Z",
            "content_html": "<h1 id=\"高精度模板\"><a class=\"anchor\" href=\"#高精度模板\">#</a> 高精度模板</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-高精度简介\"><a class=\"anchor\" href=\"#一-高精度简介\">#</a> 一、高精度简介</h2>\n<p>什么时候用高精度呢，很简单，当你的答案大到练<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi><mi>l</mi><mi>o</mi><mi>n</mi><mi>g</mi></mrow><annotation encoding=\"application/x-tex\">long long</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8888799999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span></span></span></span> 都存不下去的时候，高精度就派上用场了。一般的高精度时间复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>2</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^2)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\">2</span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span> 的，优化过后的算法可以降低到<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><msup><mi>n</mi><mn>1.57</mn></msup><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n^{1.57})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.064108em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\"><span class=\"mord mathnormal\">n</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8141079999999999em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mtight\">1</span><span class=\"mord mtight\">.</span><span class=\"mord mtight\">5</span><span class=\"mord mtight\">7</span></span></span></span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span>，但一般的题目中用最朴素的高精度就可以解决大多数问题，因此只上了一般的高精度代码</p>\n<h2 id=\"二-例题和代码\"><a class=\"anchor\" href=\"#二-例题和代码\">#</a> 二、例题和代码</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDE2MDE=\">例题：A+B Problem plus</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDEzMDM=\">例题：A*B Problem plus</span></p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDE0ODA=\">例题：A/B Problem plus</span></p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">struct biglong\n&#123;\n    int d[N],fh;\n\n    void print()\n    &#123;\n        d[1]*=fh;\n        for(int i=1;i&lt;=d[0];i++)\n            printf(&quot;%d&quot;,d[i]);\n        printf(&quot;\\n&quot;);\n    &#125;\n\n    bool operator &lt; (const biglong &amp; ot) const\n    &#123;\n        if(d[0]==ot.d[0])\n        &#123;\n            for(int i=1;i&lt;=d[0];i++)\n            &#123;\n                if(d[i]==ot.d[i])\n                    continue;\n                return d[i]&lt;ot.d[i];\n            &#125;\n        &#125;\n        return d[0]&lt;ot.d[0];\n    &#125;\n\n    biglong operator + (biglong &amp; ot)\n    &#123;\n        biglong t;\n        memset(t.d,0,sizeof(t.d));\n        for(int a=1,b=d[0];a&lt;b;a++,b--)\n            swap(d[a],d[b]);\n        for(int a=1,b=ot.d[0];a&lt;b;a++,b--)\n            swap(ot.d[a],ot.d[b]);\n        int borrow=0;\n        t.d[0]=max(d[0],ot.d[0]);\n        for(int i=1;i&lt;=t.d[0];i++)\n        &#123;\n            t.d[i]=borrow+d[i]+ot.d[i];\n            if(t.d[i]&gt;=10)\n                borrow=t.d[i]/10,t.d[i]%=10;\n            else\n                borrow=0;\n        &#125;\n        if(borrow&gt;0)\n            t.d[0]++,t.d[t.d[0]]=borrow;\n        for(int a=1,b=d[0];a&lt;b;a++,b--)\n            swap(d[a],d[b]);\n        for(int a=1,b=ot.d[0];a&lt;b;a++,b--)\n            swap(ot.d[a],ot.d[b]);\n        for(int a=1,b=t.d[0];a&lt;b;a++,b--)\n            swap(t.d[a],t.d[b]);\n        return t;\n    &#125;\n\n    biglong operator * (biglong &amp; ot)\n    &#123;\n        biglong t;\n        memset(t.d,0,sizeof(t.d));\n        for(int a=1,b=d[0];a&lt;b;a++,b--)\n            swap(d[a],d[b]);\n        for(int a=1,b=ot.d[0];a&lt;b;a++,b--)\n            swap(ot.d[a],ot.d[b]);\n        for(int i=1;i&lt;=d[0];i++)\n        &#123;\n           for(int j=1;j&lt;=ot.d[0];j++)\n           &#123;\n                t.d[i+j-1]+=d[i]*ot.d[j];\n                t.d[i+j]+=t.d[i+j-1]/10;\n                t.d[i+j-1]%=10;\n           &#125;\n        &#125;\n        t.d[0]=d[0]+ot.d[0];\n        while(t.d[t.d[0]]==0)\n            t.d[0]--;\n        for(int a=1,b=t.d[0];a&lt;b;a++,b--)\n            swap(t.d[a],t.d[b]);\n        for(int a=1,b=d[0];a&lt;b;a++,b--)\n            swap(d[a],d[b]);\n        for(int a=1,b=ot.d[0];a&lt;b;a++,b--)\n            swap(ot.d[a],ot.d[b]);\n        return t;\n    &#125;\n&#125;;\n\nbiglong zero;\n\nbiglong cut(biglong x,biglong y)\n&#123;\n    biglong t;\n    memset(t.d,0,sizeof(t.d));\n    if(x&lt;y)\n    &#123;\n        biglong temp=zero;\n        temp=x,x=y,y=temp;\n        t.fh=-1;\n    &#125;\n    else\n        t.fh=1;\n    for(int a=1,b=x.d[0];a&lt;b;a++,b--)\n        swap(x.d[a],x.d[b]);\n    for(int a=1,b=y.d[0];a&lt;b;a++,b--)\n        swap(y.d[a],y.d[b]);\n    int maxn=max(x.d[0],y.d[0]);\n    for(int i=1;i&lt;=maxn;i++)\n    &#123;\n        if(x.d[i]&lt;y.d[i])\n        &#123;\n            x.d[i+1]--;\n            x.d[i]+=10;\n        &#125;\n        t.d[i]=x.d[i]-y.d[i];\n    &#125;\n    while(t.d[maxn]==0)\n        maxn--;\n    t.d[0]=maxn;\n    if(maxn&lt;0)\n        memset(t.d,0,sizeof(t.d)),t.d[0]=1;\n    for(int a=1,b=t.d[0];a&lt;b;a++,b--)\n        swap(t.d[a],t.d[b]);\n    return t;\n&#125;\n\nbiglong mul(biglong x,int v)\n&#123;\n    biglong ans=zero;\n    for(int a=1,b=x.d[0];a&lt;b;a++,b--)\n        swap(x.d[a],x.d[b]);\n    int borrow=0;\n    for(int t=1;t&lt;=x.d[0] || borrow;t++)\n    &#123;\n        ans.d[t]=x.d[t]*v+borrow;\n        borrow=ans.d[t]/10;\n        ans.d[t]%=10;\n        ans.d[0]++;\n    &#125;\n    for(int a=1,b=x.d[0];a&lt;b;a++,b--)\n        swap(x.d[a],x.d[b]);\n    for(int a=1,b=ans.d[0];a&lt;b;a++,b--)\n        swap(ans.d[a],ans.d[b]);\n    return ans;\n&#125;\n\nbiglong divison(biglong x,int cut)\n&#123;\n    biglong ans1=zero,ans2=zero;\n    int borrow=0;\n    for(int i=1;i&lt;=x.d[0];i++)\n    &#123;\n        ans1.d[i]=(borrow*10+x.d[i])/cut;\n        borrow=(borrow*10+x.d[i])%cut;\n    &#125;\n    int len=1;\n    while(ans1.d[len]==0 &amp;&amp; len&lt;x.d[0])\n        len++;\n    for(int i=1;i&lt;=x.d[0]-len+1;i++)\n        ans2.d[i]=ans1.d[i+len-1];\n    ans2.d[0]=x.d[0]-len+1;\n    return ans2;\n&#125;\n</code></pre>\n",
            "tags": [
                "OI模板",
                "C++",
                "高精度"
            ]
        },
        {
            "id": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E8%8E%AB%E9%98%9F/",
            "url": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E8%8E%AB%E9%98%9F/",
            "title": "模板之莫队",
            "date_published": "2023-03-21T00:58:46.000Z",
            "content_html": "<h1 id=\"莫队算法的模板\"><a class=\"anchor\" href=\"#莫队算法的模板\">#</a> 莫队算法的模板</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-简介\"><a class=\"anchor\" href=\"#一-简介\">#</a> 一、简介</h2>\n<p>莫队算法是由莫涛大神提出的一种区间操作的算法，这个算法的基础是分块和排序，整体复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><msqrt><mi>x</mi></msqrt><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n\\sqrt x)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1.05028em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mord sqrt\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.8002800000000001em;\"><span class=\"svg-align\" style=\"top:-3em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"mord mathnormal\" style=\"padding-left:0.833em;\">x</span></span><span style=\"top:-2.76028em;\"><span class=\"pstrut\" style=\"height:3em;\"></span><span class=\"hide-tail\" style=\"min-width:0.853em;height:1.08em;\"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702\nc-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14\nc0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54\nc44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10\ns173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429\nc69,-144,104.5,-217.7,106.5,-221\nl0 -0\nc5.3,-9.3,12,-14,20,-14\nH400000v40H845.2724\ns-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7\nc-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z\nM834 80h400000v40h-400000z'/></svg></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.23972em;\"><span></span></span></span></span></span><span class=\"mclose\">)</span></span></span></span></p>\n<p>这里不细讲莫队的原理细节，原理和细节请移步另一篇文章，上例题和代码</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDE0OTQ=\">例题：小 Z 的袜子</span></p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N=100001;\nlong long block,n,m,d[N],ans,answer[N][2],cnt[2*N],K;\nstruct node\n&#123;\n\tlong long block_id,l,r,id;\n\tbool operator &lt; (const node &amp; ot) const\n\t&#123;\n\t\tif(block_id==ot.block_id)\n\t\t\treturn r&lt;ot.r;\n\t\treturn block_id&lt;ot.block_id;\n\t&#125;\n&#125;que[N],ys[N];\nlong long gcd(long long a,long long b)\n&#123;\n    return b?gcd(b,a%b):a;\n&#125;\ninline void read(long long &amp; a)\n&#123;\n    char ch;\n    while(!(((ch=getchar())&gt;='0')&amp;&amp;(ch&lt;='9')));\n    a=ch-'0';\n    while(((ch=getchar())&gt;='0')&amp;&amp;(ch&lt;='9'))(a*=10)+=ch-'0';\n&#125;\nvoid add(long long x)\n&#123;\n\tans+=cnt[d[x]];\n\tcnt[d[x]]++;\n\treturn;\n&#125;\nvoid del(long long x)\n&#123;\n\tif(cnt[d[x]]&gt;1)\n\t\tans-=cnt[d[x]]-1;\n\tcnt[d[x]]--;\n\treturn;\n&#125;\nint main()\n&#123;\n\tread(n),read(m);\n\tfor(long long i=1;i&lt;=n;i++)\n\t\tread(d[i]);\n\tblock=n/sqrt(m*2/3);\n\tfor(long long i=1;i&lt;=m;i++)\n\t&#123;\n\t\tread(que[i].l),read(que[i].r);\n\t\tque[i].id=i;\n\t\tys[i].l=que[i].l,ys[i].r=que[i].r;\n\t\tif(que[i].l%block==0)\n\t\t\tque[i].block_id=que[i].l/block;\n\t\telse\n\t\t\tque[i].block_id=que[i].l/block+1;\n\t&#125;\n\tsort(que+1,que+1+m);\n\tlong long l=1,r=0;\n\tfor(long long i=1;i&lt;=m;i++)\n\t&#123;\n\t\tif(que[i].l==que[i].r)\n\t\t\tcontinue;\n\t\twhile(l&gt;que[i].l)\n\t\t\tadd(--l);\n\t\twhile(r&lt;que[i].r)\n\t\t\tadd(++r);\n\t\twhile(l&lt;que[i].l)\n\t\t\tdel(l++);\n\t\twhile(r&gt;que[i].r)\n\t\t\tdel(r--);\n\t\tanswer[que[i].id][0]=ans,answer[que[i].id][1]=(que[i].r-que[i].l+1)*(que[i].r-que[i].l)/2;\n\t&#125;\n\tfor(long long i=1;i&lt;=m;i++)\n\t&#123;\n\t\tif(ys[i].l==ys[i].r)\n\t\t&#123;\n\t\t\tprintf(&quot;0/1\\n&quot;);\n\t\t\tcontinue;\n\t\t&#125;\n\t\tlong long g=gcd(answer[i][0],answer[i][1]);\n\t\tif(answer[i][0]!=0)\n\t\t\tprintf(&quot;%lld/%lld\\n&quot;,answer[i][0]/g,answer[i][1]/g);\n\t\telse\n\t\t\tprintf(&quot;0/1\\n&quot;);\n\t&#125;\n\treturn 0;\n&#125;\n</code></pre>\n",
            "tags": [
                "OI模板",
                "C++",
                "分块",
                "莫队"
            ]
        },
        {
            "id": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E6%89%A9%E6%AC%A7%E3%80%81gcd%E3%80%81%E5%BF%AB%E9%80%9F%E5%B9%82/",
            "url": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E6%89%A9%E6%AC%A7%E3%80%81gcd%E3%80%81%E5%BF%AB%E9%80%9F%E5%B9%82/",
            "title": "模板之扩欧、gcd和快速幂",
            "date_published": "2023-03-20T13:15:54.000Z",
            "content_html": "<h1 id=\"扩展欧几里得-gcd-快速幂模板\"><a class=\"anchor\" href=\"#扩展欧几里得-gcd-快速幂模板\">#</a> 扩展欧几里得、gcd、快速幂模板</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-gcd模板\"><a class=\"anchor\" href=\"#一-gcd模板\">#</a> 一、gcd 模板</h2>\n<p>gcd 全称就是最大公约数，lcm 是最小公倍数，而 lcm 可以很容易根据 gcd 得出，所以这里只给出 gcd 的代码</p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">typedef long long ll;\nll gcd(ll a,ll b)\n&#123;\n    return b?gcd(b,a%b):a;\n&#125;\n</code></pre>\n<h2 id=\"二-扩展欧几里得\"><a class=\"anchor\" href=\"#二-扩展欧几里得\">#</a> 二、扩展欧几里得</h2>\n<p>先简单介绍一下其作用：</p>\n<p>1、求解不定方程</p>\n<p>2、求解模的逆元</p>\n<p>3、求解线性同余方程</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDI2MTM=\">例题：有理数取余</span></p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int mod=19260817;\nconst int N=10001;\ntypedef long long ll;\nint a[N],b[N];\nll expand(ll a,ll b,ll &amp;x,ll &amp;y)\n&#123;\n    if(b==0)\n    &#123;\n        x=1,y=0;\n        return a;\n    &#125;\n    ll r=expand(b,a%b,x,y);\n    ll t=y;\n    y=x-(a/b)*y;\n    x=t;\n    return r;\n&#125;\nint main()\n&#123;\n\tchar ch[N];\n\tscanf(&quot;%s&quot;,ch);\n\tint len=strlen(ch);\n\tll aa=0,bb=0;\n\tfor(int i=0;i&lt;len;i++)\n\t\taa=(aa*10+ch[i]-'0')%mod;\n\tscanf(&quot;%s&quot;,ch);\n\tlen=strlen(ch);\n\tfor(int i=0;i&lt;len;i++)\n\t\tbb=(bb*10+ch[i]-'0')%mod;\n\tll x0,y0;\n\texpand(bb,mod,x0,y0);\n\tif(bb==0)\n\t\tprintf(&quot;Angry!\\n&quot;);\n\telse\n\t\tprintf(&quot;%lld\\n&quot;,(aa*((x0%mod+mod)%mod))%mod);\n\treturn 0;\n&#125;\n</code></pre>\n<p>原理方面请移步另一篇文章</p>\n<h2 id=\"三-快速幂\"><a class=\"anchor\" href=\"#三-快速幂\">#</a> 三、快速幂</h2>\n<p>正常的求<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mi>x</mi><mi>n</mi></msup></mrow><annotation encoding=\"application/x-tex\">x^n</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.664392em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">x</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.664392em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\">n</span></span></span></span></span></span></span></span></span></span></span> 需要<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> 的时间复杂度，快速幂就是把<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> 时间复杂度缩减为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(logn)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span> 的算法，本质上运用了分治的思想</p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">typedef long long ll;\nll mod; \nll quickpow(ll x,ll zs)\n&#123;\n    ll ans=0;\n    while(zs)\n    &#123;\n        if(zs&amp;1)\n        &#123;\n            ans=ans*x%mod;\n            ans%=mod;\n        &#125;\n        x*=x;\n        x%=mod;\n        zs/=2;\n    &#125;\n    return ans%mod;\n&#125;\n</code></pre>\n",
            "tags": [
                "OI模板",
                "C++",
                "数学"
            ]
        },
        {
            "id": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/",
            "url": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E6%9C%80%E5%B0%8F%E7%94%9F%E6%88%90%E6%A0%91/",
            "title": "模板之最小生成树",
            "date_published": "2023-03-20T12:50:34.000Z",
            "content_html": "<h1 id=\"最小生成树模板\"><a class=\"anchor\" href=\"#最小生成树模板\">#</a> 最小生成树模板</h1>\n<p><span id=\"more\"></span></p>\n<p>最小生成树有<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>p</mi><mi>r</mi><mi>i</mi><mi>m</mi><mi>e</mi></mrow><annotation encoding=\"application/x-tex\">prime</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.85396em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\">p</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">i</span><span class=\"mord mathnormal\">m</span><span class=\"mord mathnormal\">e</span></span></span></span> 算法和<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>k</mi><mi>r</mi><mi>u</mi><mi>s</mi><mi>k</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding=\"application/x-tex\">kruskal</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">u</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\" style=\"margin-right:0.03148em;\">k</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span></span></span></span> 算法，本篇暂时贴了克鲁斯卡尔算法写的生成树代码，算法分析请移步另一篇文章</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDMzNjY=\">例题：最小生成树</span></p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N=5001;\nstruct node\n&#123;\n    int a;\n    int b;\n    int len;\n    node(int aa,int bb,int ll)\n    &#123;\n        a=aa;\n        b=bb;\n        len=ll;\n    &#125;\n    node()\n    &#123;\n    &#125;\n    bool operator &lt; (const node &amp; ot) const\n    &#123;\n        return len&lt;ot.len;\n    &#125;\n&#125;;\nint n,m,sum,fa[N],cnt;\nvector &lt;node &gt; g;\nint find(int f)\n&#123;\n    if(fa[f]==f)\n        return f;\n    fa[f]=find(fa[f]);\n    return fa[f];\n&#125;\nvoid hb(int a,int b)\n&#123;\n    int f1=find(a),f2=find(b);\n    if(f1!=f2)\n        fa[f2]=f1;\n&#125;\nint main()\n&#123;\n    scanf(&quot;%d %d&quot;,&amp;n,&amp;m);\n    for(int i=1;i&lt;=m;i++)\n    &#123;\n        int x,y,z;\n        scanf(&quot;%d %d %d&quot;,&amp;x,&amp;y,&amp;z);\n        g.push_back(node(x,y,z)),sum+=z;\n    &#125;\n    sort(g.begin(),g.end());\n    int ans=0;\n    for(int i=1;i&lt;=n;i++)\n        fa[i]=i;\n    for(int i=0;i&lt;m;i++)\n    &#123;\n        if(cnt==m-1)\n            break;\n        int a=g[i].a,b=g[i].b,len=g[i].len;\n        if(find(a)!=find(b))\n        &#123;\n            hb(a,b);\n            cnt++;\n            ans+=len;\n        &#125;\n    &#125;\n    printf(&quot;%d\\n&quot;,ans);\n    return 0;\n &#125; \n</code></pre>\n",
            "tags": [
                "OI模板",
                "C++",
                "图论"
            ]
        },
        {
            "id": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E7%BC%A9%E7%82%B9%E3%80%81%E5%89%B2%E7%82%B9%E3%80%81%E6%A1%A5/",
            "url": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E7%BC%A9%E7%82%B9%E3%80%81%E5%89%B2%E7%82%B9%E3%80%81%E6%A1%A5/",
            "title": "模板之缩点、割点、桥",
            "date_published": "2023-03-20T12:31:46.000Z",
            "content_html": "<h1 id=\"tarjan缩点-割点和桥的模板\"><a class=\"anchor\" href=\"#tarjan缩点-割点和桥的模板\">#</a> Tarjan 缩点、割点和桥的模板</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-缩点\"><a class=\"anchor\" href=\"#一-缩点\">#</a> 一、缩点</h2>\n<p>缩点的前提是了解强联通分量，强联通分量的定义是强联通分量中的每一个点都可以到达另一个强联通分量中的节点，缩点就是把一个强联通分量缩成一个节点来帮助我们更好完成题目任务的一种方法</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDIzNDE=\">例题：受欢迎的牛 G</span></p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N=20001;\nstack &lt;int  &gt;s;\nvector &lt;int &gt; g[N];\nint low[N],dfn[N],col[N],n,m,cnt,T,count0[N],tot,in[N],out[N];\nbool flag[N];\nvoid tarjan(int pos)\n&#123;\n\tdfn[pos]=low[pos]=++cnt;\n\ts.push(pos);\n\tint size=g[pos].size();\n\tflag[pos]=true;\n\tfor(int i=0;i&lt;size;i++)\n\t&#123;\n\t\tint to=g[pos][i];\n\t\tif(!dfn[to])\n\t\t&#123;\n\t\t\ttarjan(to);\n\t\t\tlow[pos]=min(low[pos],low[to]);\n\t\t&#125;\n\t\telse if(flag[to])\n\t\t\tlow[pos]=min(low[pos],low[to]);\n\t&#125;\n\tif(dfn[pos]==low[pos])\n\t&#123;\n\t\tflag[pos]=false;\n\t\tcol[pos]=++tot;\n\t\twhile(!s.empty() &amp;&amp; s.top()!=pos)\n\t\t&#123;\n\t\t\tflag[s.top()]=false;\n\t\t\tcol[s.top()]=tot;\n\t\t\ts.pop();\n\t\t&#125;\n\t\ts.pop();\n\t&#125;\n\treturn;\n&#125;\nint main()\n&#123;\n\tscanf(&quot;%d %d&quot;,&amp;n,&amp;m);\n\tfor(int i=1;i&lt;=m;i++)\n\t&#123;\n\t\tint x,y;\n\t\tscanf(&quot;%d %d&quot;,&amp;x,&amp;y);\n\t\tg[x].push_back(y);\n\t&#125;\n\tfor(int i=1;i&lt;=n;i++)\n\t\tg[i].push_back(i);\n\tfor(int i=1;i&lt;=n;i++)\n\t&#123;\n\t\tif(!dfn[i])\n\t\t\ttarjan(i);\n\t&#125;\n\tfor(int i=1;i&lt;=n;i++)\n    \tcount0[col[i]]++;\n    for(int i=1;i&lt;=n;i++)\n    &#123;\n    \tint size=g[i].size();\n    \tfor(int j=0;j&lt;size;j++)\n    \t&#123;\n    \t\tif(col[i]!=col[g[i][j]])\n    \t\t\tin[col[g[i][j]]]=1,out[col[i]]=1;\n\t\t&#125;\n\t&#125;\n\tint anspos=0,ans=0;\n\tfor(int i=1;i&lt;=tot;i++)\n\t&#123;\n\t\tif(!out[i])\n\t\t&#123;\n\t\t\tans++;\n\t\t\tanspos=i;\n\t\t&#125;\n\t&#125;\n\tif(ans&gt;1)\n\t\tprintf(&quot;0\\n&quot;);\n\telse\n\t\tprintf(&quot;%d\\n&quot;,count0[anspos]);\n\treturn 0;\n&#125;\n</code></pre>\n<h2 id=\"二-割点\"><a class=\"anchor\" href=\"#二-割点\">#</a> 二、割点</h2>\n<p>割点的定义是如果一张连通图删去此节点，那么这张连通图变为不连通图，此节点就被称为割点</p>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDMzODg=\">例题：割点</span></p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">#include &lt;bits/stdc++.h&gt;\nusing namespace std;\nconst int N=200001;\nint n,m,dfn[N],low[N],root,cnt;\nbool flag[N],cut[N];\nvector &lt;int &gt; g[N];\nvoid tarjan(int cur)\n&#123;\n\tdfn[cur]=low[cur]=++cnt;\n\tint size=g[cur].size();\n\tint flag=0;\n\tfor(int i=0;i&lt;size;i++)\n\t&#123;\n\t\tint to=g[cur][i];\n\t\tif(!dfn[to])\n\t\t&#123;\n\t\t\ttarjan(to);\n\t\t\tlow[cur]=min(low[cur],low[to]);\n\t\t\tif(low[to]&gt;=dfn[cur])\n\t\t\t&#123;\n\t\t\t\tflag++;\n\t\t\t\tif(cur!=root || flag&gt;1)\n\t\t\t\t\tcut[cur]=true;\n\t\t\t&#125;\n\t\t&#125;\n\t\telse\n\t\t\tlow[cur]=min(low[cur],dfn[to]);\n\t&#125;\n\treturn;\n&#125;\nint main()\n&#123;\n\tscanf(&quot;%d %d&quot;,&amp;n,&amp;m);\n\tfor(int i=1;i&lt;=m;i++)\n\t&#123;\n\t\tint a,b;\n\t\tscanf(&quot;%d %d&quot;,&amp;a,&amp;b);\n\t\tg[a].push_back(b);\n\t\tg[b].push_back(a);\n\t&#125;\n\tfor(int i=1;i&lt;=n;i++)\n\t\tif(!dfn[i])\n\t\t\troot=i,tarjan(i);\n\tlong long ans=0;\n\tfor(int i=1;i&lt;=n;i++)\n\t\tif(cut[i])\n\t\t\tans++;\n\tprintf(&quot;%lld\\n&quot;,ans);\n\tfor(int i=1;i&lt;=n;i++)\n\t\tif(cut[i])\n\t\t\tprintf(&quot;%d &quot;,i);\n\treturn 0;\n&#125;\n</code></pre>\n<h2 id=\"三-桥\"><a class=\"anchor\" href=\"#三-桥\">#</a> 三、桥</h2>\n<p>桥的定义和割点很像，区别在于割点是一个点，而桥是一条边，也就是一张连通图少了一个桥就会变成非连通图</p>\n<p>没有好的例题，直接上代码：</p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">struct node\n&#123;\n    int to,id;\n    node(int tt,int ii)\n    &#123;\n        to=tt,id=ii;\n    &#125;\n    node()\n    &#123;\n    &#125;\n&#125;;\nvector &lt;node &gt; g[N];\nint dfn[N],low[N];\nbool qiao[N];\n\nvoid tarjan(int cur)\n&#123;\n    dfn[cur]=low[cur]=++cnt;\n    int size=g[cur].size();\n    for(int i=0;i&lt;size;i++)\n    &#123;\n        int to=g[cur][i].to;\n        if(!dfn[to])\n        &#123;\n            tarjan(to);\n            low[cur]=min(low[cur],low[to]);\n            if(low[to]&gt;dfn[cur])\n                qiao[g[cur][i].id]=true;\n        &#125;\n        else\n            low[cur]=min(low[cur],dfn[to]);\n    &#125;\n    return;\n&#125;\n</code></pre>\n<p>本篇文章只贴模板，具体分析移步另一篇文章</p>\n",
            "tags": [
                "OI模板",
                "C++",
                "图论"
            ]
        },
        {
            "id": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/",
            "url": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8B%E6%A0%91%E7%8A%B6%E6%95%B0%E7%BB%84/",
            "title": "模板之树状数组",
            "date_published": "2023-03-20T12:19:12.000Z",
            "content_html": "<h1 id=\"树状数组模板\"><a class=\"anchor\" href=\"#树状数组模板\">#</a> 树状数组模板</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-树状数组大致介绍\"><a class=\"anchor\" href=\"#一-树状数组大致介绍\">#</a> 一、树状数组大致介绍</h2>\n<p>1、树状数组就是模拟树形结构的一个数组</p>\n<p>2、树状数组解决的问题大部分是区间上的更新以及求和</p>\n<p>3、树状数组的修改和查询的复杂度都是<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(logn)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></p>\n<p>4、树状数组的大致形状如下图：</p>\n<p><img data-src=\"https://s2.loli.net/2023/10/26/a1CPq9TMpNJBUi8.png\" alt=\"树状数组\" /></p>\n<p>具体原理请移步另一篇文章，本篇只搬运模板</p>\n<h2 id=\"二-例题和模板\"><a class=\"anchor\" href=\"#二-例题和模板\">#</a> 二、例题和模板</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDMzNjg=\">例题：树状数组</span></p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">#include &lt;cstdio&gt;\n#include &lt;cstdlib&gt;\nusing namespace std;\nint n;\nconst int N=500001;\nint d[N];\nint m;\nint cf[N];\nint lowbit(int x)\n&#123;\n    return x &amp; -x;\n&#125;\nint add(int wz,int v)\n&#123;\n    while(wz&lt;=n)\n    &#123;\n        cf[wz]+=v;\n        wz+=lowbit(wz);\n    &#125;\n&#125;\nint get_ans(int x)\n&#123;\n    int cnt=0;\n    while(x&gt;0)\n    &#123;\n        cnt+=cf[x];\n        x-=lowbit(x);\n    &#125;\n    return cnt;\n&#125;\nint main()\n&#123;\n    scanf(&quot;%d %d&quot;,&amp;n,&amp;m);\n    int c;\n    for(int i=1;i&lt;=n;i++)\n    &#123;\n        scanf(&quot;%d&quot;,&amp;c);\n        add(i,c);\n        add(i+1,-c);\n    &#125;\n    for(int i=0;i&lt;m;i++)\n    &#123;\n        int op;\n        scanf(&quot;%d&quot;,&amp;op);\n        if(op==1)\n        &#123;\n            int l,r,z;\n            scanf(&quot; %d %d %d&quot;,&amp;l,&amp;r,&amp;z);\n            add(l,z);\n            add(r+1,-z);\n        &#125;\n        else\n        &#123;\n            int x;\n            scanf(&quot;%d&quot;,&amp;x);\n            printf(&quot;%d\\n&quot;,get_ans(x));\n        &#125;\n    &#125;\n    return 0;\n&#125;\n</code></pre>\n",
            "tags": [
                "OI模板",
                "C++",
                "数据结构",
                "树状数组"
            ]
        },
        {
            "id": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8BRMQ/",
            "url": "http://ntmydb/github.io/oi-template/%E6%A8%A1%E6%9D%BF%E4%B9%8BRMQ/",
            "title": "模板之RMQ",
            "date_published": "2023-03-20T09:00:16.000Z",
            "content_html": "<h1 id=\"rmq模板\"><a class=\"anchor\" href=\"#rmq模板\">#</a> RMQ 模板</h1>\n<p><span id=\"more\"></span></p>\n<h2 id=\"一-rmq简介\"><a class=\"anchor\" href=\"#一-rmq简介\">#</a> 一、RMQ 简介</h2>\n<p>中文全名为区间最值查询，有人说区间最值不就循环扫一遍就出来了吗，好想法。但是，如果区间长度为 100000 以上而且需要连续查询 m 次呢</p>\n<p>显然你会看到满屏的 &lt;font color=&quot;#ffc116&quot; size=&quot;6&quot;&gt;TLE&lt;/font&gt;，谁不喜欢绿色的 &lt; font color=&quot;#52a41a&quot; size=&quot;6&quot;&gt;AC&lt;/font &gt; 呢？所以 RMQ 算法就是把黄色绿掉的算法</p>\n<p>RMQ 算法一般预处理时间较长，时间复杂度为<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><mi>g</mi><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(nlogn)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\" style=\"margin-right:0.01968em;\">l</span><span class=\"mord mathnormal\">o</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">g</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span>, 但查询速度很快，只需要<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span>，<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>R</mi><mi>M</mi><mi>Q</mi></mrow><annotation encoding=\"application/x-tex\">RMQ</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.8777699999999999em;vertical-align:-0.19444em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mord mathnormal\" style=\"margin-right:0.10903em;\">M</span><span class=\"mord mathnormal\">Q</span></span></span></span> 本质上还是用到了倍增的思想，记录连续<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msup><mn>2</mn><mi>j</mi></msup></mrow><annotation encoding=\"application/x-tex\">2^j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.824664em;vertical-align:0em;\"></span><span class=\"mord\"><span class=\"mord\">2</span><span class=\"msupsub\"><span class=\"vlist-t\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.824664em;\"><span style=\"top:-3.063em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span></span></span></span></span></span></span> 个数的最值，因此提高查找效率</p>\n<h2 id=\"二-例题及代码\"><a class=\"anchor\" href=\"#二-例题及代码\">#</a> 二、例题及代码</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubHVvZ3UuY29tLmNuL3Byb2JsZW0vUDE4MTY=\">例题：忠诚</span></p>\n<p>Code:</p>\n<pre><code class=\"language-c++\">#include &lt;cstdlib&gt;\n#include &lt;cstdio&gt;\n#include &lt;cmath&gt;\n#include &lt;algorithm&gt;\nusing namespace std;\nconst int N=100001;\nint z[N][20];\nint n,m;\nint count1(int x)\n&#123;\n    int need=1;\n    for(int i=0;i&lt;x;i++)\n        need=need*2;\n    return need;\n&#125;\nvoid create(int n)\n&#123;\n    for(int i=1;count1(i)&lt;=n;i++)\n    &#123;\n        for(int j=1;j+count1(i)-1&lt;=n;j++)\n            z[j][i]=min(z[j][i-1],z[j+(1&lt;&lt;(i-1))][i-1]);\n    &#125;\n    return;\n&#125;\nint work(int l,int r)\n&#123;\n    int t=(int)(log((r-l+1)*1.0)/log(2.0));\n    return min(z[l][t],z[r-(1&lt;&lt;t)+1][t]);\n&#125;\nint main()\n&#123;\n    scanf(&quot;%d%d&quot;,&amp;m,&amp;n);\n    for(int i=1;i&lt;=m;i++)\n        scanf(&quot;%d&quot;,&amp;z[i][0]);\n    create(m);\n    for(int i=1;i&lt;=n;i++)\n    &#123;\n        int a,b;\n        scanf(&quot; %d %d&quot;,&amp;a,&amp;b);\n        printf(&quot;%d &quot;,work(a,b));\n    &#125;\n    return 0;\n&#125;\n</code></pre>\n<p>具体算法原理请移步另一篇文章</p>\n",
            "tags": [
                "OI模板",
                "倍增",
                "RMQ"
            ]
        }
    ]
}